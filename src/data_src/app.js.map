{
  "version": 3,
  "sources": ["../js/src/lib/bootstrap.bundle.js", "../js/src/lib/van-1.5.2.js", "../js/src/Notifications.ts", "../js/src/TimeSync.ts", "../js/src/utils.ts", "../js/src/SimpleFpvTimer.ts", "../js/src/app.ts", "../js/src/race/tabs/Config.ts", "../js/src/race/tabs/Laps.ts", "../js/src/race/tabs/Players.ts", "../js/src/lib/uPlot.esm.js", "../js/src/race/tabs/Signal.ts", "../js/src/race/RaceMode.ts", "../js/src/ctf/CaptureTheFlagMode.ts", "../js/src/spectrum/SpectrumMode.ts"],
  "sourcesContent": ["/*!\n  * Bootstrap v5.3.3 (https://getbootstrap.com/)\n  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)\n  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n  */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.bootstrap = factory());\n})(this, (function () { 'use strict';\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap dom/data.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n  /**\n   * Constants\n   */\n\n  const elementMap = new Map();\n  const Data = {\n    set(element, key, instance) {\n      if (!elementMap.has(element)) {\n        elementMap.set(element, new Map());\n      }\n      const instanceMap = elementMap.get(element);\n\n      // make it clear we only want one instance per element\n      // can be removed later when multiple key/instances are fine to be used\n      if (!instanceMap.has(key) && instanceMap.size !== 0) {\n        // eslint-disable-next-line no-console\n        console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(instanceMap.keys())[0]}.`);\n        return;\n      }\n      instanceMap.set(key, instance);\n    },\n    get(element, key) {\n      if (elementMap.has(element)) {\n        return elementMap.get(element).get(key) || null;\n      }\n      return null;\n    },\n    remove(element, key) {\n      if (!elementMap.has(element)) {\n        return;\n      }\n      const instanceMap = elementMap.get(element);\n      instanceMap.delete(key);\n\n      // free up element references if there are no instances left for an element\n      if (instanceMap.size === 0) {\n        elementMap.delete(element);\n      }\n    }\n  };\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap util/index.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n  const MAX_UID = 1000000;\n  const MILLISECONDS_MULTIPLIER = 1000;\n  const TRANSITION_END = 'transitionend';\n\n  /**\n   * Properly escape IDs selectors to handle weird IDs\n   * @param {string} selector\n   * @returns {string}\n   */\n  const parseSelector = selector => {\n    if (selector && window.CSS && window.CSS.escape) {\n      // document.querySelector needs escaping to handle IDs (html5+) containing for instance /\n      selector = selector.replace(/#([^\\s\"#']+)/g, (match, id) => `#${CSS.escape(id)}`);\n    }\n    return selector;\n  };\n\n  // Shout-out Angus Croll (https://goo.gl/pxwQGp)\n  const toType = object => {\n    if (object === null || object === undefined) {\n      return `${object}`;\n    }\n    return Object.prototype.toString.call(object).match(/\\s([a-z]+)/i)[1].toLowerCase();\n  };\n\n  /**\n   * Public Util API\n   */\n\n  const getUID = prefix => {\n    do {\n      prefix += Math.floor(Math.random() * MAX_UID);\n    } while (document.getElementById(prefix));\n    return prefix;\n  };\n  const getTransitionDurationFromElement = element => {\n    if (!element) {\n      return 0;\n    }\n\n    // Get transition-duration of the element\n    let {\n      transitionDuration,\n      transitionDelay\n    } = window.getComputedStyle(element);\n    const floatTransitionDuration = Number.parseFloat(transitionDuration);\n    const floatTransitionDelay = Number.parseFloat(transitionDelay);\n\n    // Return 0 if element or transition duration is not found\n    if (!floatTransitionDuration && !floatTransitionDelay) {\n      return 0;\n    }\n\n    // If multiple durations are defined, take the first\n    transitionDuration = transitionDuration.split(',')[0];\n    transitionDelay = transitionDelay.split(',')[0];\n    return (Number.parseFloat(transitionDuration) + Number.parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER;\n  };\n  const triggerTransitionEnd = element => {\n    element.dispatchEvent(new Event(TRANSITION_END));\n  };\n  const isElement$1 = object => {\n    if (!object || typeof object !== 'object') {\n      return false;\n    }\n    if (typeof object.jquery !== 'undefined') {\n      object = object[0];\n    }\n    return typeof object.nodeType !== 'undefined';\n  };\n  const getElement = object => {\n    // it's a jQuery object or a node element\n    if (isElement$1(object)) {\n      return object.jquery ? object[0] : object;\n    }\n    if (typeof object === 'string' && object.length > 0) {\n      return document.querySelector(parseSelector(object));\n    }\n    return null;\n  };\n  const isVisible = element => {\n    if (!isElement$1(element) || element.getClientRects().length === 0) {\n      return false;\n    }\n    const elementIsVisible = getComputedStyle(element).getPropertyValue('visibility') === 'visible';\n    // Handle `details` element as its content may falsie appear visible when it is closed\n    const closedDetails = element.closest('details:not([open])');\n    if (!closedDetails) {\n      return elementIsVisible;\n    }\n    if (closedDetails !== element) {\n      const summary = element.closest('summary');\n      if (summary && summary.parentNode !== closedDetails) {\n        return false;\n      }\n      if (summary === null) {\n        return false;\n      }\n    }\n    return elementIsVisible;\n  };\n  const isDisabled = element => {\n    if (!element || element.nodeType !== Node.ELEMENT_NODE) {\n      return true;\n    }\n    if (element.classList.contains('disabled')) {\n      return true;\n    }\n    if (typeof element.disabled !== 'undefined') {\n      return element.disabled;\n    }\n    return element.hasAttribute('disabled') && element.getAttribute('disabled') !== 'false';\n  };\n  const findShadowRoot = element => {\n    if (!document.documentElement.attachShadow) {\n      return null;\n    }\n\n    // Can find the shadow root otherwise it'll return the document\n    if (typeof element.getRootNode === 'function') {\n      const root = element.getRootNode();\n      return root instanceof ShadowRoot ? root : null;\n    }\n    if (element instanceof ShadowRoot) {\n      return element;\n    }\n\n    // when we don't find a shadow root\n    if (!element.parentNode) {\n      return null;\n    }\n    return findShadowRoot(element.parentNode);\n  };\n  const noop = () => {};\n\n  /**\n   * Trick to restart an element's animation\n   *\n   * @param {HTMLElement} element\n   * @return void\n   *\n   * @see https://www.charistheo.io/blog/2021/02/restart-a-css-animation-with-javascript/#restarting-a-css-animation\n   */\n  const reflow = element => {\n    element.offsetHeight; // eslint-disable-line no-unused-expressions\n  };\n  const getjQuery = () => {\n    if (window.jQuery && !document.body.hasAttribute('data-bs-no-jquery')) {\n      return window.jQuery;\n    }\n    return null;\n  };\n  const DOMContentLoadedCallbacks = [];\n  const onDOMContentLoaded = callback => {\n    if (document.readyState === 'loading') {\n      // add listener on the first call when the document is in loading state\n      if (!DOMContentLoadedCallbacks.length) {\n        document.addEventListener('DOMContentLoaded', () => {\n          for (const callback of DOMContentLoadedCallbacks) {\n            callback();\n          }\n        });\n      }\n      DOMContentLoadedCallbacks.push(callback);\n    } else {\n      callback();\n    }\n  };\n  const isRTL = () => document.documentElement.dir === 'rtl';\n  const defineJQueryPlugin = plugin => {\n    onDOMContentLoaded(() => {\n      const $ = getjQuery();\n      /* istanbul ignore if */\n      if ($) {\n        const name = plugin.NAME;\n        const JQUERY_NO_CONFLICT = $.fn[name];\n        $.fn[name] = plugin.jQueryInterface;\n        $.fn[name].Constructor = plugin;\n        $.fn[name].noConflict = () => {\n          $.fn[name] = JQUERY_NO_CONFLICT;\n          return plugin.jQueryInterface;\n        };\n      }\n    });\n  };\n  const execute = (possibleCallback, args = [], defaultValue = possibleCallback) => {\n    return typeof possibleCallback === 'function' ? possibleCallback(...args) : defaultValue;\n  };\n  const executeAfterTransition = (callback, transitionElement, waitForTransition = true) => {\n    if (!waitForTransition) {\n      execute(callback);\n      return;\n    }\n    const durationPadding = 5;\n    const emulatedDuration = getTransitionDurationFromElement(transitionElement) + durationPadding;\n    let called = false;\n    const handler = ({\n      target\n    }) => {\n      if (target !== transitionElement) {\n        return;\n      }\n      called = true;\n      transitionElement.removeEventListener(TRANSITION_END, handler);\n      execute(callback);\n    };\n    transitionElement.addEventListener(TRANSITION_END, handler);\n    setTimeout(() => {\n      if (!called) {\n        triggerTransitionEnd(transitionElement);\n      }\n    }, emulatedDuration);\n  };\n\n  /**\n   * Return the previous/next element of a list.\n   *\n   * @param {array} list    The list of elements\n   * @param activeElement   The active element\n   * @param shouldGetNext   Choose to get next or previous element\n   * @param isCycleAllowed\n   * @return {Element|elem} The proper element\n   */\n  const getNextActiveElement = (list, activeElement, shouldGetNext, isCycleAllowed) => {\n    const listLength = list.length;\n    let index = list.indexOf(activeElement);\n\n    // if the element does not exist in the list return an element\n    // depending on the direction and if cycle is allowed\n    if (index === -1) {\n      return !shouldGetNext && isCycleAllowed ? list[listLength - 1] : list[0];\n    }\n    index += shouldGetNext ? 1 : -1;\n    if (isCycleAllowed) {\n      index = (index + listLength) % listLength;\n    }\n    return list[Math.max(0, Math.min(index, listLength - 1))];\n  };\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap dom/event-handler.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const namespaceRegex = /[^.]*(?=\\..*)\\.|.*/;\n  const stripNameRegex = /\\..*/;\n  const stripUidRegex = /::\\d+$/;\n  const eventRegistry = {}; // Events storage\n  let uidEvent = 1;\n  const customEvents = {\n    mouseenter: 'mouseover',\n    mouseleave: 'mouseout'\n  };\n  const nativeEvents = new Set(['click', 'dblclick', 'mouseup', 'mousedown', 'contextmenu', 'mousewheel', 'DOMMouseScroll', 'mouseover', 'mouseout', 'mousemove', 'selectstart', 'selectend', 'keydown', 'keypress', 'keyup', 'orientationchange', 'touchstart', 'touchmove', 'touchend', 'touchcancel', 'pointerdown', 'pointermove', 'pointerup', 'pointerleave', 'pointercancel', 'gesturestart', 'gesturechange', 'gestureend', 'focus', 'blur', 'change', 'reset', 'select', 'submit', 'focusin', 'focusout', 'load', 'unload', 'beforeunload', 'resize', 'move', 'DOMContentLoaded', 'readystatechange', 'error', 'abort', 'scroll']);\n\n  /**\n   * Private methods\n   */\n\n  function makeEventUid(element, uid) {\n    return uid && `${uid}::${uidEvent++}` || element.uidEvent || uidEvent++;\n  }\n  function getElementEvents(element) {\n    const uid = makeEventUid(element);\n    element.uidEvent = uid;\n    eventRegistry[uid] = eventRegistry[uid] || {};\n    return eventRegistry[uid];\n  }\n  function bootstrapHandler(element, fn) {\n    return function handler(event) {\n      hydrateObj(event, {\n        delegateTarget: element\n      });\n      if (handler.oneOff) {\n        EventHandler.off(element, event.type, fn);\n      }\n      return fn.apply(element, [event]);\n    };\n  }\n  function bootstrapDelegationHandler(element, selector, fn) {\n    return function handler(event) {\n      const domElements = element.querySelectorAll(selector);\n      for (let {\n        target\n      } = event; target && target !== this; target = target.parentNode) {\n        for (const domElement of domElements) {\n          if (domElement !== target) {\n            continue;\n          }\n          hydrateObj(event, {\n            delegateTarget: target\n          });\n          if (handler.oneOff) {\n            EventHandler.off(element, event.type, selector, fn);\n          }\n          return fn.apply(target, [event]);\n        }\n      }\n    };\n  }\n  function findHandler(events, callable, delegationSelector = null) {\n    return Object.values(events).find(event => event.callable === callable && event.delegationSelector === delegationSelector);\n  }\n  function normalizeParameters(originalTypeEvent, handler, delegationFunction) {\n    const isDelegated = typeof handler === 'string';\n    // TODO: tooltip passes `false` instead of selector, so we need to check\n    const callable = isDelegated ? delegationFunction : handler || delegationFunction;\n    let typeEvent = getTypeEvent(originalTypeEvent);\n    if (!nativeEvents.has(typeEvent)) {\n      typeEvent = originalTypeEvent;\n    }\n    return [isDelegated, callable, typeEvent];\n  }\n  function addHandler(element, originalTypeEvent, handler, delegationFunction, oneOff) {\n    if (typeof originalTypeEvent !== 'string' || !element) {\n      return;\n    }\n    let [isDelegated, callable, typeEvent] = normalizeParameters(originalTypeEvent, handler, delegationFunction);\n\n    // in case of mouseenter or mouseleave wrap the handler within a function that checks for its DOM position\n    // this prevents the handler from being dispatched the same way as mouseover or mouseout does\n    if (originalTypeEvent in customEvents) {\n      const wrapFunction = fn => {\n        return function (event) {\n          if (!event.relatedTarget || event.relatedTarget !== event.delegateTarget && !event.delegateTarget.contains(event.relatedTarget)) {\n            return fn.call(this, event);\n          }\n        };\n      };\n      callable = wrapFunction(callable);\n    }\n    const events = getElementEvents(element);\n    const handlers = events[typeEvent] || (events[typeEvent] = {});\n    const previousFunction = findHandler(handlers, callable, isDelegated ? handler : null);\n    if (previousFunction) {\n      previousFunction.oneOff = previousFunction.oneOff && oneOff;\n      return;\n    }\n    const uid = makeEventUid(callable, originalTypeEvent.replace(namespaceRegex, ''));\n    const fn = isDelegated ? bootstrapDelegationHandler(element, handler, callable) : bootstrapHandler(element, callable);\n    fn.delegationSelector = isDelegated ? handler : null;\n    fn.callable = callable;\n    fn.oneOff = oneOff;\n    fn.uidEvent = uid;\n    handlers[uid] = fn;\n    element.addEventListener(typeEvent, fn, isDelegated);\n  }\n  function removeHandler(element, events, typeEvent, handler, delegationSelector) {\n    const fn = findHandler(events[typeEvent], handler, delegationSelector);\n    if (!fn) {\n      return;\n    }\n    element.removeEventListener(typeEvent, fn, Boolean(delegationSelector));\n    delete events[typeEvent][fn.uidEvent];\n  }\n  function removeNamespacedHandlers(element, events, typeEvent, namespace) {\n    const storeElementEvent = events[typeEvent] || {};\n    for (const [handlerKey, event] of Object.entries(storeElementEvent)) {\n      if (handlerKey.includes(namespace)) {\n        removeHandler(element, events, typeEvent, event.callable, event.delegationSelector);\n      }\n    }\n  }\n  function getTypeEvent(event) {\n    // allow to get the native events from namespaced events ('click.bs.button' --> 'click')\n    event = event.replace(stripNameRegex, '');\n    return customEvents[event] || event;\n  }\n  const EventHandler = {\n    on(element, event, handler, delegationFunction) {\n      addHandler(element, event, handler, delegationFunction, false);\n    },\n    one(element, event, handler, delegationFunction) {\n      addHandler(element, event, handler, delegationFunction, true);\n    },\n    off(element, originalTypeEvent, handler, delegationFunction) {\n      if (typeof originalTypeEvent !== 'string' || !element) {\n        return;\n      }\n      const [isDelegated, callable, typeEvent] = normalizeParameters(originalTypeEvent, handler, delegationFunction);\n      const inNamespace = typeEvent !== originalTypeEvent;\n      const events = getElementEvents(element);\n      const storeElementEvent = events[typeEvent] || {};\n      const isNamespace = originalTypeEvent.startsWith('.');\n      if (typeof callable !== 'undefined') {\n        // Simplest case: handler is passed, remove that listener ONLY.\n        if (!Object.keys(storeElementEvent).length) {\n          return;\n        }\n        removeHandler(element, events, typeEvent, callable, isDelegated ? handler : null);\n        return;\n      }\n      if (isNamespace) {\n        for (const elementEvent of Object.keys(events)) {\n          removeNamespacedHandlers(element, events, elementEvent, originalTypeEvent.slice(1));\n        }\n      }\n      for (const [keyHandlers, event] of Object.entries(storeElementEvent)) {\n        const handlerKey = keyHandlers.replace(stripUidRegex, '');\n        if (!inNamespace || originalTypeEvent.includes(handlerKey)) {\n          removeHandler(element, events, typeEvent, event.callable, event.delegationSelector);\n        }\n      }\n    },\n    trigger(element, event, args) {\n      if (typeof event !== 'string' || !element) {\n        return null;\n      }\n      const $ = getjQuery();\n      const typeEvent = getTypeEvent(event);\n      const inNamespace = event !== typeEvent;\n      let jQueryEvent = null;\n      let bubbles = true;\n      let nativeDispatch = true;\n      let defaultPrevented = false;\n      if (inNamespace && $) {\n        jQueryEvent = $.Event(event, args);\n        $(element).trigger(jQueryEvent);\n        bubbles = !jQueryEvent.isPropagationStopped();\n        nativeDispatch = !jQueryEvent.isImmediatePropagationStopped();\n        defaultPrevented = jQueryEvent.isDefaultPrevented();\n      }\n      const evt = hydrateObj(new Event(event, {\n        bubbles,\n        cancelable: true\n      }), args);\n      if (defaultPrevented) {\n        evt.preventDefault();\n      }\n      if (nativeDispatch) {\n        element.dispatchEvent(evt);\n      }\n      if (evt.defaultPrevented && jQueryEvent) {\n        jQueryEvent.preventDefault();\n      }\n      return evt;\n    }\n  };\n  function hydrateObj(obj, meta = {}) {\n    for (const [key, value] of Object.entries(meta)) {\n      try {\n        obj[key] = value;\n      } catch (_unused) {\n        Object.defineProperty(obj, key, {\n          configurable: true,\n          get() {\n            return value;\n          }\n        });\n      }\n    }\n    return obj;\n  }\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap dom/manipulator.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n  function normalizeData(value) {\n    if (value === 'true') {\n      return true;\n    }\n    if (value === 'false') {\n      return false;\n    }\n    if (value === Number(value).toString()) {\n      return Number(value);\n    }\n    if (value === '' || value === 'null') {\n      return null;\n    }\n    if (typeof value !== 'string') {\n      return value;\n    }\n    try {\n      return JSON.parse(decodeURIComponent(value));\n    } catch (_unused) {\n      return value;\n    }\n  }\n  function normalizeDataKey(key) {\n    return key.replace(/[A-Z]/g, chr => `-${chr.toLowerCase()}`);\n  }\n  const Manipulator = {\n    setDataAttribute(element, key, value) {\n      element.setAttribute(`data-bs-${normalizeDataKey(key)}`, value);\n    },\n    removeDataAttribute(element, key) {\n      element.removeAttribute(`data-bs-${normalizeDataKey(key)}`);\n    },\n    getDataAttributes(element) {\n      if (!element) {\n        return {};\n      }\n      const attributes = {};\n      const bsKeys = Object.keys(element.dataset).filter(key => key.startsWith('bs') && !key.startsWith('bsConfig'));\n      for (const key of bsKeys) {\n        let pureKey = key.replace(/^bs/, '');\n        pureKey = pureKey.charAt(0).toLowerCase() + pureKey.slice(1, pureKey.length);\n        attributes[pureKey] = normalizeData(element.dataset[key]);\n      }\n      return attributes;\n    },\n    getDataAttribute(element, key) {\n      return normalizeData(element.getAttribute(`data-bs-${normalizeDataKey(key)}`));\n    }\n  };\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap util/config.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Class definition\n   */\n\n  class Config {\n    // Getters\n    static get Default() {\n      return {};\n    }\n    static get DefaultType() {\n      return {};\n    }\n    static get NAME() {\n      throw new Error('You have to implement the static method \"NAME\", for each component!');\n    }\n    _getConfig(config) {\n      config = this._mergeConfigObj(config);\n      config = this._configAfterMerge(config);\n      this._typeCheckConfig(config);\n      return config;\n    }\n    _configAfterMerge(config) {\n      return config;\n    }\n    _mergeConfigObj(config, element) {\n      const jsonConfig = isElement$1(element) ? Manipulator.getDataAttribute(element, 'config') : {}; // try to parse\n\n      return {\n        ...this.constructor.Default,\n        ...(typeof jsonConfig === 'object' ? jsonConfig : {}),\n        ...(isElement$1(element) ? Manipulator.getDataAttributes(element) : {}),\n        ...(typeof config === 'object' ? config : {})\n      };\n    }\n    _typeCheckConfig(config, configTypes = this.constructor.DefaultType) {\n      for (const [property, expectedTypes] of Object.entries(configTypes)) {\n        const value = config[property];\n        const valueType = isElement$1(value) ? 'element' : toType(value);\n        if (!new RegExp(expectedTypes).test(valueType)) {\n          throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option \"${property}\" provided type \"${valueType}\" but expected type \"${expectedTypes}\".`);\n        }\n      }\n    }\n  }\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap base-component.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const VERSION = '5.3.3';\n\n  /**\n   * Class definition\n   */\n\n  class BaseComponent extends Config {\n    constructor(element, config) {\n      super();\n      element = getElement(element);\n      if (!element) {\n        return;\n      }\n      this._element = element;\n      this._config = this._getConfig(config);\n      Data.set(this._element, this.constructor.DATA_KEY, this);\n    }\n\n    // Public\n    dispose() {\n      Data.remove(this._element, this.constructor.DATA_KEY);\n      EventHandler.off(this._element, this.constructor.EVENT_KEY);\n      for (const propertyName of Object.getOwnPropertyNames(this)) {\n        this[propertyName] = null;\n      }\n    }\n    _queueCallback(callback, element, isAnimated = true) {\n      executeAfterTransition(callback, element, isAnimated);\n    }\n    _getConfig(config) {\n      config = this._mergeConfigObj(config, this._element);\n      config = this._configAfterMerge(config);\n      this._typeCheckConfig(config);\n      return config;\n    }\n\n    // Static\n    static getInstance(element) {\n      return Data.get(getElement(element), this.DATA_KEY);\n    }\n    static getOrCreateInstance(element, config = {}) {\n      return this.getInstance(element) || new this(element, typeof config === 'object' ? config : null);\n    }\n    static get VERSION() {\n      return VERSION;\n    }\n    static get DATA_KEY() {\n      return `bs.${this.NAME}`;\n    }\n    static get EVENT_KEY() {\n      return `.${this.DATA_KEY}`;\n    }\n    static eventName(name) {\n      return `${name}${this.EVENT_KEY}`;\n    }\n  }\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap dom/selector-engine.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n  const getSelector = element => {\n    let selector = element.getAttribute('data-bs-target');\n    if (!selector || selector === '#') {\n      let hrefAttribute = element.getAttribute('href');\n\n      // The only valid content that could double as a selector are IDs or classes,\n      // so everything starting with `#` or `.`. If a \"real\" URL is used as the selector,\n      // `document.querySelector` will rightfully complain it is invalid.\n      // See https://github.com/twbs/bootstrap/issues/32273\n      if (!hrefAttribute || !hrefAttribute.includes('#') && !hrefAttribute.startsWith('.')) {\n        return null;\n      }\n\n      // Just in case some CMS puts out a full URL with the anchor appended\n      if (hrefAttribute.includes('#') && !hrefAttribute.startsWith('#')) {\n        hrefAttribute = `#${hrefAttribute.split('#')[1]}`;\n      }\n      selector = hrefAttribute && hrefAttribute !== '#' ? hrefAttribute.trim() : null;\n    }\n    return selector ? selector.split(',').map(sel => parseSelector(sel)).join(',') : null;\n  };\n  const SelectorEngine = {\n    find(selector, element = document.documentElement) {\n      return [].concat(...Element.prototype.querySelectorAll.call(element, selector));\n    },\n    findOne(selector, element = document.documentElement) {\n      return Element.prototype.querySelector.call(element, selector);\n    },\n    children(element, selector) {\n      return [].concat(...element.children).filter(child => child.matches(selector));\n    },\n    parents(element, selector) {\n      const parents = [];\n      let ancestor = element.parentNode.closest(selector);\n      while (ancestor) {\n        parents.push(ancestor);\n        ancestor = ancestor.parentNode.closest(selector);\n      }\n      return parents;\n    },\n    prev(element, selector) {\n      let previous = element.previousElementSibling;\n      while (previous) {\n        if (previous.matches(selector)) {\n          return [previous];\n        }\n        previous = previous.previousElementSibling;\n      }\n      return [];\n    },\n    // TODO: this is now unused; remove later along with prev()\n    next(element, selector) {\n      let next = element.nextElementSibling;\n      while (next) {\n        if (next.matches(selector)) {\n          return [next];\n        }\n        next = next.nextElementSibling;\n      }\n      return [];\n    },\n    focusableChildren(element) {\n      const focusables = ['a', 'button', 'input', 'textarea', 'select', 'details', '[tabindex]', '[contenteditable=\"true\"]'].map(selector => `${selector}:not([tabindex^=\"-\"])`).join(',');\n      return this.find(focusables, element).filter(el => !isDisabled(el) && isVisible(el));\n    },\n    getSelectorFromElement(element) {\n      const selector = getSelector(element);\n      if (selector) {\n        return SelectorEngine.findOne(selector) ? selector : null;\n      }\n      return null;\n    },\n    getElementFromSelector(element) {\n      const selector = getSelector(element);\n      return selector ? SelectorEngine.findOne(selector) : null;\n    },\n    getMultipleElementsFromSelector(element) {\n      const selector = getSelector(element);\n      return selector ? SelectorEngine.find(selector) : [];\n    }\n  };\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap util/component-functions.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n  const enableDismissTrigger = (component, method = 'hide') => {\n    const clickEvent = `click.dismiss${component.EVENT_KEY}`;\n    const name = component.NAME;\n    EventHandler.on(document, clickEvent, `[data-bs-dismiss=\"${name}\"]`, function (event) {\n      if (['A', 'AREA'].includes(this.tagName)) {\n        event.preventDefault();\n      }\n      if (isDisabled(this)) {\n        return;\n      }\n      const target = SelectorEngine.getElementFromSelector(this) || this.closest(`.${name}`);\n      const instance = component.getOrCreateInstance(target);\n\n      // Method argument is left, for Alert and only, as it doesn't implement the 'hide' method\n      instance[method]();\n    });\n  };\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap alert.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME$f = 'alert';\n  const DATA_KEY$a = 'bs.alert';\n  const EVENT_KEY$b = `.${DATA_KEY$a}`;\n  const EVENT_CLOSE = `close${EVENT_KEY$b}`;\n  const EVENT_CLOSED = `closed${EVENT_KEY$b}`;\n  const CLASS_NAME_FADE$5 = 'fade';\n  const CLASS_NAME_SHOW$8 = 'show';\n\n  /**\n   * Class definition\n   */\n\n  class Alert extends BaseComponent {\n    // Getters\n    static get NAME() {\n      return NAME$f;\n    }\n\n    // Public\n    close() {\n      const closeEvent = EventHandler.trigger(this._element, EVENT_CLOSE);\n      if (closeEvent.defaultPrevented) {\n        return;\n      }\n      this._element.classList.remove(CLASS_NAME_SHOW$8);\n      const isAnimated = this._element.classList.contains(CLASS_NAME_FADE$5);\n      this._queueCallback(() => this._destroyElement(), this._element, isAnimated);\n    }\n\n    // Private\n    _destroyElement() {\n      this._element.remove();\n      EventHandler.trigger(this._element, EVENT_CLOSED);\n      this.dispose();\n    }\n\n    // Static\n    static jQueryInterface(config) {\n      return this.each(function () {\n        const data = Alert.getOrCreateInstance(this);\n        if (typeof config !== 'string') {\n          return;\n        }\n        if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n        data[config](this);\n      });\n    }\n  }\n\n  /**\n   * Data API implementation\n   */\n\n  enableDismissTrigger(Alert, 'close');\n\n  /**\n   * jQuery\n   */\n\n  defineJQueryPlugin(Alert);\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap button.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME$e = 'button';\n  const DATA_KEY$9 = 'bs.button';\n  const EVENT_KEY$a = `.${DATA_KEY$9}`;\n  const DATA_API_KEY$6 = '.data-api';\n  const CLASS_NAME_ACTIVE$3 = 'active';\n  const SELECTOR_DATA_TOGGLE$5 = '[data-bs-toggle=\"button\"]';\n  const EVENT_CLICK_DATA_API$6 = `click${EVENT_KEY$a}${DATA_API_KEY$6}`;\n\n  /**\n   * Class definition\n   */\n\n  class Button extends BaseComponent {\n    // Getters\n    static get NAME() {\n      return NAME$e;\n    }\n\n    // Public\n    toggle() {\n      // Toggle class and sync the `aria-pressed` attribute with the return value of the `.toggle()` method\n      this._element.setAttribute('aria-pressed', this._element.classList.toggle(CLASS_NAME_ACTIVE$3));\n    }\n\n    // Static\n    static jQueryInterface(config) {\n      return this.each(function () {\n        const data = Button.getOrCreateInstance(this);\n        if (config === 'toggle') {\n          data[config]();\n        }\n      });\n    }\n  }\n\n  /**\n   * Data API implementation\n   */\n\n  EventHandler.on(document, EVENT_CLICK_DATA_API$6, SELECTOR_DATA_TOGGLE$5, event => {\n    event.preventDefault();\n    const button = event.target.closest(SELECTOR_DATA_TOGGLE$5);\n    const data = Button.getOrCreateInstance(button);\n    data.toggle();\n  });\n\n  /**\n   * jQuery\n   */\n\n  defineJQueryPlugin(Button);\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap util/swipe.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME$d = 'swipe';\n  const EVENT_KEY$9 = '.bs.swipe';\n  const EVENT_TOUCHSTART = `touchstart${EVENT_KEY$9}`;\n  const EVENT_TOUCHMOVE = `touchmove${EVENT_KEY$9}`;\n  const EVENT_TOUCHEND = `touchend${EVENT_KEY$9}`;\n  const EVENT_POINTERDOWN = `pointerdown${EVENT_KEY$9}`;\n  const EVENT_POINTERUP = `pointerup${EVENT_KEY$9}`;\n  const POINTER_TYPE_TOUCH = 'touch';\n  const POINTER_TYPE_PEN = 'pen';\n  const CLASS_NAME_POINTER_EVENT = 'pointer-event';\n  const SWIPE_THRESHOLD = 40;\n  const Default$c = {\n    endCallback: null,\n    leftCallback: null,\n    rightCallback: null\n  };\n  const DefaultType$c = {\n    endCallback: '(function|null)',\n    leftCallback: '(function|null)',\n    rightCallback: '(function|null)'\n  };\n\n  /**\n   * Class definition\n   */\n\n  class Swipe extends Config {\n    constructor(element, config) {\n      super();\n      this._element = element;\n      if (!element || !Swipe.isSupported()) {\n        return;\n      }\n      this._config = this._getConfig(config);\n      this._deltaX = 0;\n      this._supportPointerEvents = Boolean(window.PointerEvent);\n      this._initEvents();\n    }\n\n    // Getters\n    static get Default() {\n      return Default$c;\n    }\n    static get DefaultType() {\n      return DefaultType$c;\n    }\n    static get NAME() {\n      return NAME$d;\n    }\n\n    // Public\n    dispose() {\n      EventHandler.off(this._element, EVENT_KEY$9);\n    }\n\n    // Private\n    _start(event) {\n      if (!this._supportPointerEvents) {\n        this._deltaX = event.touches[0].clientX;\n        return;\n      }\n      if (this._eventIsPointerPenTouch(event)) {\n        this._deltaX = event.clientX;\n      }\n    }\n    _end(event) {\n      if (this._eventIsPointerPenTouch(event)) {\n        this._deltaX = event.clientX - this._deltaX;\n      }\n      this._handleSwipe();\n      execute(this._config.endCallback);\n    }\n    _move(event) {\n      this._deltaX = event.touches && event.touches.length > 1 ? 0 : event.touches[0].clientX - this._deltaX;\n    }\n    _handleSwipe() {\n      const absDeltaX = Math.abs(this._deltaX);\n      if (absDeltaX <= SWIPE_THRESHOLD) {\n        return;\n      }\n      const direction = absDeltaX / this._deltaX;\n      this._deltaX = 0;\n      if (!direction) {\n        return;\n      }\n      execute(direction > 0 ? this._config.rightCallback : this._config.leftCallback);\n    }\n    _initEvents() {\n      if (this._supportPointerEvents) {\n        EventHandler.on(this._element, EVENT_POINTERDOWN, event => this._start(event));\n        EventHandler.on(this._element, EVENT_POINTERUP, event => this._end(event));\n        this._element.classList.add(CLASS_NAME_POINTER_EVENT);\n      } else {\n        EventHandler.on(this._element, EVENT_TOUCHSTART, event => this._start(event));\n        EventHandler.on(this._element, EVENT_TOUCHMOVE, event => this._move(event));\n        EventHandler.on(this._element, EVENT_TOUCHEND, event => this._end(event));\n      }\n    }\n    _eventIsPointerPenTouch(event) {\n      return this._supportPointerEvents && (event.pointerType === POINTER_TYPE_PEN || event.pointerType === POINTER_TYPE_TOUCH);\n    }\n\n    // Static\n    static isSupported() {\n      return 'ontouchstart' in document.documentElement || navigator.maxTouchPoints > 0;\n    }\n  }\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap carousel.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME$c = 'carousel';\n  const DATA_KEY$8 = 'bs.carousel';\n  const EVENT_KEY$8 = `.${DATA_KEY$8}`;\n  const DATA_API_KEY$5 = '.data-api';\n  const ARROW_LEFT_KEY$1 = 'ArrowLeft';\n  const ARROW_RIGHT_KEY$1 = 'ArrowRight';\n  const TOUCHEVENT_COMPAT_WAIT = 500; // Time for mouse compat events to fire after touch\n\n  const ORDER_NEXT = 'next';\n  const ORDER_PREV = 'prev';\n  const DIRECTION_LEFT = 'left';\n  const DIRECTION_RIGHT = 'right';\n  const EVENT_SLIDE = `slide${EVENT_KEY$8}`;\n  const EVENT_SLID = `slid${EVENT_KEY$8}`;\n  const EVENT_KEYDOWN$1 = `keydown${EVENT_KEY$8}`;\n  const EVENT_MOUSEENTER$1 = `mouseenter${EVENT_KEY$8}`;\n  const EVENT_MOUSELEAVE$1 = `mouseleave${EVENT_KEY$8}`;\n  const EVENT_DRAG_START = `dragstart${EVENT_KEY$8}`;\n  const EVENT_LOAD_DATA_API$3 = `load${EVENT_KEY$8}${DATA_API_KEY$5}`;\n  const EVENT_CLICK_DATA_API$5 = `click${EVENT_KEY$8}${DATA_API_KEY$5}`;\n  const CLASS_NAME_CAROUSEL = 'carousel';\n  const CLASS_NAME_ACTIVE$2 = 'active';\n  const CLASS_NAME_SLIDE = 'slide';\n  const CLASS_NAME_END = 'carousel-item-end';\n  const CLASS_NAME_START = 'carousel-item-start';\n  const CLASS_NAME_NEXT = 'carousel-item-next';\n  const CLASS_NAME_PREV = 'carousel-item-prev';\n  const SELECTOR_ACTIVE = '.active';\n  const SELECTOR_ITEM = '.carousel-item';\n  const SELECTOR_ACTIVE_ITEM = SELECTOR_ACTIVE + SELECTOR_ITEM;\n  const SELECTOR_ITEM_IMG = '.carousel-item img';\n  const SELECTOR_INDICATORS = '.carousel-indicators';\n  const SELECTOR_DATA_SLIDE = '[data-bs-slide], [data-bs-slide-to]';\n  const SELECTOR_DATA_RIDE = '[data-bs-ride=\"carousel\"]';\n  const KEY_TO_DIRECTION = {\n    [ARROW_LEFT_KEY$1]: DIRECTION_RIGHT,\n    [ARROW_RIGHT_KEY$1]: DIRECTION_LEFT\n  };\n  const Default$b = {\n    interval: 5000,\n    keyboard: true,\n    pause: 'hover',\n    ride: false,\n    touch: true,\n    wrap: true\n  };\n  const DefaultType$b = {\n    interval: '(number|boolean)',\n    // TODO:v6 remove boolean support\n    keyboard: 'boolean',\n    pause: '(string|boolean)',\n    ride: '(boolean|string)',\n    touch: 'boolean',\n    wrap: 'boolean'\n  };\n\n  /**\n   * Class definition\n   */\n\n  class Carousel extends BaseComponent {\n    constructor(element, config) {\n      super(element, config);\n      this._interval = null;\n      this._activeElement = null;\n      this._isSliding = false;\n      this.touchTimeout = null;\n      this._swipeHelper = null;\n      this._indicatorsElement = SelectorEngine.findOne(SELECTOR_INDICATORS, this._element);\n      this._addEventListeners();\n      if (this._config.ride === CLASS_NAME_CAROUSEL) {\n        this.cycle();\n      }\n    }\n\n    // Getters\n    static get Default() {\n      return Default$b;\n    }\n    static get DefaultType() {\n      return DefaultType$b;\n    }\n    static get NAME() {\n      return NAME$c;\n    }\n\n    // Public\n    next() {\n      this._slide(ORDER_NEXT);\n    }\n    nextWhenVisible() {\n      // FIXME TODO use `document.visibilityState`\n      // Don't call next when the page isn't visible\n      // or the carousel or its parent isn't visible\n      if (!document.hidden && isVisible(this._element)) {\n        this.next();\n      }\n    }\n    prev() {\n      this._slide(ORDER_PREV);\n    }\n    pause() {\n      if (this._isSliding) {\n        triggerTransitionEnd(this._element);\n      }\n      this._clearInterval();\n    }\n    cycle() {\n      this._clearInterval();\n      this._updateInterval();\n      this._interval = setInterval(() => this.nextWhenVisible(), this._config.interval);\n    }\n    _maybeEnableCycle() {\n      if (!this._config.ride) {\n        return;\n      }\n      if (this._isSliding) {\n        EventHandler.one(this._element, EVENT_SLID, () => this.cycle());\n        return;\n      }\n      this.cycle();\n    }\n    to(index) {\n      const items = this._getItems();\n      if (index > items.length - 1 || index < 0) {\n        return;\n      }\n      if (this._isSliding) {\n        EventHandler.one(this._element, EVENT_SLID, () => this.to(index));\n        return;\n      }\n      const activeIndex = this._getItemIndex(this._getActive());\n      if (activeIndex === index) {\n        return;\n      }\n      const order = index > activeIndex ? ORDER_NEXT : ORDER_PREV;\n      this._slide(order, items[index]);\n    }\n    dispose() {\n      if (this._swipeHelper) {\n        this._swipeHelper.dispose();\n      }\n      super.dispose();\n    }\n\n    // Private\n    _configAfterMerge(config) {\n      config.defaultInterval = config.interval;\n      return config;\n    }\n    _addEventListeners() {\n      if (this._config.keyboard) {\n        EventHandler.on(this._element, EVENT_KEYDOWN$1, event => this._keydown(event));\n      }\n      if (this._config.pause === 'hover') {\n        EventHandler.on(this._element, EVENT_MOUSEENTER$1, () => this.pause());\n        EventHandler.on(this._element, EVENT_MOUSELEAVE$1, () => this._maybeEnableCycle());\n      }\n      if (this._config.touch && Swipe.isSupported()) {\n        this._addTouchEventListeners();\n      }\n    }\n    _addTouchEventListeners() {\n      for (const img of SelectorEngine.find(SELECTOR_ITEM_IMG, this._element)) {\n        EventHandler.on(img, EVENT_DRAG_START, event => event.preventDefault());\n      }\n      const endCallBack = () => {\n        if (this._config.pause !== 'hover') {\n          return;\n        }\n\n        // If it's a touch-enabled device, mouseenter/leave are fired as\n        // part of the mouse compatibility events on first tap - the carousel\n        // would stop cycling until user tapped out of it;\n        // here, we listen for touchend, explicitly pause the carousel\n        // (as if it's the second time we tap on it, mouseenter compat event\n        // is NOT fired) and after a timeout (to allow for mouse compatibility\n        // events to fire) we explicitly restart cycling\n\n        this.pause();\n        if (this.touchTimeout) {\n          clearTimeout(this.touchTimeout);\n        }\n        this.touchTimeout = setTimeout(() => this._maybeEnableCycle(), TOUCHEVENT_COMPAT_WAIT + this._config.interval);\n      };\n      const swipeConfig = {\n        leftCallback: () => this._slide(this._directionToOrder(DIRECTION_LEFT)),\n        rightCallback: () => this._slide(this._directionToOrder(DIRECTION_RIGHT)),\n        endCallback: endCallBack\n      };\n      this._swipeHelper = new Swipe(this._element, swipeConfig);\n    }\n    _keydown(event) {\n      if (/input|textarea/i.test(event.target.tagName)) {\n        return;\n      }\n      const direction = KEY_TO_DIRECTION[event.key];\n      if (direction) {\n        event.preventDefault();\n        this._slide(this._directionToOrder(direction));\n      }\n    }\n    _getItemIndex(element) {\n      return this._getItems().indexOf(element);\n    }\n    _setActiveIndicatorElement(index) {\n      if (!this._indicatorsElement) {\n        return;\n      }\n      const activeIndicator = SelectorEngine.findOne(SELECTOR_ACTIVE, this._indicatorsElement);\n      activeIndicator.classList.remove(CLASS_NAME_ACTIVE$2);\n      activeIndicator.removeAttribute('aria-current');\n      const newActiveIndicator = SelectorEngine.findOne(`[data-bs-slide-to=\"${index}\"]`, this._indicatorsElement);\n      if (newActiveIndicator) {\n        newActiveIndicator.classList.add(CLASS_NAME_ACTIVE$2);\n        newActiveIndicator.setAttribute('aria-current', 'true');\n      }\n    }\n    _updateInterval() {\n      const element = this._activeElement || this._getActive();\n      if (!element) {\n        return;\n      }\n      const elementInterval = Number.parseInt(element.getAttribute('data-bs-interval'), 10);\n      this._config.interval = elementInterval || this._config.defaultInterval;\n    }\n    _slide(order, element = null) {\n      if (this._isSliding) {\n        return;\n      }\n      const activeElement = this._getActive();\n      const isNext = order === ORDER_NEXT;\n      const nextElement = element || getNextActiveElement(this._getItems(), activeElement, isNext, this._config.wrap);\n      if (nextElement === activeElement) {\n        return;\n      }\n      const nextElementIndex = this._getItemIndex(nextElement);\n      const triggerEvent = eventName => {\n        return EventHandler.trigger(this._element, eventName, {\n          relatedTarget: nextElement,\n          direction: this._orderToDirection(order),\n          from: this._getItemIndex(activeElement),\n          to: nextElementIndex\n        });\n      };\n      const slideEvent = triggerEvent(EVENT_SLIDE);\n      if (slideEvent.defaultPrevented) {\n        return;\n      }\n      if (!activeElement || !nextElement) {\n        // Some weirdness is happening, so we bail\n        // TODO: change tests that use empty divs to avoid this check\n        return;\n      }\n      const isCycling = Boolean(this._interval);\n      this.pause();\n      this._isSliding = true;\n      this._setActiveIndicatorElement(nextElementIndex);\n      this._activeElement = nextElement;\n      const directionalClassName = isNext ? CLASS_NAME_START : CLASS_NAME_END;\n      const orderClassName = isNext ? CLASS_NAME_NEXT : CLASS_NAME_PREV;\n      nextElement.classList.add(orderClassName);\n      reflow(nextElement);\n      activeElement.classList.add(directionalClassName);\n      nextElement.classList.add(directionalClassName);\n      const completeCallBack = () => {\n        nextElement.classList.remove(directionalClassName, orderClassName);\n        nextElement.classList.add(CLASS_NAME_ACTIVE$2);\n        activeElement.classList.remove(CLASS_NAME_ACTIVE$2, orderClassName, directionalClassName);\n        this._isSliding = false;\n        triggerEvent(EVENT_SLID);\n      };\n      this._queueCallback(completeCallBack, activeElement, this._isAnimated());\n      if (isCycling) {\n        this.cycle();\n      }\n    }\n    _isAnimated() {\n      return this._element.classList.contains(CLASS_NAME_SLIDE);\n    }\n    _getActive() {\n      return SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM, this._element);\n    }\n    _getItems() {\n      return SelectorEngine.find(SELECTOR_ITEM, this._element);\n    }\n    _clearInterval() {\n      if (this._interval) {\n        clearInterval(this._interval);\n        this._interval = null;\n      }\n    }\n    _directionToOrder(direction) {\n      if (isRTL()) {\n        return direction === DIRECTION_LEFT ? ORDER_PREV : ORDER_NEXT;\n      }\n      return direction === DIRECTION_LEFT ? ORDER_NEXT : ORDER_PREV;\n    }\n    _orderToDirection(order) {\n      if (isRTL()) {\n        return order === ORDER_PREV ? DIRECTION_LEFT : DIRECTION_RIGHT;\n      }\n      return order === ORDER_PREV ? DIRECTION_RIGHT : DIRECTION_LEFT;\n    }\n\n    // Static\n    static jQueryInterface(config) {\n      return this.each(function () {\n        const data = Carousel.getOrCreateInstance(this, config);\n        if (typeof config === 'number') {\n          data.to(config);\n          return;\n        }\n        if (typeof config === 'string') {\n          if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n            throw new TypeError(`No method named \"${config}\"`);\n          }\n          data[config]();\n        }\n      });\n    }\n  }\n\n  /**\n   * Data API implementation\n   */\n\n  EventHandler.on(document, EVENT_CLICK_DATA_API$5, SELECTOR_DATA_SLIDE, function (event) {\n    const target = SelectorEngine.getElementFromSelector(this);\n    if (!target || !target.classList.contains(CLASS_NAME_CAROUSEL)) {\n      return;\n    }\n    event.preventDefault();\n    const carousel = Carousel.getOrCreateInstance(target);\n    const slideIndex = this.getAttribute('data-bs-slide-to');\n    if (slideIndex) {\n      carousel.to(slideIndex);\n      carousel._maybeEnableCycle();\n      return;\n    }\n    if (Manipulator.getDataAttribute(this, 'slide') === 'next') {\n      carousel.next();\n      carousel._maybeEnableCycle();\n      return;\n    }\n    carousel.prev();\n    carousel._maybeEnableCycle();\n  });\n  EventHandler.on(window, EVENT_LOAD_DATA_API$3, () => {\n    const carousels = SelectorEngine.find(SELECTOR_DATA_RIDE);\n    for (const carousel of carousels) {\n      Carousel.getOrCreateInstance(carousel);\n    }\n  });\n\n  /**\n   * jQuery\n   */\n\n  defineJQueryPlugin(Carousel);\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap collapse.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME$b = 'collapse';\n  const DATA_KEY$7 = 'bs.collapse';\n  const EVENT_KEY$7 = `.${DATA_KEY$7}`;\n  const DATA_API_KEY$4 = '.data-api';\n  const EVENT_SHOW$6 = `show${EVENT_KEY$7}`;\n  const EVENT_SHOWN$6 = `shown${EVENT_KEY$7}`;\n  const EVENT_HIDE$6 = `hide${EVENT_KEY$7}`;\n  const EVENT_HIDDEN$6 = `hidden${EVENT_KEY$7}`;\n  const EVENT_CLICK_DATA_API$4 = `click${EVENT_KEY$7}${DATA_API_KEY$4}`;\n  const CLASS_NAME_SHOW$7 = 'show';\n  const CLASS_NAME_COLLAPSE = 'collapse';\n  const CLASS_NAME_COLLAPSING = 'collapsing';\n  const CLASS_NAME_COLLAPSED = 'collapsed';\n  const CLASS_NAME_DEEPER_CHILDREN = `:scope .${CLASS_NAME_COLLAPSE} .${CLASS_NAME_COLLAPSE}`;\n  const CLASS_NAME_HORIZONTAL = 'collapse-horizontal';\n  const WIDTH = 'width';\n  const HEIGHT = 'height';\n  const SELECTOR_ACTIVES = '.collapse.show, .collapse.collapsing';\n  const SELECTOR_DATA_TOGGLE$4 = '[data-bs-toggle=\"collapse\"]';\n  const Default$a = {\n    parent: null,\n    toggle: true\n  };\n  const DefaultType$a = {\n    parent: '(null|element)',\n    toggle: 'boolean'\n  };\n\n  /**\n   * Class definition\n   */\n\n  class Collapse extends BaseComponent {\n    constructor(element, config) {\n      super(element, config);\n      this._isTransitioning = false;\n      this._triggerArray = [];\n      const toggleList = SelectorEngine.find(SELECTOR_DATA_TOGGLE$4);\n      for (const elem of toggleList) {\n        const selector = SelectorEngine.getSelectorFromElement(elem);\n        const filterElement = SelectorEngine.find(selector).filter(foundElement => foundElement === this._element);\n        if (selector !== null && filterElement.length) {\n          this._triggerArray.push(elem);\n        }\n      }\n      this._initializeChildren();\n      if (!this._config.parent) {\n        this._addAriaAndCollapsedClass(this._triggerArray, this._isShown());\n      }\n      if (this._config.toggle) {\n        this.toggle();\n      }\n    }\n\n    // Getters\n    static get Default() {\n      return Default$a;\n    }\n    static get DefaultType() {\n      return DefaultType$a;\n    }\n    static get NAME() {\n      return NAME$b;\n    }\n\n    // Public\n    toggle() {\n      if (this._isShown()) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    }\n    show() {\n      if (this._isTransitioning || this._isShown()) {\n        return;\n      }\n      let activeChildren = [];\n\n      // find active children\n      if (this._config.parent) {\n        activeChildren = this._getFirstLevelChildren(SELECTOR_ACTIVES).filter(element => element !== this._element).map(element => Collapse.getOrCreateInstance(element, {\n          toggle: false\n        }));\n      }\n      if (activeChildren.length && activeChildren[0]._isTransitioning) {\n        return;\n      }\n      const startEvent = EventHandler.trigger(this._element, EVENT_SHOW$6);\n      if (startEvent.defaultPrevented) {\n        return;\n      }\n      for (const activeInstance of activeChildren) {\n        activeInstance.hide();\n      }\n      const dimension = this._getDimension();\n      this._element.classList.remove(CLASS_NAME_COLLAPSE);\n      this._element.classList.add(CLASS_NAME_COLLAPSING);\n      this._element.style[dimension] = 0;\n      this._addAriaAndCollapsedClass(this._triggerArray, true);\n      this._isTransitioning = true;\n      const complete = () => {\n        this._isTransitioning = false;\n        this._element.classList.remove(CLASS_NAME_COLLAPSING);\n        this._element.classList.add(CLASS_NAME_COLLAPSE, CLASS_NAME_SHOW$7);\n        this._element.style[dimension] = '';\n        EventHandler.trigger(this._element, EVENT_SHOWN$6);\n      };\n      const capitalizedDimension = dimension[0].toUpperCase() + dimension.slice(1);\n      const scrollSize = `scroll${capitalizedDimension}`;\n      this._queueCallback(complete, this._element, true);\n      this._element.style[dimension] = `${this._element[scrollSize]}px`;\n    }\n    hide() {\n      if (this._isTransitioning || !this._isShown()) {\n        return;\n      }\n      const startEvent = EventHandler.trigger(this._element, EVENT_HIDE$6);\n      if (startEvent.defaultPrevented) {\n        return;\n      }\n      const dimension = this._getDimension();\n      this._element.style[dimension] = `${this._element.getBoundingClientRect()[dimension]}px`;\n      reflow(this._element);\n      this._element.classList.add(CLASS_NAME_COLLAPSING);\n      this._element.classList.remove(CLASS_NAME_COLLAPSE, CLASS_NAME_SHOW$7);\n      for (const trigger of this._triggerArray) {\n        const element = SelectorEngine.getElementFromSelector(trigger);\n        if (element && !this._isShown(element)) {\n          this._addAriaAndCollapsedClass([trigger], false);\n        }\n      }\n      this._isTransitioning = true;\n      const complete = () => {\n        this._isTransitioning = false;\n        this._element.classList.remove(CLASS_NAME_COLLAPSING);\n        this._element.classList.add(CLASS_NAME_COLLAPSE);\n        EventHandler.trigger(this._element, EVENT_HIDDEN$6);\n      };\n      this._element.style[dimension] = '';\n      this._queueCallback(complete, this._element, true);\n    }\n    _isShown(element = this._element) {\n      return element.classList.contains(CLASS_NAME_SHOW$7);\n    }\n\n    // Private\n    _configAfterMerge(config) {\n      config.toggle = Boolean(config.toggle); // Coerce string values\n      config.parent = getElement(config.parent);\n      return config;\n    }\n    _getDimension() {\n      return this._element.classList.contains(CLASS_NAME_HORIZONTAL) ? WIDTH : HEIGHT;\n    }\n    _initializeChildren() {\n      if (!this._config.parent) {\n        return;\n      }\n      const children = this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE$4);\n      for (const element of children) {\n        const selected = SelectorEngine.getElementFromSelector(element);\n        if (selected) {\n          this._addAriaAndCollapsedClass([element], this._isShown(selected));\n        }\n      }\n    }\n    _getFirstLevelChildren(selector) {\n      const children = SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN, this._config.parent);\n      // remove children if greater depth\n      return SelectorEngine.find(selector, this._config.parent).filter(element => !children.includes(element));\n    }\n    _addAriaAndCollapsedClass(triggerArray, isOpen) {\n      if (!triggerArray.length) {\n        return;\n      }\n      for (const element of triggerArray) {\n        element.classList.toggle(CLASS_NAME_COLLAPSED, !isOpen);\n        element.setAttribute('aria-expanded', isOpen);\n      }\n    }\n\n    // Static\n    static jQueryInterface(config) {\n      const _config = {};\n      if (typeof config === 'string' && /show|hide/.test(config)) {\n        _config.toggle = false;\n      }\n      return this.each(function () {\n        const data = Collapse.getOrCreateInstance(this, _config);\n        if (typeof config === 'string') {\n          if (typeof data[config] === 'undefined') {\n            throw new TypeError(`No method named \"${config}\"`);\n          }\n          data[config]();\n        }\n      });\n    }\n  }\n\n  /**\n   * Data API implementation\n   */\n\n  EventHandler.on(document, EVENT_CLICK_DATA_API$4, SELECTOR_DATA_TOGGLE$4, function (event) {\n    // preventDefault only for <a> elements (which change the URL) not inside the collapsible element\n    if (event.target.tagName === 'A' || event.delegateTarget && event.delegateTarget.tagName === 'A') {\n      event.preventDefault();\n    }\n    for (const element of SelectorEngine.getMultipleElementsFromSelector(this)) {\n      Collapse.getOrCreateInstance(element, {\n        toggle: false\n      }).toggle();\n    }\n  });\n\n  /**\n   * jQuery\n   */\n\n  defineJQueryPlugin(Collapse);\n\n  var top = 'top';\n  var bottom = 'bottom';\n  var right = 'right';\n  var left = 'left';\n  var auto = 'auto';\n  var basePlacements = [top, bottom, right, left];\n  var start = 'start';\n  var end = 'end';\n  var clippingParents = 'clippingParents';\n  var viewport = 'viewport';\n  var popper = 'popper';\n  var reference = 'reference';\n  var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n    return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n  }, []);\n  var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n    return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n  }, []); // modifiers that need to read the DOM\n\n  var beforeRead = 'beforeRead';\n  var read = 'read';\n  var afterRead = 'afterRead'; // pure-logic modifiers\n\n  var beforeMain = 'beforeMain';\n  var main = 'main';\n  var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\n  var beforeWrite = 'beforeWrite';\n  var write = 'write';\n  var afterWrite = 'afterWrite';\n  var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];\n\n  function getNodeName(element) {\n    return element ? (element.nodeName || '').toLowerCase() : null;\n  }\n\n  function getWindow(node) {\n    if (node == null) {\n      return window;\n    }\n\n    if (node.toString() !== '[object Window]') {\n      var ownerDocument = node.ownerDocument;\n      return ownerDocument ? ownerDocument.defaultView || window : window;\n    }\n\n    return node;\n  }\n\n  function isElement(node) {\n    var OwnElement = getWindow(node).Element;\n    return node instanceof OwnElement || node instanceof Element;\n  }\n\n  function isHTMLElement(node) {\n    var OwnElement = getWindow(node).HTMLElement;\n    return node instanceof OwnElement || node instanceof HTMLElement;\n  }\n\n  function isShadowRoot(node) {\n    // IE 11 has no ShadowRoot\n    if (typeof ShadowRoot === 'undefined') {\n      return false;\n    }\n\n    var OwnElement = getWindow(node).ShadowRoot;\n    return node instanceof OwnElement || node instanceof ShadowRoot;\n  }\n\n  // and applies them to the HTMLElements such as popper and arrow\n\n  function applyStyles(_ref) {\n    var state = _ref.state;\n    Object.keys(state.elements).forEach(function (name) {\n      var style = state.styles[name] || {};\n      var attributes = state.attributes[name] || {};\n      var element = state.elements[name]; // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      } // Flow doesn't support to extend this property, but it's the most\n      // effective way to apply styles to an HTMLElement\n      // $FlowFixMe[cannot-write]\n\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (name) {\n        var value = attributes[name];\n\n        if (value === false) {\n          element.removeAttribute(name);\n        } else {\n          element.setAttribute(name, value === true ? '' : value);\n        }\n      });\n    });\n  }\n\n  function effect$2(_ref2) {\n    var state = _ref2.state;\n    var initialStyles = {\n      popper: {\n        position: state.options.strategy,\n        left: '0',\n        top: '0',\n        margin: '0'\n      },\n      arrow: {\n        position: 'absolute'\n      },\n      reference: {}\n    };\n    Object.assign(state.elements.popper.style, initialStyles.popper);\n    state.styles = initialStyles;\n\n    if (state.elements.arrow) {\n      Object.assign(state.elements.arrow.style, initialStyles.arrow);\n    }\n\n    return function () {\n      Object.keys(state.elements).forEach(function (name) {\n        var element = state.elements[name];\n        var attributes = state.attributes[name] || {};\n        var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n        var style = styleProperties.reduce(function (style, property) {\n          style[property] = '';\n          return style;\n        }, {}); // arrow is optional + virtual elements\n\n        if (!isHTMLElement(element) || !getNodeName(element)) {\n          return;\n        }\n\n        Object.assign(element.style, style);\n        Object.keys(attributes).forEach(function (attribute) {\n          element.removeAttribute(attribute);\n        });\n      });\n    };\n  } // eslint-disable-next-line import/no-unused-modules\n\n\n  const applyStyles$1 = {\n    name: 'applyStyles',\n    enabled: true,\n    phase: 'write',\n    fn: applyStyles,\n    effect: effect$2,\n    requires: ['computeStyles']\n  };\n\n  function getBasePlacement(placement) {\n    return placement.split('-')[0];\n  }\n\n  var max = Math.max;\n  var min = Math.min;\n  var round = Math.round;\n\n  function getUAString() {\n    var uaData = navigator.userAgentData;\n\n    if (uaData != null && uaData.brands && Array.isArray(uaData.brands)) {\n      return uaData.brands.map(function (item) {\n        return item.brand + \"/\" + item.version;\n      }).join(' ');\n    }\n\n    return navigator.userAgent;\n  }\n\n  function isLayoutViewport() {\n    return !/^((?!chrome|android).)*safari/i.test(getUAString());\n  }\n\n  function getBoundingClientRect(element, includeScale, isFixedStrategy) {\n    if (includeScale === void 0) {\n      includeScale = false;\n    }\n\n    if (isFixedStrategy === void 0) {\n      isFixedStrategy = false;\n    }\n\n    var clientRect = element.getBoundingClientRect();\n    var scaleX = 1;\n    var scaleY = 1;\n\n    if (includeScale && isHTMLElement(element)) {\n      scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;\n      scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;\n    }\n\n    var _ref = isElement(element) ? getWindow(element) : window,\n        visualViewport = _ref.visualViewport;\n\n    var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;\n    var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;\n    var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;\n    var width = clientRect.width / scaleX;\n    var height = clientRect.height / scaleY;\n    return {\n      width: width,\n      height: height,\n      top: y,\n      right: x + width,\n      bottom: y + height,\n      left: x,\n      x: x,\n      y: y\n    };\n  }\n\n  // means it doesn't take into account transforms.\n\n  function getLayoutRect(element) {\n    var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.\n    // Fixes https://github.com/popperjs/popper-core/issues/1223\n\n    var width = element.offsetWidth;\n    var height = element.offsetHeight;\n\n    if (Math.abs(clientRect.width - width) <= 1) {\n      width = clientRect.width;\n    }\n\n    if (Math.abs(clientRect.height - height) <= 1) {\n      height = clientRect.height;\n    }\n\n    return {\n      x: element.offsetLeft,\n      y: element.offsetTop,\n      width: width,\n      height: height\n    };\n  }\n\n  function contains(parent, child) {\n    var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method\n\n    if (parent.contains(child)) {\n      return true;\n    } // then fallback to custom implementation with Shadow DOM support\n    else if (rootNode && isShadowRoot(rootNode)) {\n        var next = child;\n\n        do {\n          if (next && parent.isSameNode(next)) {\n            return true;\n          } // $FlowFixMe[prop-missing]: need a better way to handle this...\n\n\n          next = next.parentNode || next.host;\n        } while (next);\n      } // Give up, the result is false\n\n\n    return false;\n  }\n\n  function getComputedStyle$1(element) {\n    return getWindow(element).getComputedStyle(element);\n  }\n\n  function isTableElement(element) {\n    return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n  }\n\n  function getDocumentElement(element) {\n    // $FlowFixMe[incompatible-return]: assume body is always available\n    return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]\n    element.document) || window.document).documentElement;\n  }\n\n  function getParentNode(element) {\n    if (getNodeName(element) === 'html') {\n      return element;\n    }\n\n    return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n      // $FlowFixMe[incompatible-return]\n      // $FlowFixMe[prop-missing]\n      element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n      element.parentNode || ( // DOM Element detected\n      isShadowRoot(element) ? element.host : null) || // ShadowRoot detected\n      // $FlowFixMe[incompatible-call]: HTMLElement is a Node\n      getDocumentElement(element) // fallback\n\n    );\n  }\n\n  function getTrueOffsetParent(element) {\n    if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n    getComputedStyle$1(element).position === 'fixed') {\n      return null;\n    }\n\n    return element.offsetParent;\n  } // `.offsetParent` reports `null` for fixed elements, while absolute elements\n  // return the containing block\n\n\n  function getContainingBlock(element) {\n    var isFirefox = /firefox/i.test(getUAString());\n    var isIE = /Trident/i.test(getUAString());\n\n    if (isIE && isHTMLElement(element)) {\n      // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport\n      var elementCss = getComputedStyle$1(element);\n\n      if (elementCss.position === 'fixed') {\n        return null;\n      }\n    }\n\n    var currentNode = getParentNode(element);\n\n    if (isShadowRoot(currentNode)) {\n      currentNode = currentNode.host;\n    }\n\n    while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n      var css = getComputedStyle$1(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n      // create a containing block.\n      // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n      if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {\n        return currentNode;\n      } else {\n        currentNode = currentNode.parentNode;\n      }\n    }\n\n    return null;\n  } // Gets the closest ancestor positioned element. Handles some edge cases,\n  // such as table ancestors and cross browser bugs.\n\n\n  function getOffsetParent(element) {\n    var window = getWindow(element);\n    var offsetParent = getTrueOffsetParent(element);\n\n    while (offsetParent && isTableElement(offsetParent) && getComputedStyle$1(offsetParent).position === 'static') {\n      offsetParent = getTrueOffsetParent(offsetParent);\n    }\n\n    if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle$1(offsetParent).position === 'static')) {\n      return window;\n    }\n\n    return offsetParent || getContainingBlock(element) || window;\n  }\n\n  function getMainAxisFromPlacement(placement) {\n    return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n  }\n\n  function within(min$1, value, max$1) {\n    return max(min$1, min(value, max$1));\n  }\n  function withinMaxClamp(min, value, max) {\n    var v = within(min, value, max);\n    return v > max ? max : v;\n  }\n\n  function getFreshSideObject() {\n    return {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    };\n  }\n\n  function mergePaddingObject(paddingObject) {\n    return Object.assign({}, getFreshSideObject(), paddingObject);\n  }\n\n  function expandToHashMap(value, keys) {\n    return keys.reduce(function (hashMap, key) {\n      hashMap[key] = value;\n      return hashMap;\n    }, {});\n  }\n\n  var toPaddingObject = function toPaddingObject(padding, state) {\n    padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {\n      placement: state.placement\n    })) : padding;\n    return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  };\n\n  function arrow(_ref) {\n    var _state$modifiersData$;\n\n    var state = _ref.state,\n        name = _ref.name,\n        options = _ref.options;\n    var arrowElement = state.elements.arrow;\n    var popperOffsets = state.modifiersData.popperOffsets;\n    var basePlacement = getBasePlacement(state.placement);\n    var axis = getMainAxisFromPlacement(basePlacement);\n    var isVertical = [left, right].indexOf(basePlacement) >= 0;\n    var len = isVertical ? 'height' : 'width';\n\n    if (!arrowElement || !popperOffsets) {\n      return;\n    }\n\n    var paddingObject = toPaddingObject(options.padding, state);\n    var arrowRect = getLayoutRect(arrowElement);\n    var minProp = axis === 'y' ? top : left;\n    var maxProp = axis === 'y' ? bottom : right;\n    var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n    var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n    var arrowOffsetParent = getOffsetParent(arrowElement);\n    var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n    var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n    // outside of the popper bounds\n\n    var min = paddingObject[minProp];\n    var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n    var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n    var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n    var axisProp = axis;\n    state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n  }\n\n  function effect$1(_ref2) {\n    var state = _ref2.state,\n        options = _ref2.options;\n    var _options$element = options.element,\n        arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;\n\n    if (arrowElement == null) {\n      return;\n    } // CSS selector\n\n\n    if (typeof arrowElement === 'string') {\n      arrowElement = state.elements.popper.querySelector(arrowElement);\n\n      if (!arrowElement) {\n        return;\n      }\n    }\n\n    if (!contains(state.elements.popper, arrowElement)) {\n      return;\n    }\n\n    state.elements.arrow = arrowElement;\n  } // eslint-disable-next-line import/no-unused-modules\n\n\n  const arrow$1 = {\n    name: 'arrow',\n    enabled: true,\n    phase: 'main',\n    fn: arrow,\n    effect: effect$1,\n    requires: ['popperOffsets'],\n    requiresIfExists: ['preventOverflow']\n  };\n\n  function getVariation(placement) {\n    return placement.split('-')[1];\n  }\n\n  var unsetSides = {\n    top: 'auto',\n    right: 'auto',\n    bottom: 'auto',\n    left: 'auto'\n  }; // Round the offsets to the nearest suitable subpixel based on the DPR.\n  // Zooming can change the DPR, but it seems to report a value that will\n  // cleanly divide the values into the appropriate subpixels.\n\n  function roundOffsetsByDPR(_ref, win) {\n    var x = _ref.x,\n        y = _ref.y;\n    var dpr = win.devicePixelRatio || 1;\n    return {\n      x: round(x * dpr) / dpr || 0,\n      y: round(y * dpr) / dpr || 0\n    };\n  }\n\n  function mapToStyles(_ref2) {\n    var _Object$assign2;\n\n    var popper = _ref2.popper,\n        popperRect = _ref2.popperRect,\n        placement = _ref2.placement,\n        variation = _ref2.variation,\n        offsets = _ref2.offsets,\n        position = _ref2.position,\n        gpuAcceleration = _ref2.gpuAcceleration,\n        adaptive = _ref2.adaptive,\n        roundOffsets = _ref2.roundOffsets,\n        isFixed = _ref2.isFixed;\n    var _offsets$x = offsets.x,\n        x = _offsets$x === void 0 ? 0 : _offsets$x,\n        _offsets$y = offsets.y,\n        y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n    var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n      x: x,\n      y: y\n    }) : {\n      x: x,\n      y: y\n    };\n\n    x = _ref3.x;\n    y = _ref3.y;\n    var hasX = offsets.hasOwnProperty('x');\n    var hasY = offsets.hasOwnProperty('y');\n    var sideX = left;\n    var sideY = top;\n    var win = window;\n\n    if (adaptive) {\n      var offsetParent = getOffsetParent(popper);\n      var heightProp = 'clientHeight';\n      var widthProp = 'clientWidth';\n\n      if (offsetParent === getWindow(popper)) {\n        offsetParent = getDocumentElement(popper);\n\n        if (getComputedStyle$1(offsetParent).position !== 'static' && position === 'absolute') {\n          heightProp = 'scrollHeight';\n          widthProp = 'scrollWidth';\n        }\n      } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n      offsetParent = offsetParent;\n\n      if (placement === top || (placement === left || placement === right) && variation === end) {\n        sideY = bottom;\n        var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n        offsetParent[heightProp];\n        y -= offsetY - popperRect.height;\n        y *= gpuAcceleration ? 1 : -1;\n      }\n\n      if (placement === left || (placement === top || placement === bottom) && variation === end) {\n        sideX = right;\n        var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n        offsetParent[widthProp];\n        x -= offsetX - popperRect.width;\n        x *= gpuAcceleration ? 1 : -1;\n      }\n    }\n\n    var commonStyles = Object.assign({\n      position: position\n    }, adaptive && unsetSides);\n\n    var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n      x: x,\n      y: y\n    }, getWindow(popper)) : {\n      x: x,\n      y: y\n    };\n\n    x = _ref4.x;\n    y = _ref4.y;\n\n    if (gpuAcceleration) {\n      var _Object$assign;\n\n      return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n    }\n\n    return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n  }\n\n  function computeStyles(_ref5) {\n    var state = _ref5.state,\n        options = _ref5.options;\n    var _options$gpuAccelerat = options.gpuAcceleration,\n        gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n        _options$adaptive = options.adaptive,\n        adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n        _options$roundOffsets = options.roundOffsets,\n        roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n    var commonStyles = {\n      placement: getBasePlacement(state.placement),\n      variation: getVariation(state.placement),\n      popper: state.elements.popper,\n      popperRect: state.rects.popper,\n      gpuAcceleration: gpuAcceleration,\n      isFixed: state.options.strategy === 'fixed'\n    };\n\n    if (state.modifiersData.popperOffsets != null) {\n      state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n        offsets: state.modifiersData.popperOffsets,\n        position: state.options.strategy,\n        adaptive: adaptive,\n        roundOffsets: roundOffsets\n      })));\n    }\n\n    if (state.modifiersData.arrow != null) {\n      state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n        offsets: state.modifiersData.arrow,\n        position: 'absolute',\n        adaptive: false,\n        roundOffsets: roundOffsets\n      })));\n    }\n\n    state.attributes.popper = Object.assign({}, state.attributes.popper, {\n      'data-popper-placement': state.placement\n    });\n  } // eslint-disable-next-line import/no-unused-modules\n\n\n  const computeStyles$1 = {\n    name: 'computeStyles',\n    enabled: true,\n    phase: 'beforeWrite',\n    fn: computeStyles,\n    data: {}\n  };\n\n  var passive = {\n    passive: true\n  };\n\n  function effect(_ref) {\n    var state = _ref.state,\n        instance = _ref.instance,\n        options = _ref.options;\n    var _options$scroll = options.scroll,\n        scroll = _options$scroll === void 0 ? true : _options$scroll,\n        _options$resize = options.resize,\n        resize = _options$resize === void 0 ? true : _options$resize;\n    var window = getWindow(state.elements.popper);\n    var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.addEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.addEventListener('resize', instance.update, passive);\n    }\n\n    return function () {\n      if (scroll) {\n        scrollParents.forEach(function (scrollParent) {\n          scrollParent.removeEventListener('scroll', instance.update, passive);\n        });\n      }\n\n      if (resize) {\n        window.removeEventListener('resize', instance.update, passive);\n      }\n    };\n  } // eslint-disable-next-line import/no-unused-modules\n\n\n  const eventListeners = {\n    name: 'eventListeners',\n    enabled: true,\n    phase: 'write',\n    fn: function fn() {},\n    effect: effect,\n    data: {}\n  };\n\n  var hash$1 = {\n    left: 'right',\n    right: 'left',\n    bottom: 'top',\n    top: 'bottom'\n  };\n  function getOppositePlacement(placement) {\n    return placement.replace(/left|right|bottom|top/g, function (matched) {\n      return hash$1[matched];\n    });\n  }\n\n  var hash = {\n    start: 'end',\n    end: 'start'\n  };\n  function getOppositeVariationPlacement(placement) {\n    return placement.replace(/start|end/g, function (matched) {\n      return hash[matched];\n    });\n  }\n\n  function getWindowScroll(node) {\n    var win = getWindow(node);\n    var scrollLeft = win.pageXOffset;\n    var scrollTop = win.pageYOffset;\n    return {\n      scrollLeft: scrollLeft,\n      scrollTop: scrollTop\n    };\n  }\n\n  function getWindowScrollBarX(element) {\n    // If <html> has a CSS width greater than the viewport, then this will be\n    // incorrect for RTL.\n    // Popper 1 is broken in this case and never had a bug report so let's assume\n    // it's not an issue. I don't think anyone ever specifies width on <html>\n    // anyway.\n    // Browsers where the left scrollbar doesn't cause an issue report `0` for\n    // this (e.g. Edge 2019, IE11, Safari)\n    return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n  }\n\n  function getViewportRect(element, strategy) {\n    var win = getWindow(element);\n    var html = getDocumentElement(element);\n    var visualViewport = win.visualViewport;\n    var width = html.clientWidth;\n    var height = html.clientHeight;\n    var x = 0;\n    var y = 0;\n\n    if (visualViewport) {\n      width = visualViewport.width;\n      height = visualViewport.height;\n      var layoutViewport = isLayoutViewport();\n\n      if (layoutViewport || !layoutViewport && strategy === 'fixed') {\n        x = visualViewport.offsetLeft;\n        y = visualViewport.offsetTop;\n      }\n    }\n\n    return {\n      width: width,\n      height: height,\n      x: x + getWindowScrollBarX(element),\n      y: y\n    };\n  }\n\n  // of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\n  function getDocumentRect(element) {\n    var _element$ownerDocumen;\n\n    var html = getDocumentElement(element);\n    var winScroll = getWindowScroll(element);\n    var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n    var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n    var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n    var x = -winScroll.scrollLeft + getWindowScrollBarX(element);\n    var y = -winScroll.scrollTop;\n\n    if (getComputedStyle$1(body || html).direction === 'rtl') {\n      x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n    }\n\n    return {\n      width: width,\n      height: height,\n      x: x,\n      y: y\n    };\n  }\n\n  function isScrollParent(element) {\n    // Firefox wants us to check `-x` and `-y` variations as well\n    var _getComputedStyle = getComputedStyle$1(element),\n        overflow = _getComputedStyle.overflow,\n        overflowX = _getComputedStyle.overflowX,\n        overflowY = _getComputedStyle.overflowY;\n\n    return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n  }\n\n  function getScrollParent(node) {\n    if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n      // $FlowFixMe[incompatible-return]: assume body is always available\n      return node.ownerDocument.body;\n    }\n\n    if (isHTMLElement(node) && isScrollParent(node)) {\n      return node;\n    }\n\n    return getScrollParent(getParentNode(node));\n  }\n\n  /*\n  given a DOM element, return the list of all scroll parents, up the list of ancesors\n  until we get to the top window object. This list is what we attach scroll listeners\n  to, because if any of these parent elements scroll, we'll need to re-calculate the\n  reference element's position.\n  */\n\n  function listScrollParents(element, list) {\n    var _element$ownerDocumen;\n\n    if (list === void 0) {\n      list = [];\n    }\n\n    var scrollParent = getScrollParent(element);\n    var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);\n    var win = getWindow(scrollParent);\n    var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n    var updatedList = list.concat(target);\n    return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here\n    updatedList.concat(listScrollParents(getParentNode(target)));\n  }\n\n  function rectToClientRect(rect) {\n    return Object.assign({}, rect, {\n      left: rect.x,\n      top: rect.y,\n      right: rect.x + rect.width,\n      bottom: rect.y + rect.height\n    });\n  }\n\n  function getInnerBoundingClientRect(element, strategy) {\n    var rect = getBoundingClientRect(element, false, strategy === 'fixed');\n    rect.top = rect.top + element.clientTop;\n    rect.left = rect.left + element.clientLeft;\n    rect.bottom = rect.top + element.clientHeight;\n    rect.right = rect.left + element.clientWidth;\n    rect.width = element.clientWidth;\n    rect.height = element.clientHeight;\n    rect.x = rect.left;\n    rect.y = rect.top;\n    return rect;\n  }\n\n  function getClientRectFromMixedType(element, clippingParent, strategy) {\n    return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n  } // A \"clipping parent\" is an overflowable container with the characteristic of\n  // clipping (or hiding) overflowing elements with a position different from\n  // `initial`\n\n\n  function getClippingParents(element) {\n    var clippingParents = listScrollParents(getParentNode(element));\n    var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle$1(element).position) >= 0;\n    var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n    if (!isElement(clipperElement)) {\n      return [];\n    } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n    return clippingParents.filter(function (clippingParent) {\n      return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n    });\n  } // Gets the maximum area that the element is visible in due to any number of\n  // clipping parents\n\n\n  function getClippingRect(element, boundary, rootBoundary, strategy) {\n    var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n    var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n    var firstClippingParent = clippingParents[0];\n    var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n      var rect = getClientRectFromMixedType(element, clippingParent, strategy);\n      accRect.top = max(rect.top, accRect.top);\n      accRect.right = min(rect.right, accRect.right);\n      accRect.bottom = min(rect.bottom, accRect.bottom);\n      accRect.left = max(rect.left, accRect.left);\n      return accRect;\n    }, getClientRectFromMixedType(element, firstClippingParent, strategy));\n    clippingRect.width = clippingRect.right - clippingRect.left;\n    clippingRect.height = clippingRect.bottom - clippingRect.top;\n    clippingRect.x = clippingRect.left;\n    clippingRect.y = clippingRect.top;\n    return clippingRect;\n  }\n\n  function computeOffsets(_ref) {\n    var reference = _ref.reference,\n        element = _ref.element,\n        placement = _ref.placement;\n    var basePlacement = placement ? getBasePlacement(placement) : null;\n    var variation = placement ? getVariation(placement) : null;\n    var commonX = reference.x + reference.width / 2 - element.width / 2;\n    var commonY = reference.y + reference.height / 2 - element.height / 2;\n    var offsets;\n\n    switch (basePlacement) {\n      case top:\n        offsets = {\n          x: commonX,\n          y: reference.y - element.height\n        };\n        break;\n\n      case bottom:\n        offsets = {\n          x: commonX,\n          y: reference.y + reference.height\n        };\n        break;\n\n      case right:\n        offsets = {\n          x: reference.x + reference.width,\n          y: commonY\n        };\n        break;\n\n      case left:\n        offsets = {\n          x: reference.x - element.width,\n          y: commonY\n        };\n        break;\n\n      default:\n        offsets = {\n          x: reference.x,\n          y: reference.y\n        };\n    }\n\n    var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n    if (mainAxis != null) {\n      var len = mainAxis === 'y' ? 'height' : 'width';\n\n      switch (variation) {\n        case start:\n          offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);\n          break;\n\n        case end:\n          offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);\n          break;\n      }\n    }\n\n    return offsets;\n  }\n\n  function detectOverflow(state, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _options = options,\n        _options$placement = _options.placement,\n        placement = _options$placement === void 0 ? state.placement : _options$placement,\n        _options$strategy = _options.strategy,\n        strategy = _options$strategy === void 0 ? state.strategy : _options$strategy,\n        _options$boundary = _options.boundary,\n        boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n        _options$rootBoundary = _options.rootBoundary,\n        rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n        _options$elementConte = _options.elementContext,\n        elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n        _options$altBoundary = _options.altBoundary,\n        altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n        _options$padding = _options.padding,\n        padding = _options$padding === void 0 ? 0 : _options$padding;\n    var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n    var altContext = elementContext === popper ? reference : popper;\n    var popperRect = state.rects.popper;\n    var element = state.elements[altBoundary ? altContext : elementContext];\n    var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);\n    var referenceClientRect = getBoundingClientRect(state.elements.reference);\n    var popperOffsets = computeOffsets({\n      reference: referenceClientRect,\n      element: popperRect,\n      strategy: 'absolute',\n      placement: placement\n    });\n    var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));\n    var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n    // 0 or negative = within the clipping rect\n\n    var overflowOffsets = {\n      top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n      bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n      left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n      right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n    };\n    var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n    if (elementContext === popper && offsetData) {\n      var offset = offsetData[placement];\n      Object.keys(overflowOffsets).forEach(function (key) {\n        var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n        var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n        overflowOffsets[key] += offset[axis] * multiply;\n      });\n    }\n\n    return overflowOffsets;\n  }\n\n  function computeAutoPlacement(state, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _options = options,\n        placement = _options.placement,\n        boundary = _options.boundary,\n        rootBoundary = _options.rootBoundary,\n        padding = _options.padding,\n        flipVariations = _options.flipVariations,\n        _options$allowedAutoP = _options.allowedAutoPlacements,\n        allowedAutoPlacements = _options$allowedAutoP === void 0 ? placements : _options$allowedAutoP;\n    var variation = getVariation(placement);\n    var placements$1 = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n      return getVariation(placement) === variation;\n    }) : basePlacements;\n    var allowedPlacements = placements$1.filter(function (placement) {\n      return allowedAutoPlacements.indexOf(placement) >= 0;\n    });\n\n    if (allowedPlacements.length === 0) {\n      allowedPlacements = placements$1;\n    } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...\n\n\n    var overflows = allowedPlacements.reduce(function (acc, placement) {\n      acc[placement] = detectOverflow(state, {\n        placement: placement,\n        boundary: boundary,\n        rootBoundary: rootBoundary,\n        padding: padding\n      })[getBasePlacement(placement)];\n      return acc;\n    }, {});\n    return Object.keys(overflows).sort(function (a, b) {\n      return overflows[a] - overflows[b];\n    });\n  }\n\n  function getExpandedFallbackPlacements(placement) {\n    if (getBasePlacement(placement) === auto) {\n      return [];\n    }\n\n    var oppositePlacement = getOppositePlacement(placement);\n    return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n  }\n\n  function flip(_ref) {\n    var state = _ref.state,\n        options = _ref.options,\n        name = _ref.name;\n\n    if (state.modifiersData[name]._skip) {\n      return;\n    }\n\n    var _options$mainAxis = options.mainAxis,\n        checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n        _options$altAxis = options.altAxis,\n        checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n        specifiedFallbackPlacements = options.fallbackPlacements,\n        padding = options.padding,\n        boundary = options.boundary,\n        rootBoundary = options.rootBoundary,\n        altBoundary = options.altBoundary,\n        _options$flipVariatio = options.flipVariations,\n        flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n        allowedAutoPlacements = options.allowedAutoPlacements;\n    var preferredPlacement = state.options.placement;\n    var basePlacement = getBasePlacement(preferredPlacement);\n    var isBasePlacement = basePlacement === preferredPlacement;\n    var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n    var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n      return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n        placement: placement,\n        boundary: boundary,\n        rootBoundary: rootBoundary,\n        padding: padding,\n        flipVariations: flipVariations,\n        allowedAutoPlacements: allowedAutoPlacements\n      }) : placement);\n    }, []);\n    var referenceRect = state.rects.reference;\n    var popperRect = state.rects.popper;\n    var checksMap = new Map();\n    var makeFallbackChecks = true;\n    var firstFittingPlacement = placements[0];\n\n    for (var i = 0; i < placements.length; i++) {\n      var placement = placements[i];\n\n      var _basePlacement = getBasePlacement(placement);\n\n      var isStartVariation = getVariation(placement) === start;\n      var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n      var len = isVertical ? 'width' : 'height';\n      var overflow = detectOverflow(state, {\n        placement: placement,\n        boundary: boundary,\n        rootBoundary: rootBoundary,\n        altBoundary: altBoundary,\n        padding: padding\n      });\n      var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n      if (referenceRect[len] > popperRect[len]) {\n        mainVariationSide = getOppositePlacement(mainVariationSide);\n      }\n\n      var altVariationSide = getOppositePlacement(mainVariationSide);\n      var checks = [];\n\n      if (checkMainAxis) {\n        checks.push(overflow[_basePlacement] <= 0);\n      }\n\n      if (checkAltAxis) {\n        checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n      }\n\n      if (checks.every(function (check) {\n        return check;\n      })) {\n        firstFittingPlacement = placement;\n        makeFallbackChecks = false;\n        break;\n      }\n\n      checksMap.set(placement, checks);\n    }\n\n    if (makeFallbackChecks) {\n      // `2` may be desired in some cases \u2013 research later\n      var numberOfChecks = flipVariations ? 3 : 1;\n\n      var _loop = function _loop(_i) {\n        var fittingPlacement = placements.find(function (placement) {\n          var checks = checksMap.get(placement);\n\n          if (checks) {\n            return checks.slice(0, _i).every(function (check) {\n              return check;\n            });\n          }\n        });\n\n        if (fittingPlacement) {\n          firstFittingPlacement = fittingPlacement;\n          return \"break\";\n        }\n      };\n\n      for (var _i = numberOfChecks; _i > 0; _i--) {\n        var _ret = _loop(_i);\n\n        if (_ret === \"break\") break;\n      }\n    }\n\n    if (state.placement !== firstFittingPlacement) {\n      state.modifiersData[name]._skip = true;\n      state.placement = firstFittingPlacement;\n      state.reset = true;\n    }\n  } // eslint-disable-next-line import/no-unused-modules\n\n\n  const flip$1 = {\n    name: 'flip',\n    enabled: true,\n    phase: 'main',\n    fn: flip,\n    requiresIfExists: ['offset'],\n    data: {\n      _skip: false\n    }\n  };\n\n  function getSideOffsets(overflow, rect, preventedOffsets) {\n    if (preventedOffsets === void 0) {\n      preventedOffsets = {\n        x: 0,\n        y: 0\n      };\n    }\n\n    return {\n      top: overflow.top - rect.height - preventedOffsets.y,\n      right: overflow.right - rect.width + preventedOffsets.x,\n      bottom: overflow.bottom - rect.height + preventedOffsets.y,\n      left: overflow.left - rect.width - preventedOffsets.x\n    };\n  }\n\n  function isAnySideFullyClipped(overflow) {\n    return [top, right, bottom, left].some(function (side) {\n      return overflow[side] >= 0;\n    });\n  }\n\n  function hide(_ref) {\n    var state = _ref.state,\n        name = _ref.name;\n    var referenceRect = state.rects.reference;\n    var popperRect = state.rects.popper;\n    var preventedOffsets = state.modifiersData.preventOverflow;\n    var referenceOverflow = detectOverflow(state, {\n      elementContext: 'reference'\n    });\n    var popperAltOverflow = detectOverflow(state, {\n      altBoundary: true\n    });\n    var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n    var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n    var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n    var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n    state.modifiersData[name] = {\n      referenceClippingOffsets: referenceClippingOffsets,\n      popperEscapeOffsets: popperEscapeOffsets,\n      isReferenceHidden: isReferenceHidden,\n      hasPopperEscaped: hasPopperEscaped\n    };\n    state.attributes.popper = Object.assign({}, state.attributes.popper, {\n      'data-popper-reference-hidden': isReferenceHidden,\n      'data-popper-escaped': hasPopperEscaped\n    });\n  } // eslint-disable-next-line import/no-unused-modules\n\n\n  const hide$1 = {\n    name: 'hide',\n    enabled: true,\n    phase: 'main',\n    requiresIfExists: ['preventOverflow'],\n    fn: hide\n  };\n\n  function distanceAndSkiddingToXY(placement, rects, offset) {\n    var basePlacement = getBasePlacement(placement);\n    var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n    var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n      placement: placement\n    })) : offset,\n        skidding = _ref[0],\n        distance = _ref[1];\n\n    skidding = skidding || 0;\n    distance = (distance || 0) * invertDistance;\n    return [left, right].indexOf(basePlacement) >= 0 ? {\n      x: distance,\n      y: skidding\n    } : {\n      x: skidding,\n      y: distance\n    };\n  }\n\n  function offset(_ref2) {\n    var state = _ref2.state,\n        options = _ref2.options,\n        name = _ref2.name;\n    var _options$offset = options.offset,\n        offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n    var data = placements.reduce(function (acc, placement) {\n      acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n      return acc;\n    }, {});\n    var _data$state$placement = data[state.placement],\n        x = _data$state$placement.x,\n        y = _data$state$placement.y;\n\n    if (state.modifiersData.popperOffsets != null) {\n      state.modifiersData.popperOffsets.x += x;\n      state.modifiersData.popperOffsets.y += y;\n    }\n\n    state.modifiersData[name] = data;\n  } // eslint-disable-next-line import/no-unused-modules\n\n\n  const offset$1 = {\n    name: 'offset',\n    enabled: true,\n    phase: 'main',\n    requires: ['popperOffsets'],\n    fn: offset\n  };\n\n  function popperOffsets(_ref) {\n    var state = _ref.state,\n        name = _ref.name;\n    // Offsets are the actual position the popper needs to have to be\n    // properly positioned near its reference element\n    // This is the most basic placement, and will be adjusted by\n    // the modifiers in the next step\n    state.modifiersData[name] = computeOffsets({\n      reference: state.rects.reference,\n      element: state.rects.popper,\n      strategy: 'absolute',\n      placement: state.placement\n    });\n  } // eslint-disable-next-line import/no-unused-modules\n\n\n  const popperOffsets$1 = {\n    name: 'popperOffsets',\n    enabled: true,\n    phase: 'read',\n    fn: popperOffsets,\n    data: {}\n  };\n\n  function getAltAxis(axis) {\n    return axis === 'x' ? 'y' : 'x';\n  }\n\n  function preventOverflow(_ref) {\n    var state = _ref.state,\n        options = _ref.options,\n        name = _ref.name;\n    var _options$mainAxis = options.mainAxis,\n        checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n        _options$altAxis = options.altAxis,\n        checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n        boundary = options.boundary,\n        rootBoundary = options.rootBoundary,\n        altBoundary = options.altBoundary,\n        padding = options.padding,\n        _options$tether = options.tether,\n        tether = _options$tether === void 0 ? true : _options$tether,\n        _options$tetherOffset = options.tetherOffset,\n        tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n    var overflow = detectOverflow(state, {\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      altBoundary: altBoundary\n    });\n    var basePlacement = getBasePlacement(state.placement);\n    var variation = getVariation(state.placement);\n    var isBasePlacement = !variation;\n    var mainAxis = getMainAxisFromPlacement(basePlacement);\n    var altAxis = getAltAxis(mainAxis);\n    var popperOffsets = state.modifiersData.popperOffsets;\n    var referenceRect = state.rects.reference;\n    var popperRect = state.rects.popper;\n    var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n      placement: state.placement\n    })) : tetherOffset;\n    var normalizedTetherOffsetValue = typeof tetherOffsetValue === 'number' ? {\n      mainAxis: tetherOffsetValue,\n      altAxis: tetherOffsetValue\n    } : Object.assign({\n      mainAxis: 0,\n      altAxis: 0\n    }, tetherOffsetValue);\n    var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;\n    var data = {\n      x: 0,\n      y: 0\n    };\n\n    if (!popperOffsets) {\n      return;\n    }\n\n    if (checkMainAxis) {\n      var _offsetModifierState$;\n\n      var mainSide = mainAxis === 'y' ? top : left;\n      var altSide = mainAxis === 'y' ? bottom : right;\n      var len = mainAxis === 'y' ? 'height' : 'width';\n      var offset = popperOffsets[mainAxis];\n      var min$1 = offset + overflow[mainSide];\n      var max$1 = offset - overflow[altSide];\n      var additive = tether ? -popperRect[len] / 2 : 0;\n      var minLen = variation === start ? referenceRect[len] : popperRect[len];\n      var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n      // outside the reference bounds\n\n      var arrowElement = state.elements.arrow;\n      var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n        width: 0,\n        height: 0\n      };\n      var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n      var arrowPaddingMin = arrowPaddingObject[mainSide];\n      var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n      // to include its full size in the calculation. If the reference is small\n      // and near the edge of a boundary, the popper can overflow even if the\n      // reference is not overflowing as well (e.g. virtual elements with no\n      // width or height)\n\n      var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n      var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;\n      var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;\n      var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n      var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n      var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;\n      var tetherMin = offset + minOffset - offsetModifierValue - clientOffset;\n      var tetherMax = offset + maxOffset - offsetModifierValue;\n      var preventedOffset = within(tether ? min(min$1, tetherMin) : min$1, offset, tether ? max(max$1, tetherMax) : max$1);\n      popperOffsets[mainAxis] = preventedOffset;\n      data[mainAxis] = preventedOffset - offset;\n    }\n\n    if (checkAltAxis) {\n      var _offsetModifierState$2;\n\n      var _mainSide = mainAxis === 'x' ? top : left;\n\n      var _altSide = mainAxis === 'x' ? bottom : right;\n\n      var _offset = popperOffsets[altAxis];\n\n      var _len = altAxis === 'y' ? 'height' : 'width';\n\n      var _min = _offset + overflow[_mainSide];\n\n      var _max = _offset - overflow[_altSide];\n\n      var isOriginSide = [top, left].indexOf(basePlacement) !== -1;\n\n      var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;\n\n      var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;\n\n      var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;\n\n      var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);\n\n      popperOffsets[altAxis] = _preventedOffset;\n      data[altAxis] = _preventedOffset - _offset;\n    }\n\n    state.modifiersData[name] = data;\n  } // eslint-disable-next-line import/no-unused-modules\n\n\n  const preventOverflow$1 = {\n    name: 'preventOverflow',\n    enabled: true,\n    phase: 'main',\n    fn: preventOverflow,\n    requiresIfExists: ['offset']\n  };\n\n  function getHTMLElementScroll(element) {\n    return {\n      scrollLeft: element.scrollLeft,\n      scrollTop: element.scrollTop\n    };\n  }\n\n  function getNodeScroll(node) {\n    if (node === getWindow(node) || !isHTMLElement(node)) {\n      return getWindowScroll(node);\n    } else {\n      return getHTMLElementScroll(node);\n    }\n  }\n\n  function isElementScaled(element) {\n    var rect = element.getBoundingClientRect();\n    var scaleX = round(rect.width) / element.offsetWidth || 1;\n    var scaleY = round(rect.height) / element.offsetHeight || 1;\n    return scaleX !== 1 || scaleY !== 1;\n  } // Returns the composite rect of an element relative to its offsetParent.\n  // Composite means it takes into account transforms as well as layout.\n\n\n  function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n    if (isFixed === void 0) {\n      isFixed = false;\n    }\n\n    var isOffsetParentAnElement = isHTMLElement(offsetParent);\n    var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);\n    var documentElement = getDocumentElement(offsetParent);\n    var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);\n    var scroll = {\n      scrollLeft: 0,\n      scrollTop: 0\n    };\n    var offsets = {\n      x: 0,\n      y: 0\n    };\n\n    if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n      if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n      isScrollParent(documentElement)) {\n        scroll = getNodeScroll(offsetParent);\n      }\n\n      if (isHTMLElement(offsetParent)) {\n        offsets = getBoundingClientRect(offsetParent, true);\n        offsets.x += offsetParent.clientLeft;\n        offsets.y += offsetParent.clientTop;\n      } else if (documentElement) {\n        offsets.x = getWindowScrollBarX(documentElement);\n      }\n    }\n\n    return {\n      x: rect.left + scroll.scrollLeft - offsets.x,\n      y: rect.top + scroll.scrollTop - offsets.y,\n      width: rect.width,\n      height: rect.height\n    };\n  }\n\n  function order(modifiers) {\n    var map = new Map();\n    var visited = new Set();\n    var result = [];\n    modifiers.forEach(function (modifier) {\n      map.set(modifier.name, modifier);\n    }); // On visiting object, check for its dependencies and visit them recursively\n\n    function sort(modifier) {\n      visited.add(modifier.name);\n      var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n      requires.forEach(function (dep) {\n        if (!visited.has(dep)) {\n          var depModifier = map.get(dep);\n\n          if (depModifier) {\n            sort(depModifier);\n          }\n        }\n      });\n      result.push(modifier);\n    }\n\n    modifiers.forEach(function (modifier) {\n      if (!visited.has(modifier.name)) {\n        // check for visited object\n        sort(modifier);\n      }\n    });\n    return result;\n  }\n\n  function orderModifiers(modifiers) {\n    // order based on dependencies\n    var orderedModifiers = order(modifiers); // order based on phase\n\n    return modifierPhases.reduce(function (acc, phase) {\n      return acc.concat(orderedModifiers.filter(function (modifier) {\n        return modifier.phase === phase;\n      }));\n    }, []);\n  }\n\n  function debounce(fn) {\n    var pending;\n    return function () {\n      if (!pending) {\n        pending = new Promise(function (resolve) {\n          Promise.resolve().then(function () {\n            pending = undefined;\n            resolve(fn());\n          });\n        });\n      }\n\n      return pending;\n    };\n  }\n\n  function mergeByName(modifiers) {\n    var merged = modifiers.reduce(function (merged, current) {\n      var existing = merged[current.name];\n      merged[current.name] = existing ? Object.assign({}, existing, current, {\n        options: Object.assign({}, existing.options, current.options),\n        data: Object.assign({}, existing.data, current.data)\n      }) : current;\n      return merged;\n    }, {}); // IE11 does not support Object.values\n\n    return Object.keys(merged).map(function (key) {\n      return merged[key];\n    });\n  }\n\n  var DEFAULT_OPTIONS = {\n    placement: 'bottom',\n    modifiers: [],\n    strategy: 'absolute'\n  };\n\n  function areValidElements() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return !args.some(function (element) {\n      return !(element && typeof element.getBoundingClientRect === 'function');\n    });\n  }\n\n  function popperGenerator(generatorOptions) {\n    if (generatorOptions === void 0) {\n      generatorOptions = {};\n    }\n\n    var _generatorOptions = generatorOptions,\n        _generatorOptions$def = _generatorOptions.defaultModifiers,\n        defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n        _generatorOptions$def2 = _generatorOptions.defaultOptions,\n        defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n    return function createPopper(reference, popper, options) {\n      if (options === void 0) {\n        options = defaultOptions;\n      }\n\n      var state = {\n        placement: 'bottom',\n        orderedModifiers: [],\n        options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),\n        modifiersData: {},\n        elements: {\n          reference: reference,\n          popper: popper\n        },\n        attributes: {},\n        styles: {}\n      };\n      var effectCleanupFns = [];\n      var isDestroyed = false;\n      var instance = {\n        state: state,\n        setOptions: function setOptions(setOptionsAction) {\n          var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;\n          cleanupModifierEffects();\n          state.options = Object.assign({}, defaultOptions, state.options, options);\n          state.scrollParents = {\n            reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n            popper: listScrollParents(popper)\n          }; // Orders the modifiers based on their dependencies and `phase`\n          // properties\n\n          var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n          state.orderedModifiers = orderedModifiers.filter(function (m) {\n            return m.enabled;\n          });\n          runModifierEffects();\n          return instance.update();\n        },\n        // Sync update \u2013 it will always be executed, even if not necessary. This\n        // is useful for low frequency updates where sync behavior simplifies the\n        // logic.\n        // For high frequency updates (e.g. `resize` and `scroll` events), always\n        // prefer the async Popper#update method\n        forceUpdate: function forceUpdate() {\n          if (isDestroyed) {\n            return;\n          }\n\n          var _state$elements = state.elements,\n              reference = _state$elements.reference,\n              popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n          // anymore\n\n          if (!areValidElements(reference, popper)) {\n            return;\n          } // Store the reference and popper rects to be read by modifiers\n\n\n          state.rects = {\n            reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n            popper: getLayoutRect(popper)\n          }; // Modifiers have the ability to reset the current update cycle. The\n          // most common use case for this is the `flip` modifier changing the\n          // placement, which then needs to re-run all the modifiers, because the\n          // logic was previously ran for the previous placement and is therefore\n          // stale/incorrect\n\n          state.reset = false;\n          state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n          // is filled with the initial data specified by the modifier. This means\n          // it doesn't persist and is fresh on each update.\n          // To ensure persistent data, use `${name}#persistent`\n\n          state.orderedModifiers.forEach(function (modifier) {\n            return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n          });\n\n          for (var index = 0; index < state.orderedModifiers.length; index++) {\n            if (state.reset === true) {\n              state.reset = false;\n              index = -1;\n              continue;\n            }\n\n            var _state$orderedModifie = state.orderedModifiers[index],\n                fn = _state$orderedModifie.fn,\n                _state$orderedModifie2 = _state$orderedModifie.options,\n                _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n                name = _state$orderedModifie.name;\n\n            if (typeof fn === 'function') {\n              state = fn({\n                state: state,\n                options: _options,\n                name: name,\n                instance: instance\n              }) || state;\n            }\n          }\n        },\n        // Async and optimistically optimized update \u2013 it will not be executed if\n        // not necessary (debounced to run at most once-per-tick)\n        update: debounce(function () {\n          return new Promise(function (resolve) {\n            instance.forceUpdate();\n            resolve(state);\n          });\n        }),\n        destroy: function destroy() {\n          cleanupModifierEffects();\n          isDestroyed = true;\n        }\n      };\n\n      if (!areValidElements(reference, popper)) {\n        return instance;\n      }\n\n      instance.setOptions(options).then(function (state) {\n        if (!isDestroyed && options.onFirstUpdate) {\n          options.onFirstUpdate(state);\n        }\n      }); // Modifiers have the ability to execute arbitrary code before the first\n      // update cycle runs. They will be executed in the same order as the update\n      // cycle. This is useful when a modifier adds some persistent data that\n      // other modifiers need to use, but the modifier is run after the dependent\n      // one.\n\n      function runModifierEffects() {\n        state.orderedModifiers.forEach(function (_ref) {\n          var name = _ref.name,\n              _ref$options = _ref.options,\n              options = _ref$options === void 0 ? {} : _ref$options,\n              effect = _ref.effect;\n\n          if (typeof effect === 'function') {\n            var cleanupFn = effect({\n              state: state,\n              name: name,\n              instance: instance,\n              options: options\n            });\n\n            var noopFn = function noopFn() {};\n\n            effectCleanupFns.push(cleanupFn || noopFn);\n          }\n        });\n      }\n\n      function cleanupModifierEffects() {\n        effectCleanupFns.forEach(function (fn) {\n          return fn();\n        });\n        effectCleanupFns = [];\n      }\n\n      return instance;\n    };\n  }\n  var createPopper$2 = /*#__PURE__*/popperGenerator(); // eslint-disable-next-line import/no-unused-modules\n\n  var defaultModifiers$1 = [eventListeners, popperOffsets$1, computeStyles$1, applyStyles$1];\n  var createPopper$1 = /*#__PURE__*/popperGenerator({\n    defaultModifiers: defaultModifiers$1\n  }); // eslint-disable-next-line import/no-unused-modules\n\n  var defaultModifiers = [eventListeners, popperOffsets$1, computeStyles$1, applyStyles$1, offset$1, flip$1, preventOverflow$1, arrow$1, hide$1];\n  var createPopper = /*#__PURE__*/popperGenerator({\n    defaultModifiers: defaultModifiers\n  }); // eslint-disable-next-line import/no-unused-modules\n\n  const Popper = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({\n    __proto__: null,\n    afterMain,\n    afterRead,\n    afterWrite,\n    applyStyles: applyStyles$1,\n    arrow: arrow$1,\n    auto,\n    basePlacements,\n    beforeMain,\n    beforeRead,\n    beforeWrite,\n    bottom,\n    clippingParents,\n    computeStyles: computeStyles$1,\n    createPopper,\n    createPopperBase: createPopper$2,\n    createPopperLite: createPopper$1,\n    detectOverflow,\n    end,\n    eventListeners,\n    flip: flip$1,\n    hide: hide$1,\n    left,\n    main,\n    modifierPhases,\n    offset: offset$1,\n    placements,\n    popper,\n    popperGenerator,\n    popperOffsets: popperOffsets$1,\n    preventOverflow: preventOverflow$1,\n    read,\n    reference,\n    right,\n    start,\n    top,\n    variationPlacements,\n    viewport,\n    write\n  }, Symbol.toStringTag, { value: 'Module' }));\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap dropdown.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME$a = 'dropdown';\n  const DATA_KEY$6 = 'bs.dropdown';\n  const EVENT_KEY$6 = `.${DATA_KEY$6}`;\n  const DATA_API_KEY$3 = '.data-api';\n  const ESCAPE_KEY$2 = 'Escape';\n  const TAB_KEY$1 = 'Tab';\n  const ARROW_UP_KEY$1 = 'ArrowUp';\n  const ARROW_DOWN_KEY$1 = 'ArrowDown';\n  const RIGHT_MOUSE_BUTTON = 2; // MouseEvent.button value for the secondary button, usually the right button\n\n  const EVENT_HIDE$5 = `hide${EVENT_KEY$6}`;\n  const EVENT_HIDDEN$5 = `hidden${EVENT_KEY$6}`;\n  const EVENT_SHOW$5 = `show${EVENT_KEY$6}`;\n  const EVENT_SHOWN$5 = `shown${EVENT_KEY$6}`;\n  const EVENT_CLICK_DATA_API$3 = `click${EVENT_KEY$6}${DATA_API_KEY$3}`;\n  const EVENT_KEYDOWN_DATA_API = `keydown${EVENT_KEY$6}${DATA_API_KEY$3}`;\n  const EVENT_KEYUP_DATA_API = `keyup${EVENT_KEY$6}${DATA_API_KEY$3}`;\n  const CLASS_NAME_SHOW$6 = 'show';\n  const CLASS_NAME_DROPUP = 'dropup';\n  const CLASS_NAME_DROPEND = 'dropend';\n  const CLASS_NAME_DROPSTART = 'dropstart';\n  const CLASS_NAME_DROPUP_CENTER = 'dropup-center';\n  const CLASS_NAME_DROPDOWN_CENTER = 'dropdown-center';\n  const SELECTOR_DATA_TOGGLE$3 = '[data-bs-toggle=\"dropdown\"]:not(.disabled):not(:disabled)';\n  const SELECTOR_DATA_TOGGLE_SHOWN = `${SELECTOR_DATA_TOGGLE$3}.${CLASS_NAME_SHOW$6}`;\n  const SELECTOR_MENU = '.dropdown-menu';\n  const SELECTOR_NAVBAR = '.navbar';\n  const SELECTOR_NAVBAR_NAV = '.navbar-nav';\n  const SELECTOR_VISIBLE_ITEMS = '.dropdown-menu .dropdown-item:not(.disabled):not(:disabled)';\n  const PLACEMENT_TOP = isRTL() ? 'top-end' : 'top-start';\n  const PLACEMENT_TOPEND = isRTL() ? 'top-start' : 'top-end';\n  const PLACEMENT_BOTTOM = isRTL() ? 'bottom-end' : 'bottom-start';\n  const PLACEMENT_BOTTOMEND = isRTL() ? 'bottom-start' : 'bottom-end';\n  const PLACEMENT_RIGHT = isRTL() ? 'left-start' : 'right-start';\n  const PLACEMENT_LEFT = isRTL() ? 'right-start' : 'left-start';\n  const PLACEMENT_TOPCENTER = 'top';\n  const PLACEMENT_BOTTOMCENTER = 'bottom';\n  const Default$9 = {\n    autoClose: true,\n    boundary: 'clippingParents',\n    display: 'dynamic',\n    offset: [0, 2],\n    popperConfig: null,\n    reference: 'toggle'\n  };\n  const DefaultType$9 = {\n    autoClose: '(boolean|string)',\n    boundary: '(string|element)',\n    display: 'string',\n    offset: '(array|string|function)',\n    popperConfig: '(null|object|function)',\n    reference: '(string|element|object)'\n  };\n\n  /**\n   * Class definition\n   */\n\n  class Dropdown extends BaseComponent {\n    constructor(element, config) {\n      super(element, config);\n      this._popper = null;\n      this._parent = this._element.parentNode; // dropdown wrapper\n      // TODO: v6 revert #37011 & change markup https://getbootstrap.com/docs/5.3/forms/input-group/\n      this._menu = SelectorEngine.next(this._element, SELECTOR_MENU)[0] || SelectorEngine.prev(this._element, SELECTOR_MENU)[0] || SelectorEngine.findOne(SELECTOR_MENU, this._parent);\n      this._inNavbar = this._detectNavbar();\n    }\n\n    // Getters\n    static get Default() {\n      return Default$9;\n    }\n    static get DefaultType() {\n      return DefaultType$9;\n    }\n    static get NAME() {\n      return NAME$a;\n    }\n\n    // Public\n    toggle() {\n      return this._isShown() ? this.hide() : this.show();\n    }\n    show() {\n      if (isDisabled(this._element) || this._isShown()) {\n        return;\n      }\n      const relatedTarget = {\n        relatedTarget: this._element\n      };\n      const showEvent = EventHandler.trigger(this._element, EVENT_SHOW$5, relatedTarget);\n      if (showEvent.defaultPrevented) {\n        return;\n      }\n      this._createPopper();\n\n      // If this is a touch-enabled device we add extra\n      // empty mouseover listeners to the body's immediate children;\n      // only needed because of broken event delegation on iOS\n      // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n      if ('ontouchstart' in document.documentElement && !this._parent.closest(SELECTOR_NAVBAR_NAV)) {\n        for (const element of [].concat(...document.body.children)) {\n          EventHandler.on(element, 'mouseover', noop);\n        }\n      }\n      this._element.focus();\n      this._element.setAttribute('aria-expanded', true);\n      this._menu.classList.add(CLASS_NAME_SHOW$6);\n      this._element.classList.add(CLASS_NAME_SHOW$6);\n      EventHandler.trigger(this._element, EVENT_SHOWN$5, relatedTarget);\n    }\n    hide() {\n      if (isDisabled(this._element) || !this._isShown()) {\n        return;\n      }\n      const relatedTarget = {\n        relatedTarget: this._element\n      };\n      this._completeHide(relatedTarget);\n    }\n    dispose() {\n      if (this._popper) {\n        this._popper.destroy();\n      }\n      super.dispose();\n    }\n    update() {\n      this._inNavbar = this._detectNavbar();\n      if (this._popper) {\n        this._popper.update();\n      }\n    }\n\n    // Private\n    _completeHide(relatedTarget) {\n      const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE$5, relatedTarget);\n      if (hideEvent.defaultPrevented) {\n        return;\n      }\n\n      // If this is a touch-enabled device we remove the extra\n      // empty mouseover listeners we added for iOS support\n      if ('ontouchstart' in document.documentElement) {\n        for (const element of [].concat(...document.body.children)) {\n          EventHandler.off(element, 'mouseover', noop);\n        }\n      }\n      if (this._popper) {\n        this._popper.destroy();\n      }\n      this._menu.classList.remove(CLASS_NAME_SHOW$6);\n      this._element.classList.remove(CLASS_NAME_SHOW$6);\n      this._element.setAttribute('aria-expanded', 'false');\n      Manipulator.removeDataAttribute(this._menu, 'popper');\n      EventHandler.trigger(this._element, EVENT_HIDDEN$5, relatedTarget);\n    }\n    _getConfig(config) {\n      config = super._getConfig(config);\n      if (typeof config.reference === 'object' && !isElement$1(config.reference) && typeof config.reference.getBoundingClientRect !== 'function') {\n        // Popper virtual elements require a getBoundingClientRect method\n        throw new TypeError(`${NAME$a.toUpperCase()}: Option \"reference\" provided type \"object\" without a required \"getBoundingClientRect\" method.`);\n      }\n      return config;\n    }\n    _createPopper() {\n      if (typeof Popper === 'undefined') {\n        throw new TypeError('Bootstrap\\'s dropdowns require Popper (https://popper.js.org)');\n      }\n      let referenceElement = this._element;\n      if (this._config.reference === 'parent') {\n        referenceElement = this._parent;\n      } else if (isElement$1(this._config.reference)) {\n        referenceElement = getElement(this._config.reference);\n      } else if (typeof this._config.reference === 'object') {\n        referenceElement = this._config.reference;\n      }\n      const popperConfig = this._getPopperConfig();\n      this._popper = createPopper(referenceElement, this._menu, popperConfig);\n    }\n    _isShown() {\n      return this._menu.classList.contains(CLASS_NAME_SHOW$6);\n    }\n    _getPlacement() {\n      const parentDropdown = this._parent;\n      if (parentDropdown.classList.contains(CLASS_NAME_DROPEND)) {\n        return PLACEMENT_RIGHT;\n      }\n      if (parentDropdown.classList.contains(CLASS_NAME_DROPSTART)) {\n        return PLACEMENT_LEFT;\n      }\n      if (parentDropdown.classList.contains(CLASS_NAME_DROPUP_CENTER)) {\n        return PLACEMENT_TOPCENTER;\n      }\n      if (parentDropdown.classList.contains(CLASS_NAME_DROPDOWN_CENTER)) {\n        return PLACEMENT_BOTTOMCENTER;\n      }\n\n      // We need to trim the value because custom properties can also include spaces\n      const isEnd = getComputedStyle(this._menu).getPropertyValue('--bs-position').trim() === 'end';\n      if (parentDropdown.classList.contains(CLASS_NAME_DROPUP)) {\n        return isEnd ? PLACEMENT_TOPEND : PLACEMENT_TOP;\n      }\n      return isEnd ? PLACEMENT_BOTTOMEND : PLACEMENT_BOTTOM;\n    }\n    _detectNavbar() {\n      return this._element.closest(SELECTOR_NAVBAR) !== null;\n    }\n    _getOffset() {\n      const {\n        offset\n      } = this._config;\n      if (typeof offset === 'string') {\n        return offset.split(',').map(value => Number.parseInt(value, 10));\n      }\n      if (typeof offset === 'function') {\n        return popperData => offset(popperData, this._element);\n      }\n      return offset;\n    }\n    _getPopperConfig() {\n      const defaultBsPopperConfig = {\n        placement: this._getPlacement(),\n        modifiers: [{\n          name: 'preventOverflow',\n          options: {\n            boundary: this._config.boundary\n          }\n        }, {\n          name: 'offset',\n          options: {\n            offset: this._getOffset()\n          }\n        }]\n      };\n\n      // Disable Popper if we have a static display or Dropdown is in Navbar\n      if (this._inNavbar || this._config.display === 'static') {\n        Manipulator.setDataAttribute(this._menu, 'popper', 'static'); // TODO: v6 remove\n        defaultBsPopperConfig.modifiers = [{\n          name: 'applyStyles',\n          enabled: false\n        }];\n      }\n      return {\n        ...defaultBsPopperConfig,\n        ...execute(this._config.popperConfig, [defaultBsPopperConfig])\n      };\n    }\n    _selectMenuItem({\n      key,\n      target\n    }) {\n      const items = SelectorEngine.find(SELECTOR_VISIBLE_ITEMS, this._menu).filter(element => isVisible(element));\n      if (!items.length) {\n        return;\n      }\n\n      // if target isn't included in items (e.g. when expanding the dropdown)\n      // allow cycling to get the last item in case key equals ARROW_UP_KEY\n      getNextActiveElement(items, target, key === ARROW_DOWN_KEY$1, !items.includes(target)).focus();\n    }\n\n    // Static\n    static jQueryInterface(config) {\n      return this.each(function () {\n        const data = Dropdown.getOrCreateInstance(this, config);\n        if (typeof config !== 'string') {\n          return;\n        }\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n        data[config]();\n      });\n    }\n    static clearMenus(event) {\n      if (event.button === RIGHT_MOUSE_BUTTON || event.type === 'keyup' && event.key !== TAB_KEY$1) {\n        return;\n      }\n      const openToggles = SelectorEngine.find(SELECTOR_DATA_TOGGLE_SHOWN);\n      for (const toggle of openToggles) {\n        const context = Dropdown.getInstance(toggle);\n        if (!context || context._config.autoClose === false) {\n          continue;\n        }\n        const composedPath = event.composedPath();\n        const isMenuTarget = composedPath.includes(context._menu);\n        if (composedPath.includes(context._element) || context._config.autoClose === 'inside' && !isMenuTarget || context._config.autoClose === 'outside' && isMenuTarget) {\n          continue;\n        }\n\n        // Tab navigation through the dropdown menu or events from contained inputs shouldn't close the menu\n        if (context._menu.contains(event.target) && (event.type === 'keyup' && event.key === TAB_KEY$1 || /input|select|option|textarea|form/i.test(event.target.tagName))) {\n          continue;\n        }\n        const relatedTarget = {\n          relatedTarget: context._element\n        };\n        if (event.type === 'click') {\n          relatedTarget.clickEvent = event;\n        }\n        context._completeHide(relatedTarget);\n      }\n    }\n    static dataApiKeydownHandler(event) {\n      // If not an UP | DOWN | ESCAPE key => not a dropdown command\n      // If input/textarea && if key is other than ESCAPE => not a dropdown command\n\n      const isInput = /input|textarea/i.test(event.target.tagName);\n      const isEscapeEvent = event.key === ESCAPE_KEY$2;\n      const isUpOrDownEvent = [ARROW_UP_KEY$1, ARROW_DOWN_KEY$1].includes(event.key);\n      if (!isUpOrDownEvent && !isEscapeEvent) {\n        return;\n      }\n      if (isInput && !isEscapeEvent) {\n        return;\n      }\n      event.preventDefault();\n\n      // TODO: v6 revert #37011 & change markup https://getbootstrap.com/docs/5.3/forms/input-group/\n      const getToggleButton = this.matches(SELECTOR_DATA_TOGGLE$3) ? this : SelectorEngine.prev(this, SELECTOR_DATA_TOGGLE$3)[0] || SelectorEngine.next(this, SELECTOR_DATA_TOGGLE$3)[0] || SelectorEngine.findOne(SELECTOR_DATA_TOGGLE$3, event.delegateTarget.parentNode);\n      const instance = Dropdown.getOrCreateInstance(getToggleButton);\n      if (isUpOrDownEvent) {\n        event.stopPropagation();\n        instance.show();\n        instance._selectMenuItem(event);\n        return;\n      }\n      if (instance._isShown()) {\n        // else is escape and we check if it is shown\n        event.stopPropagation();\n        instance.hide();\n        getToggleButton.focus();\n      }\n    }\n  }\n\n  /**\n   * Data API implementation\n   */\n\n  EventHandler.on(document, EVENT_KEYDOWN_DATA_API, SELECTOR_DATA_TOGGLE$3, Dropdown.dataApiKeydownHandler);\n  EventHandler.on(document, EVENT_KEYDOWN_DATA_API, SELECTOR_MENU, Dropdown.dataApiKeydownHandler);\n  EventHandler.on(document, EVENT_CLICK_DATA_API$3, Dropdown.clearMenus);\n  EventHandler.on(document, EVENT_KEYUP_DATA_API, Dropdown.clearMenus);\n  EventHandler.on(document, EVENT_CLICK_DATA_API$3, SELECTOR_DATA_TOGGLE$3, function (event) {\n    event.preventDefault();\n    Dropdown.getOrCreateInstance(this).toggle();\n  });\n\n  /**\n   * jQuery\n   */\n\n  defineJQueryPlugin(Dropdown);\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap util/backdrop.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME$9 = 'backdrop';\n  const CLASS_NAME_FADE$4 = 'fade';\n  const CLASS_NAME_SHOW$5 = 'show';\n  const EVENT_MOUSEDOWN = `mousedown.bs.${NAME$9}`;\n  const Default$8 = {\n    className: 'modal-backdrop',\n    clickCallback: null,\n    isAnimated: false,\n    isVisible: true,\n    // if false, we use the backdrop helper without adding any element to the dom\n    rootElement: 'body' // give the choice to place backdrop under different elements\n  };\n  const DefaultType$8 = {\n    className: 'string',\n    clickCallback: '(function|null)',\n    isAnimated: 'boolean',\n    isVisible: 'boolean',\n    rootElement: '(element|string)'\n  };\n\n  /**\n   * Class definition\n   */\n\n  class Backdrop extends Config {\n    constructor(config) {\n      super();\n      this._config = this._getConfig(config);\n      this._isAppended = false;\n      this._element = null;\n    }\n\n    // Getters\n    static get Default() {\n      return Default$8;\n    }\n    static get DefaultType() {\n      return DefaultType$8;\n    }\n    static get NAME() {\n      return NAME$9;\n    }\n\n    // Public\n    show(callback) {\n      if (!this._config.isVisible) {\n        execute(callback);\n        return;\n      }\n      this._append();\n      const element = this._getElement();\n      if (this._config.isAnimated) {\n        reflow(element);\n      }\n      element.classList.add(CLASS_NAME_SHOW$5);\n      this._emulateAnimation(() => {\n        execute(callback);\n      });\n    }\n    hide(callback) {\n      if (!this._config.isVisible) {\n        execute(callback);\n        return;\n      }\n      this._getElement().classList.remove(CLASS_NAME_SHOW$5);\n      this._emulateAnimation(() => {\n        this.dispose();\n        execute(callback);\n      });\n    }\n    dispose() {\n      if (!this._isAppended) {\n        return;\n      }\n      EventHandler.off(this._element, EVENT_MOUSEDOWN);\n      this._element.remove();\n      this._isAppended = false;\n    }\n\n    // Private\n    _getElement() {\n      if (!this._element) {\n        const backdrop = document.createElement('div');\n        backdrop.className = this._config.className;\n        if (this._config.isAnimated) {\n          backdrop.classList.add(CLASS_NAME_FADE$4);\n        }\n        this._element = backdrop;\n      }\n      return this._element;\n    }\n    _configAfterMerge(config) {\n      // use getElement() with the default \"body\" to get a fresh Element on each instantiation\n      config.rootElement = getElement(config.rootElement);\n      return config;\n    }\n    _append() {\n      if (this._isAppended) {\n        return;\n      }\n      const element = this._getElement();\n      this._config.rootElement.append(element);\n      EventHandler.on(element, EVENT_MOUSEDOWN, () => {\n        execute(this._config.clickCallback);\n      });\n      this._isAppended = true;\n    }\n    _emulateAnimation(callback) {\n      executeAfterTransition(callback, this._getElement(), this._config.isAnimated);\n    }\n  }\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap util/focustrap.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME$8 = 'focustrap';\n  const DATA_KEY$5 = 'bs.focustrap';\n  const EVENT_KEY$5 = `.${DATA_KEY$5}`;\n  const EVENT_FOCUSIN$2 = `focusin${EVENT_KEY$5}`;\n  const EVENT_KEYDOWN_TAB = `keydown.tab${EVENT_KEY$5}`;\n  const TAB_KEY = 'Tab';\n  const TAB_NAV_FORWARD = 'forward';\n  const TAB_NAV_BACKWARD = 'backward';\n  const Default$7 = {\n    autofocus: true,\n    trapElement: null // The element to trap focus inside of\n  };\n  const DefaultType$7 = {\n    autofocus: 'boolean',\n    trapElement: 'element'\n  };\n\n  /**\n   * Class definition\n   */\n\n  class FocusTrap extends Config {\n    constructor(config) {\n      super();\n      this._config = this._getConfig(config);\n      this._isActive = false;\n      this._lastTabNavDirection = null;\n    }\n\n    // Getters\n    static get Default() {\n      return Default$7;\n    }\n    static get DefaultType() {\n      return DefaultType$7;\n    }\n    static get NAME() {\n      return NAME$8;\n    }\n\n    // Public\n    activate() {\n      if (this._isActive) {\n        return;\n      }\n      if (this._config.autofocus) {\n        this._config.trapElement.focus();\n      }\n      EventHandler.off(document, EVENT_KEY$5); // guard against infinite focus loop\n      EventHandler.on(document, EVENT_FOCUSIN$2, event => this._handleFocusin(event));\n      EventHandler.on(document, EVENT_KEYDOWN_TAB, event => this._handleKeydown(event));\n      this._isActive = true;\n    }\n    deactivate() {\n      if (!this._isActive) {\n        return;\n      }\n      this._isActive = false;\n      EventHandler.off(document, EVENT_KEY$5);\n    }\n\n    // Private\n    _handleFocusin(event) {\n      const {\n        trapElement\n      } = this._config;\n      if (event.target === document || event.target === trapElement || trapElement.contains(event.target)) {\n        return;\n      }\n      const elements = SelectorEngine.focusableChildren(trapElement);\n      if (elements.length === 0) {\n        trapElement.focus();\n      } else if (this._lastTabNavDirection === TAB_NAV_BACKWARD) {\n        elements[elements.length - 1].focus();\n      } else {\n        elements[0].focus();\n      }\n    }\n    _handleKeydown(event) {\n      if (event.key !== TAB_KEY) {\n        return;\n      }\n      this._lastTabNavDirection = event.shiftKey ? TAB_NAV_BACKWARD : TAB_NAV_FORWARD;\n    }\n  }\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap util/scrollBar.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const SELECTOR_FIXED_CONTENT = '.fixed-top, .fixed-bottom, .is-fixed, .sticky-top';\n  const SELECTOR_STICKY_CONTENT = '.sticky-top';\n  const PROPERTY_PADDING = 'padding-right';\n  const PROPERTY_MARGIN = 'margin-right';\n\n  /**\n   * Class definition\n   */\n\n  class ScrollBarHelper {\n    constructor() {\n      this._element = document.body;\n    }\n\n    // Public\n    getWidth() {\n      // https://developer.mozilla.org/en-US/docs/Web/API/Window/innerWidth#usage_notes\n      const documentWidth = document.documentElement.clientWidth;\n      return Math.abs(window.innerWidth - documentWidth);\n    }\n    hide() {\n      const width = this.getWidth();\n      this._disableOverFlow();\n      // give padding to element to balance the hidden scrollbar width\n      this._setElementAttributes(this._element, PROPERTY_PADDING, calculatedValue => calculatedValue + width);\n      // trick: We adjust positive paddingRight and negative marginRight to sticky-top elements to keep showing fullwidth\n      this._setElementAttributes(SELECTOR_FIXED_CONTENT, PROPERTY_PADDING, calculatedValue => calculatedValue + width);\n      this._setElementAttributes(SELECTOR_STICKY_CONTENT, PROPERTY_MARGIN, calculatedValue => calculatedValue - width);\n    }\n    reset() {\n      this._resetElementAttributes(this._element, 'overflow');\n      this._resetElementAttributes(this._element, PROPERTY_PADDING);\n      this._resetElementAttributes(SELECTOR_FIXED_CONTENT, PROPERTY_PADDING);\n      this._resetElementAttributes(SELECTOR_STICKY_CONTENT, PROPERTY_MARGIN);\n    }\n    isOverflowing() {\n      return this.getWidth() > 0;\n    }\n\n    // Private\n    _disableOverFlow() {\n      this._saveInitialAttribute(this._element, 'overflow');\n      this._element.style.overflow = 'hidden';\n    }\n    _setElementAttributes(selector, styleProperty, callback) {\n      const scrollbarWidth = this.getWidth();\n      const manipulationCallBack = element => {\n        if (element !== this._element && window.innerWidth > element.clientWidth + scrollbarWidth) {\n          return;\n        }\n        this._saveInitialAttribute(element, styleProperty);\n        const calculatedValue = window.getComputedStyle(element).getPropertyValue(styleProperty);\n        element.style.setProperty(styleProperty, `${callback(Number.parseFloat(calculatedValue))}px`);\n      };\n      this._applyManipulationCallback(selector, manipulationCallBack);\n    }\n    _saveInitialAttribute(element, styleProperty) {\n      const actualValue = element.style.getPropertyValue(styleProperty);\n      if (actualValue) {\n        Manipulator.setDataAttribute(element, styleProperty, actualValue);\n      }\n    }\n    _resetElementAttributes(selector, styleProperty) {\n      const manipulationCallBack = element => {\n        const value = Manipulator.getDataAttribute(element, styleProperty);\n        // We only want to remove the property if the value is `null`; the value can also be zero\n        if (value === null) {\n          element.style.removeProperty(styleProperty);\n          return;\n        }\n        Manipulator.removeDataAttribute(element, styleProperty);\n        element.style.setProperty(styleProperty, value);\n      };\n      this._applyManipulationCallback(selector, manipulationCallBack);\n    }\n    _applyManipulationCallback(selector, callBack) {\n      if (isElement$1(selector)) {\n        callBack(selector);\n        return;\n      }\n      for (const sel of SelectorEngine.find(selector, this._element)) {\n        callBack(sel);\n      }\n    }\n  }\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap modal.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME$7 = 'modal';\n  const DATA_KEY$4 = 'bs.modal';\n  const EVENT_KEY$4 = `.${DATA_KEY$4}`;\n  const DATA_API_KEY$2 = '.data-api';\n  const ESCAPE_KEY$1 = 'Escape';\n  const EVENT_HIDE$4 = `hide${EVENT_KEY$4}`;\n  const EVENT_HIDE_PREVENTED$1 = `hidePrevented${EVENT_KEY$4}`;\n  const EVENT_HIDDEN$4 = `hidden${EVENT_KEY$4}`;\n  const EVENT_SHOW$4 = `show${EVENT_KEY$4}`;\n  const EVENT_SHOWN$4 = `shown${EVENT_KEY$4}`;\n  const EVENT_RESIZE$1 = `resize${EVENT_KEY$4}`;\n  const EVENT_CLICK_DISMISS = `click.dismiss${EVENT_KEY$4}`;\n  const EVENT_MOUSEDOWN_DISMISS = `mousedown.dismiss${EVENT_KEY$4}`;\n  const EVENT_KEYDOWN_DISMISS$1 = `keydown.dismiss${EVENT_KEY$4}`;\n  const EVENT_CLICK_DATA_API$2 = `click${EVENT_KEY$4}${DATA_API_KEY$2}`;\n  const CLASS_NAME_OPEN = 'modal-open';\n  const CLASS_NAME_FADE$3 = 'fade';\n  const CLASS_NAME_SHOW$4 = 'show';\n  const CLASS_NAME_STATIC = 'modal-static';\n  const OPEN_SELECTOR$1 = '.modal.show';\n  const SELECTOR_DIALOG = '.modal-dialog';\n  const SELECTOR_MODAL_BODY = '.modal-body';\n  const SELECTOR_DATA_TOGGLE$2 = '[data-bs-toggle=\"modal\"]';\n  const Default$6 = {\n    backdrop: true,\n    focus: true,\n    keyboard: true\n  };\n  const DefaultType$6 = {\n    backdrop: '(boolean|string)',\n    focus: 'boolean',\n    keyboard: 'boolean'\n  };\n\n  /**\n   * Class definition\n   */\n\n  class Modal extends BaseComponent {\n    constructor(element, config) {\n      super(element, config);\n      this._dialog = SelectorEngine.findOne(SELECTOR_DIALOG, this._element);\n      this._backdrop = this._initializeBackDrop();\n      this._focustrap = this._initializeFocusTrap();\n      this._isShown = false;\n      this._isTransitioning = false;\n      this._scrollBar = new ScrollBarHelper();\n      this._addEventListeners();\n    }\n\n    // Getters\n    static get Default() {\n      return Default$6;\n    }\n    static get DefaultType() {\n      return DefaultType$6;\n    }\n    static get NAME() {\n      return NAME$7;\n    }\n\n    // Public\n    toggle(relatedTarget) {\n      return this._isShown ? this.hide() : this.show(relatedTarget);\n    }\n    show(relatedTarget) {\n      if (this._isShown || this._isTransitioning) {\n        return;\n      }\n      const showEvent = EventHandler.trigger(this._element, EVENT_SHOW$4, {\n        relatedTarget\n      });\n      if (showEvent.defaultPrevented) {\n        return;\n      }\n      this._isShown = true;\n      this._isTransitioning = true;\n      this._scrollBar.hide();\n      document.body.classList.add(CLASS_NAME_OPEN);\n      this._adjustDialog();\n      this._backdrop.show(() => this._showElement(relatedTarget));\n    }\n    hide() {\n      if (!this._isShown || this._isTransitioning) {\n        return;\n      }\n      const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE$4);\n      if (hideEvent.defaultPrevented) {\n        return;\n      }\n      this._isShown = false;\n      this._isTransitioning = true;\n      this._focustrap.deactivate();\n      this._element.classList.remove(CLASS_NAME_SHOW$4);\n      this._queueCallback(() => this._hideModal(), this._element, this._isAnimated());\n    }\n    dispose() {\n      EventHandler.off(window, EVENT_KEY$4);\n      EventHandler.off(this._dialog, EVENT_KEY$4);\n      this._backdrop.dispose();\n      this._focustrap.deactivate();\n      super.dispose();\n    }\n    handleUpdate() {\n      this._adjustDialog();\n    }\n\n    // Private\n    _initializeBackDrop() {\n      return new Backdrop({\n        isVisible: Boolean(this._config.backdrop),\n        // 'static' option will be translated to true, and booleans will keep their value,\n        isAnimated: this._isAnimated()\n      });\n    }\n    _initializeFocusTrap() {\n      return new FocusTrap({\n        trapElement: this._element\n      });\n    }\n    _showElement(relatedTarget) {\n      // try to append dynamic modal\n      if (!document.body.contains(this._element)) {\n        document.body.append(this._element);\n      }\n      this._element.style.display = 'block';\n      this._element.removeAttribute('aria-hidden');\n      this._element.setAttribute('aria-modal', true);\n      this._element.setAttribute('role', 'dialog');\n      this._element.scrollTop = 0;\n      const modalBody = SelectorEngine.findOne(SELECTOR_MODAL_BODY, this._dialog);\n      if (modalBody) {\n        modalBody.scrollTop = 0;\n      }\n      reflow(this._element);\n      this._element.classList.add(CLASS_NAME_SHOW$4);\n      const transitionComplete = () => {\n        if (this._config.focus) {\n          this._focustrap.activate();\n        }\n        this._isTransitioning = false;\n        EventHandler.trigger(this._element, EVENT_SHOWN$4, {\n          relatedTarget\n        });\n      };\n      this._queueCallback(transitionComplete, this._dialog, this._isAnimated());\n    }\n    _addEventListeners() {\n      EventHandler.on(this._element, EVENT_KEYDOWN_DISMISS$1, event => {\n        if (event.key !== ESCAPE_KEY$1) {\n          return;\n        }\n        if (this._config.keyboard) {\n          this.hide();\n          return;\n        }\n        this._triggerBackdropTransition();\n      });\n      EventHandler.on(window, EVENT_RESIZE$1, () => {\n        if (this._isShown && !this._isTransitioning) {\n          this._adjustDialog();\n        }\n      });\n      EventHandler.on(this._element, EVENT_MOUSEDOWN_DISMISS, event => {\n        // a bad trick to segregate clicks that may start inside dialog but end outside, and avoid listen to scrollbar clicks\n        EventHandler.one(this._element, EVENT_CLICK_DISMISS, event2 => {\n          if (this._element !== event.target || this._element !== event2.target) {\n            return;\n          }\n          if (this._config.backdrop === 'static') {\n            this._triggerBackdropTransition();\n            return;\n          }\n          if (this._config.backdrop) {\n            this.hide();\n          }\n        });\n      });\n    }\n    _hideModal() {\n      this._element.style.display = 'none';\n      this._element.setAttribute('aria-hidden', true);\n      this._element.removeAttribute('aria-modal');\n      this._element.removeAttribute('role');\n      this._isTransitioning = false;\n      this._backdrop.hide(() => {\n        document.body.classList.remove(CLASS_NAME_OPEN);\n        this._resetAdjustments();\n        this._scrollBar.reset();\n        EventHandler.trigger(this._element, EVENT_HIDDEN$4);\n      });\n    }\n    _isAnimated() {\n      return this._element.classList.contains(CLASS_NAME_FADE$3);\n    }\n    _triggerBackdropTransition() {\n      const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED$1);\n      if (hideEvent.defaultPrevented) {\n        return;\n      }\n      const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight;\n      const initialOverflowY = this._element.style.overflowY;\n      // return if the following background transition hasn't yet completed\n      if (initialOverflowY === 'hidden' || this._element.classList.contains(CLASS_NAME_STATIC)) {\n        return;\n      }\n      if (!isModalOverflowing) {\n        this._element.style.overflowY = 'hidden';\n      }\n      this._element.classList.add(CLASS_NAME_STATIC);\n      this._queueCallback(() => {\n        this._element.classList.remove(CLASS_NAME_STATIC);\n        this._queueCallback(() => {\n          this._element.style.overflowY = initialOverflowY;\n        }, this._dialog);\n      }, this._dialog);\n      this._element.focus();\n    }\n\n    /**\n     * The following methods are used to handle overflowing modals\n     */\n\n    _adjustDialog() {\n      const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight;\n      const scrollbarWidth = this._scrollBar.getWidth();\n      const isBodyOverflowing = scrollbarWidth > 0;\n      if (isBodyOverflowing && !isModalOverflowing) {\n        const property = isRTL() ? 'paddingLeft' : 'paddingRight';\n        this._element.style[property] = `${scrollbarWidth}px`;\n      }\n      if (!isBodyOverflowing && isModalOverflowing) {\n        const property = isRTL() ? 'paddingRight' : 'paddingLeft';\n        this._element.style[property] = `${scrollbarWidth}px`;\n      }\n    }\n    _resetAdjustments() {\n      this._element.style.paddingLeft = '';\n      this._element.style.paddingRight = '';\n    }\n\n    // Static\n    static jQueryInterface(config, relatedTarget) {\n      return this.each(function () {\n        const data = Modal.getOrCreateInstance(this, config);\n        if (typeof config !== 'string') {\n          return;\n        }\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n        data[config](relatedTarget);\n      });\n    }\n  }\n\n  /**\n   * Data API implementation\n   */\n\n  EventHandler.on(document, EVENT_CLICK_DATA_API$2, SELECTOR_DATA_TOGGLE$2, function (event) {\n    const target = SelectorEngine.getElementFromSelector(this);\n    if (['A', 'AREA'].includes(this.tagName)) {\n      event.preventDefault();\n    }\n    EventHandler.one(target, EVENT_SHOW$4, showEvent => {\n      if (showEvent.defaultPrevented) {\n        // only register focus restorer if modal will actually get shown\n        return;\n      }\n      EventHandler.one(target, EVENT_HIDDEN$4, () => {\n        if (isVisible(this)) {\n          this.focus();\n        }\n      });\n    });\n\n    // avoid conflict when clicking modal toggler while another one is open\n    const alreadyOpen = SelectorEngine.findOne(OPEN_SELECTOR$1);\n    if (alreadyOpen) {\n      Modal.getInstance(alreadyOpen).hide();\n    }\n    const data = Modal.getOrCreateInstance(target);\n    data.toggle(this);\n  });\n  enableDismissTrigger(Modal);\n\n  /**\n   * jQuery\n   */\n\n  defineJQueryPlugin(Modal);\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap offcanvas.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME$6 = 'offcanvas';\n  const DATA_KEY$3 = 'bs.offcanvas';\n  const EVENT_KEY$3 = `.${DATA_KEY$3}`;\n  const DATA_API_KEY$1 = '.data-api';\n  const EVENT_LOAD_DATA_API$2 = `load${EVENT_KEY$3}${DATA_API_KEY$1}`;\n  const ESCAPE_KEY = 'Escape';\n  const CLASS_NAME_SHOW$3 = 'show';\n  const CLASS_NAME_SHOWING$1 = 'showing';\n  const CLASS_NAME_HIDING = 'hiding';\n  const CLASS_NAME_BACKDROP = 'offcanvas-backdrop';\n  const OPEN_SELECTOR = '.offcanvas.show';\n  const EVENT_SHOW$3 = `show${EVENT_KEY$3}`;\n  const EVENT_SHOWN$3 = `shown${EVENT_KEY$3}`;\n  const EVENT_HIDE$3 = `hide${EVENT_KEY$3}`;\n  const EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY$3}`;\n  const EVENT_HIDDEN$3 = `hidden${EVENT_KEY$3}`;\n  const EVENT_RESIZE = `resize${EVENT_KEY$3}`;\n  const EVENT_CLICK_DATA_API$1 = `click${EVENT_KEY$3}${DATA_API_KEY$1}`;\n  const EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY$3}`;\n  const SELECTOR_DATA_TOGGLE$1 = '[data-bs-toggle=\"offcanvas\"]';\n  const Default$5 = {\n    backdrop: true,\n    keyboard: true,\n    scroll: false\n  };\n  const DefaultType$5 = {\n    backdrop: '(boolean|string)',\n    keyboard: 'boolean',\n    scroll: 'boolean'\n  };\n\n  /**\n   * Class definition\n   */\n\n  class Offcanvas extends BaseComponent {\n    constructor(element, config) {\n      super(element, config);\n      this._isShown = false;\n      this._backdrop = this._initializeBackDrop();\n      this._focustrap = this._initializeFocusTrap();\n      this._addEventListeners();\n    }\n\n    // Getters\n    static get Default() {\n      return Default$5;\n    }\n    static get DefaultType() {\n      return DefaultType$5;\n    }\n    static get NAME() {\n      return NAME$6;\n    }\n\n    // Public\n    toggle(relatedTarget) {\n      return this._isShown ? this.hide() : this.show(relatedTarget);\n    }\n    show(relatedTarget) {\n      if (this._isShown) {\n        return;\n      }\n      const showEvent = EventHandler.trigger(this._element, EVENT_SHOW$3, {\n        relatedTarget\n      });\n      if (showEvent.defaultPrevented) {\n        return;\n      }\n      this._isShown = true;\n      this._backdrop.show();\n      if (!this._config.scroll) {\n        new ScrollBarHelper().hide();\n      }\n      this._element.setAttribute('aria-modal', true);\n      this._element.setAttribute('role', 'dialog');\n      this._element.classList.add(CLASS_NAME_SHOWING$1);\n      const completeCallBack = () => {\n        if (!this._config.scroll || this._config.backdrop) {\n          this._focustrap.activate();\n        }\n        this._element.classList.add(CLASS_NAME_SHOW$3);\n        this._element.classList.remove(CLASS_NAME_SHOWING$1);\n        EventHandler.trigger(this._element, EVENT_SHOWN$3, {\n          relatedTarget\n        });\n      };\n      this._queueCallback(completeCallBack, this._element, true);\n    }\n    hide() {\n      if (!this._isShown) {\n        return;\n      }\n      const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE$3);\n      if (hideEvent.defaultPrevented) {\n        return;\n      }\n      this._focustrap.deactivate();\n      this._element.blur();\n      this._isShown = false;\n      this._element.classList.add(CLASS_NAME_HIDING);\n      this._backdrop.hide();\n      const completeCallback = () => {\n        this._element.classList.remove(CLASS_NAME_SHOW$3, CLASS_NAME_HIDING);\n        this._element.removeAttribute('aria-modal');\n        this._element.removeAttribute('role');\n        if (!this._config.scroll) {\n          new ScrollBarHelper().reset();\n        }\n        EventHandler.trigger(this._element, EVENT_HIDDEN$3);\n      };\n      this._queueCallback(completeCallback, this._element, true);\n    }\n    dispose() {\n      this._backdrop.dispose();\n      this._focustrap.deactivate();\n      super.dispose();\n    }\n\n    // Private\n    _initializeBackDrop() {\n      const clickCallback = () => {\n        if (this._config.backdrop === 'static') {\n          EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED);\n          return;\n        }\n        this.hide();\n      };\n\n      // 'static' option will be translated to true, and booleans will keep their value\n      const isVisible = Boolean(this._config.backdrop);\n      return new Backdrop({\n        className: CLASS_NAME_BACKDROP,\n        isVisible,\n        isAnimated: true,\n        rootElement: this._element.parentNode,\n        clickCallback: isVisible ? clickCallback : null\n      });\n    }\n    _initializeFocusTrap() {\n      return new FocusTrap({\n        trapElement: this._element\n      });\n    }\n    _addEventListeners() {\n      EventHandler.on(this._element, EVENT_KEYDOWN_DISMISS, event => {\n        if (event.key !== ESCAPE_KEY) {\n          return;\n        }\n        if (this._config.keyboard) {\n          this.hide();\n          return;\n        }\n        EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED);\n      });\n    }\n\n    // Static\n    static jQueryInterface(config) {\n      return this.each(function () {\n        const data = Offcanvas.getOrCreateInstance(this, config);\n        if (typeof config !== 'string') {\n          return;\n        }\n        if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n        data[config](this);\n      });\n    }\n  }\n\n  /**\n   * Data API implementation\n   */\n\n  EventHandler.on(document, EVENT_CLICK_DATA_API$1, SELECTOR_DATA_TOGGLE$1, function (event) {\n    const target = SelectorEngine.getElementFromSelector(this);\n    if (['A', 'AREA'].includes(this.tagName)) {\n      event.preventDefault();\n    }\n    if (isDisabled(this)) {\n      return;\n    }\n    EventHandler.one(target, EVENT_HIDDEN$3, () => {\n      // focus on trigger when it is closed\n      if (isVisible(this)) {\n        this.focus();\n      }\n    });\n\n    // avoid conflict when clicking a toggler of an offcanvas, while another is open\n    const alreadyOpen = SelectorEngine.findOne(OPEN_SELECTOR);\n    if (alreadyOpen && alreadyOpen !== target) {\n      Offcanvas.getInstance(alreadyOpen).hide();\n    }\n    const data = Offcanvas.getOrCreateInstance(target);\n    data.toggle(this);\n  });\n  EventHandler.on(window, EVENT_LOAD_DATA_API$2, () => {\n    for (const selector of SelectorEngine.find(OPEN_SELECTOR)) {\n      Offcanvas.getOrCreateInstance(selector).show();\n    }\n  });\n  EventHandler.on(window, EVENT_RESIZE, () => {\n    for (const element of SelectorEngine.find('[aria-modal][class*=show][class*=offcanvas-]')) {\n      if (getComputedStyle(element).position !== 'fixed') {\n        Offcanvas.getOrCreateInstance(element).hide();\n      }\n    }\n  });\n  enableDismissTrigger(Offcanvas);\n\n  /**\n   * jQuery\n   */\n\n  defineJQueryPlugin(Offcanvas);\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap util/sanitizer.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n  // js-docs-start allow-list\n  const ARIA_ATTRIBUTE_PATTERN = /^aria-[\\w-]*$/i;\n  const DefaultAllowlist = {\n    // Global attributes allowed on any supplied element below.\n    '*': ['class', 'dir', 'id', 'lang', 'role', ARIA_ATTRIBUTE_PATTERN],\n    a: ['target', 'href', 'title', 'rel'],\n    area: [],\n    b: [],\n    br: [],\n    col: [],\n    code: [],\n    dd: [],\n    div: [],\n    dl: [],\n    dt: [],\n    em: [],\n    hr: [],\n    h1: [],\n    h2: [],\n    h3: [],\n    h4: [],\n    h5: [],\n    h6: [],\n    i: [],\n    img: ['src', 'srcset', 'alt', 'title', 'width', 'height'],\n    li: [],\n    ol: [],\n    p: [],\n    pre: [],\n    s: [],\n    small: [],\n    span: [],\n    sub: [],\n    sup: [],\n    strong: [],\n    u: [],\n    ul: []\n  };\n  // js-docs-end allow-list\n\n  const uriAttributes = new Set(['background', 'cite', 'href', 'itemtype', 'longdesc', 'poster', 'src', 'xlink:href']);\n\n  /**\n   * A pattern that recognizes URLs that are safe wrt. XSS in URL navigation\n   * contexts.\n   *\n   * Shout-out to Angular https://github.com/angular/angular/blob/15.2.8/packages/core/src/sanitization/url_sanitizer.ts#L38\n   */\n  // eslint-disable-next-line unicorn/better-regex\n  const SAFE_URL_PATTERN = /^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i;\n  const allowedAttribute = (attribute, allowedAttributeList) => {\n    const attributeName = attribute.nodeName.toLowerCase();\n    if (allowedAttributeList.includes(attributeName)) {\n      if (uriAttributes.has(attributeName)) {\n        return Boolean(SAFE_URL_PATTERN.test(attribute.nodeValue));\n      }\n      return true;\n    }\n\n    // Check if a regular expression validates the attribute.\n    return allowedAttributeList.filter(attributeRegex => attributeRegex instanceof RegExp).some(regex => regex.test(attributeName));\n  };\n  function sanitizeHtml(unsafeHtml, allowList, sanitizeFunction) {\n    if (!unsafeHtml.length) {\n      return unsafeHtml;\n    }\n    if (sanitizeFunction && typeof sanitizeFunction === 'function') {\n      return sanitizeFunction(unsafeHtml);\n    }\n    const domParser = new window.DOMParser();\n    const createdDocument = domParser.parseFromString(unsafeHtml, 'text/html');\n    const elements = [].concat(...createdDocument.body.querySelectorAll('*'));\n    for (const element of elements) {\n      const elementName = element.nodeName.toLowerCase();\n      if (!Object.keys(allowList).includes(elementName)) {\n        element.remove();\n        continue;\n      }\n      const attributeList = [].concat(...element.attributes);\n      const allowedAttributes = [].concat(allowList['*'] || [], allowList[elementName] || []);\n      for (const attribute of attributeList) {\n        if (!allowedAttribute(attribute, allowedAttributes)) {\n          element.removeAttribute(attribute.nodeName);\n        }\n      }\n    }\n    return createdDocument.body.innerHTML;\n  }\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap util/template-factory.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME$5 = 'TemplateFactory';\n  const Default$4 = {\n    allowList: DefaultAllowlist,\n    content: {},\n    // { selector : text ,  selector2 : text2 , }\n    extraClass: '',\n    html: false,\n    sanitize: true,\n    sanitizeFn: null,\n    template: '<div></div>'\n  };\n  const DefaultType$4 = {\n    allowList: 'object',\n    content: 'object',\n    extraClass: '(string|function)',\n    html: 'boolean',\n    sanitize: 'boolean',\n    sanitizeFn: '(null|function)',\n    template: 'string'\n  };\n  const DefaultContentType = {\n    entry: '(string|element|function|null)',\n    selector: '(string|element)'\n  };\n\n  /**\n   * Class definition\n   */\n\n  class TemplateFactory extends Config {\n    constructor(config) {\n      super();\n      this._config = this._getConfig(config);\n    }\n\n    // Getters\n    static get Default() {\n      return Default$4;\n    }\n    static get DefaultType() {\n      return DefaultType$4;\n    }\n    static get NAME() {\n      return NAME$5;\n    }\n\n    // Public\n    getContent() {\n      return Object.values(this._config.content).map(config => this._resolvePossibleFunction(config)).filter(Boolean);\n    }\n    hasContent() {\n      return this.getContent().length > 0;\n    }\n    changeContent(content) {\n      this._checkContent(content);\n      this._config.content = {\n        ...this._config.content,\n        ...content\n      };\n      return this;\n    }\n    toHtml() {\n      const templateWrapper = document.createElement('div');\n      templateWrapper.innerHTML = this._maybeSanitize(this._config.template);\n      for (const [selector, text] of Object.entries(this._config.content)) {\n        this._setContent(templateWrapper, text, selector);\n      }\n      const template = templateWrapper.children[0];\n      const extraClass = this._resolvePossibleFunction(this._config.extraClass);\n      if (extraClass) {\n        template.classList.add(...extraClass.split(' '));\n      }\n      return template;\n    }\n\n    // Private\n    _typeCheckConfig(config) {\n      super._typeCheckConfig(config);\n      this._checkContent(config.content);\n    }\n    _checkContent(arg) {\n      for (const [selector, content] of Object.entries(arg)) {\n        super._typeCheckConfig({\n          selector,\n          entry: content\n        }, DefaultContentType);\n      }\n    }\n    _setContent(template, content, selector) {\n      const templateElement = SelectorEngine.findOne(selector, template);\n      if (!templateElement) {\n        return;\n      }\n      content = this._resolvePossibleFunction(content);\n      if (!content) {\n        templateElement.remove();\n        return;\n      }\n      if (isElement$1(content)) {\n        this._putElementInTemplate(getElement(content), templateElement);\n        return;\n      }\n      if (this._config.html) {\n        templateElement.innerHTML = this._maybeSanitize(content);\n        return;\n      }\n      templateElement.textContent = content;\n    }\n    _maybeSanitize(arg) {\n      return this._config.sanitize ? sanitizeHtml(arg, this._config.allowList, this._config.sanitizeFn) : arg;\n    }\n    _resolvePossibleFunction(arg) {\n      return execute(arg, [this]);\n    }\n    _putElementInTemplate(element, templateElement) {\n      if (this._config.html) {\n        templateElement.innerHTML = '';\n        templateElement.append(element);\n        return;\n      }\n      templateElement.textContent = element.textContent;\n    }\n  }\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap tooltip.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME$4 = 'tooltip';\n  const DISALLOWED_ATTRIBUTES = new Set(['sanitize', 'allowList', 'sanitizeFn']);\n  const CLASS_NAME_FADE$2 = 'fade';\n  const CLASS_NAME_MODAL = 'modal';\n  const CLASS_NAME_SHOW$2 = 'show';\n  const SELECTOR_TOOLTIP_INNER = '.tooltip-inner';\n  const SELECTOR_MODAL = `.${CLASS_NAME_MODAL}`;\n  const EVENT_MODAL_HIDE = 'hide.bs.modal';\n  const TRIGGER_HOVER = 'hover';\n  const TRIGGER_FOCUS = 'focus';\n  const TRIGGER_CLICK = 'click';\n  const TRIGGER_MANUAL = 'manual';\n  const EVENT_HIDE$2 = 'hide';\n  const EVENT_HIDDEN$2 = 'hidden';\n  const EVENT_SHOW$2 = 'show';\n  const EVENT_SHOWN$2 = 'shown';\n  const EVENT_INSERTED = 'inserted';\n  const EVENT_CLICK$1 = 'click';\n  const EVENT_FOCUSIN$1 = 'focusin';\n  const EVENT_FOCUSOUT$1 = 'focusout';\n  const EVENT_MOUSEENTER = 'mouseenter';\n  const EVENT_MOUSELEAVE = 'mouseleave';\n  const AttachmentMap = {\n    AUTO: 'auto',\n    TOP: 'top',\n    RIGHT: isRTL() ? 'left' : 'right',\n    BOTTOM: 'bottom',\n    LEFT: isRTL() ? 'right' : 'left'\n  };\n  const Default$3 = {\n    allowList: DefaultAllowlist,\n    animation: true,\n    boundary: 'clippingParents',\n    container: false,\n    customClass: '',\n    delay: 0,\n    fallbackPlacements: ['top', 'right', 'bottom', 'left'],\n    html: false,\n    offset: [0, 6],\n    placement: 'top',\n    popperConfig: null,\n    sanitize: true,\n    sanitizeFn: null,\n    selector: false,\n    template: '<div class=\"tooltip\" role=\"tooltip\">' + '<div class=\"tooltip-arrow\"></div>' + '<div class=\"tooltip-inner\"></div>' + '</div>',\n    title: '',\n    trigger: 'hover focus'\n  };\n  const DefaultType$3 = {\n    allowList: 'object',\n    animation: 'boolean',\n    boundary: '(string|element)',\n    container: '(string|element|boolean)',\n    customClass: '(string|function)',\n    delay: '(number|object)',\n    fallbackPlacements: 'array',\n    html: 'boolean',\n    offset: '(array|string|function)',\n    placement: '(string|function)',\n    popperConfig: '(null|object|function)',\n    sanitize: 'boolean',\n    sanitizeFn: '(null|function)',\n    selector: '(string|boolean)',\n    template: 'string',\n    title: '(string|element|function)',\n    trigger: 'string'\n  };\n\n  /**\n   * Class definition\n   */\n\n  class Tooltip extends BaseComponent {\n    constructor(element, config) {\n      if (typeof Popper === 'undefined') {\n        throw new TypeError('Bootstrap\\'s tooltips require Popper (https://popper.js.org)');\n      }\n      super(element, config);\n\n      // Private\n      this._isEnabled = true;\n      this._timeout = 0;\n      this._isHovered = null;\n      this._activeTrigger = {};\n      this._popper = null;\n      this._templateFactory = null;\n      this._newContent = null;\n\n      // Protected\n      this.tip = null;\n      this._setListeners();\n      if (!this._config.selector) {\n        this._fixTitle();\n      }\n    }\n\n    // Getters\n    static get Default() {\n      return Default$3;\n    }\n    static get DefaultType() {\n      return DefaultType$3;\n    }\n    static get NAME() {\n      return NAME$4;\n    }\n\n    // Public\n    enable() {\n      this._isEnabled = true;\n    }\n    disable() {\n      this._isEnabled = false;\n    }\n    toggleEnabled() {\n      this._isEnabled = !this._isEnabled;\n    }\n    toggle() {\n      if (!this._isEnabled) {\n        return;\n      }\n      this._activeTrigger.click = !this._activeTrigger.click;\n      if (this._isShown()) {\n        this._leave();\n        return;\n      }\n      this._enter();\n    }\n    dispose() {\n      clearTimeout(this._timeout);\n      EventHandler.off(this._element.closest(SELECTOR_MODAL), EVENT_MODAL_HIDE, this._hideModalHandler);\n      if (this._element.getAttribute('data-bs-original-title')) {\n        this._element.setAttribute('title', this._element.getAttribute('data-bs-original-title'));\n      }\n      this._disposePopper();\n      super.dispose();\n    }\n    show() {\n      if (this._element.style.display === 'none') {\n        throw new Error('Please use show on visible elements');\n      }\n      if (!(this._isWithContent() && this._isEnabled)) {\n        return;\n      }\n      const showEvent = EventHandler.trigger(this._element, this.constructor.eventName(EVENT_SHOW$2));\n      const shadowRoot = findShadowRoot(this._element);\n      const isInTheDom = (shadowRoot || this._element.ownerDocument.documentElement).contains(this._element);\n      if (showEvent.defaultPrevented || !isInTheDom) {\n        return;\n      }\n\n      // TODO: v6 remove this or make it optional\n      this._disposePopper();\n      const tip = this._getTipElement();\n      this._element.setAttribute('aria-describedby', tip.getAttribute('id'));\n      const {\n        container\n      } = this._config;\n      if (!this._element.ownerDocument.documentElement.contains(this.tip)) {\n        container.append(tip);\n        EventHandler.trigger(this._element, this.constructor.eventName(EVENT_INSERTED));\n      }\n      this._popper = this._createPopper(tip);\n      tip.classList.add(CLASS_NAME_SHOW$2);\n\n      // If this is a touch-enabled device we add extra\n      // empty mouseover listeners to the body's immediate children;\n      // only needed because of broken event delegation on iOS\n      // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n      if ('ontouchstart' in document.documentElement) {\n        for (const element of [].concat(...document.body.children)) {\n          EventHandler.on(element, 'mouseover', noop);\n        }\n      }\n      const complete = () => {\n        EventHandler.trigger(this._element, this.constructor.eventName(EVENT_SHOWN$2));\n        if (this._isHovered === false) {\n          this._leave();\n        }\n        this._isHovered = false;\n      };\n      this._queueCallback(complete, this.tip, this._isAnimated());\n    }\n    hide() {\n      if (!this._isShown()) {\n        return;\n      }\n      const hideEvent = EventHandler.trigger(this._element, this.constructor.eventName(EVENT_HIDE$2));\n      if (hideEvent.defaultPrevented) {\n        return;\n      }\n      const tip = this._getTipElement();\n      tip.classList.remove(CLASS_NAME_SHOW$2);\n\n      // If this is a touch-enabled device we remove the extra\n      // empty mouseover listeners we added for iOS support\n      if ('ontouchstart' in document.documentElement) {\n        for (const element of [].concat(...document.body.children)) {\n          EventHandler.off(element, 'mouseover', noop);\n        }\n      }\n      this._activeTrigger[TRIGGER_CLICK] = false;\n      this._activeTrigger[TRIGGER_FOCUS] = false;\n      this._activeTrigger[TRIGGER_HOVER] = false;\n      this._isHovered = null; // it is a trick to support manual triggering\n\n      const complete = () => {\n        if (this._isWithActiveTrigger()) {\n          return;\n        }\n        if (!this._isHovered) {\n          this._disposePopper();\n        }\n        this._element.removeAttribute('aria-describedby');\n        EventHandler.trigger(this._element, this.constructor.eventName(EVENT_HIDDEN$2));\n      };\n      this._queueCallback(complete, this.tip, this._isAnimated());\n    }\n    update() {\n      if (this._popper) {\n        this._popper.update();\n      }\n    }\n\n    // Protected\n    _isWithContent() {\n      return Boolean(this._getTitle());\n    }\n    _getTipElement() {\n      if (!this.tip) {\n        this.tip = this._createTipElement(this._newContent || this._getContentForTemplate());\n      }\n      return this.tip;\n    }\n    _createTipElement(content) {\n      const tip = this._getTemplateFactory(content).toHtml();\n\n      // TODO: remove this check in v6\n      if (!tip) {\n        return null;\n      }\n      tip.classList.remove(CLASS_NAME_FADE$2, CLASS_NAME_SHOW$2);\n      // TODO: v6 the following can be achieved with CSS only\n      tip.classList.add(`bs-${this.constructor.NAME}-auto`);\n      const tipId = getUID(this.constructor.NAME).toString();\n      tip.setAttribute('id', tipId);\n      if (this._isAnimated()) {\n        tip.classList.add(CLASS_NAME_FADE$2);\n      }\n      return tip;\n    }\n    setContent(content) {\n      this._newContent = content;\n      if (this._isShown()) {\n        this._disposePopper();\n        this.show();\n      }\n    }\n    _getTemplateFactory(content) {\n      if (this._templateFactory) {\n        this._templateFactory.changeContent(content);\n      } else {\n        this._templateFactory = new TemplateFactory({\n          ...this._config,\n          // the `content` var has to be after `this._config`\n          // to override config.content in case of popover\n          content,\n          extraClass: this._resolvePossibleFunction(this._config.customClass)\n        });\n      }\n      return this._templateFactory;\n    }\n    _getContentForTemplate() {\n      return {\n        [SELECTOR_TOOLTIP_INNER]: this._getTitle()\n      };\n    }\n    _getTitle() {\n      return this._resolvePossibleFunction(this._config.title) || this._element.getAttribute('data-bs-original-title');\n    }\n\n    // Private\n    _initializeOnDelegatedTarget(event) {\n      return this.constructor.getOrCreateInstance(event.delegateTarget, this._getDelegateConfig());\n    }\n    _isAnimated() {\n      return this._config.animation || this.tip && this.tip.classList.contains(CLASS_NAME_FADE$2);\n    }\n    _isShown() {\n      return this.tip && this.tip.classList.contains(CLASS_NAME_SHOW$2);\n    }\n    _createPopper(tip) {\n      const placement = execute(this._config.placement, [this, tip, this._element]);\n      const attachment = AttachmentMap[placement.toUpperCase()];\n      return createPopper(this._element, tip, this._getPopperConfig(attachment));\n    }\n    _getOffset() {\n      const {\n        offset\n      } = this._config;\n      if (typeof offset === 'string') {\n        return offset.split(',').map(value => Number.parseInt(value, 10));\n      }\n      if (typeof offset === 'function') {\n        return popperData => offset(popperData, this._element);\n      }\n      return offset;\n    }\n    _resolvePossibleFunction(arg) {\n      return execute(arg, [this._element]);\n    }\n    _getPopperConfig(attachment) {\n      const defaultBsPopperConfig = {\n        placement: attachment,\n        modifiers: [{\n          name: 'flip',\n          options: {\n            fallbackPlacements: this._config.fallbackPlacements\n          }\n        }, {\n          name: 'offset',\n          options: {\n            offset: this._getOffset()\n          }\n        }, {\n          name: 'preventOverflow',\n          options: {\n            boundary: this._config.boundary\n          }\n        }, {\n          name: 'arrow',\n          options: {\n            element: `.${this.constructor.NAME}-arrow`\n          }\n        }, {\n          name: 'preSetPlacement',\n          enabled: true,\n          phase: 'beforeMain',\n          fn: data => {\n            // Pre-set Popper's placement attribute in order to read the arrow sizes properly.\n            // Otherwise, Popper mixes up the width and height dimensions since the initial arrow style is for top placement\n            this._getTipElement().setAttribute('data-popper-placement', data.state.placement);\n          }\n        }]\n      };\n      return {\n        ...defaultBsPopperConfig,\n        ...execute(this._config.popperConfig, [defaultBsPopperConfig])\n      };\n    }\n    _setListeners() {\n      const triggers = this._config.trigger.split(' ');\n      for (const trigger of triggers) {\n        if (trigger === 'click') {\n          EventHandler.on(this._element, this.constructor.eventName(EVENT_CLICK$1), this._config.selector, event => {\n            const context = this._initializeOnDelegatedTarget(event);\n            context.toggle();\n          });\n        } else if (trigger !== TRIGGER_MANUAL) {\n          const eventIn = trigger === TRIGGER_HOVER ? this.constructor.eventName(EVENT_MOUSEENTER) : this.constructor.eventName(EVENT_FOCUSIN$1);\n          const eventOut = trigger === TRIGGER_HOVER ? this.constructor.eventName(EVENT_MOUSELEAVE) : this.constructor.eventName(EVENT_FOCUSOUT$1);\n          EventHandler.on(this._element, eventIn, this._config.selector, event => {\n            const context = this._initializeOnDelegatedTarget(event);\n            context._activeTrigger[event.type === 'focusin' ? TRIGGER_FOCUS : TRIGGER_HOVER] = true;\n            context._enter();\n          });\n          EventHandler.on(this._element, eventOut, this._config.selector, event => {\n            const context = this._initializeOnDelegatedTarget(event);\n            context._activeTrigger[event.type === 'focusout' ? TRIGGER_FOCUS : TRIGGER_HOVER] = context._element.contains(event.relatedTarget);\n            context._leave();\n          });\n        }\n      }\n      this._hideModalHandler = () => {\n        if (this._element) {\n          this.hide();\n        }\n      };\n      EventHandler.on(this._element.closest(SELECTOR_MODAL), EVENT_MODAL_HIDE, this._hideModalHandler);\n    }\n    _fixTitle() {\n      const title = this._element.getAttribute('title');\n      if (!title) {\n        return;\n      }\n      if (!this._element.getAttribute('aria-label') && !this._element.textContent.trim()) {\n        this._element.setAttribute('aria-label', title);\n      }\n      this._element.setAttribute('data-bs-original-title', title); // DO NOT USE IT. Is only for backwards compatibility\n      this._element.removeAttribute('title');\n    }\n    _enter() {\n      if (this._isShown() || this._isHovered) {\n        this._isHovered = true;\n        return;\n      }\n      this._isHovered = true;\n      this._setTimeout(() => {\n        if (this._isHovered) {\n          this.show();\n        }\n      }, this._config.delay.show);\n    }\n    _leave() {\n      if (this._isWithActiveTrigger()) {\n        return;\n      }\n      this._isHovered = false;\n      this._setTimeout(() => {\n        if (!this._isHovered) {\n          this.hide();\n        }\n      }, this._config.delay.hide);\n    }\n    _setTimeout(handler, timeout) {\n      clearTimeout(this._timeout);\n      this._timeout = setTimeout(handler, timeout);\n    }\n    _isWithActiveTrigger() {\n      return Object.values(this._activeTrigger).includes(true);\n    }\n    _getConfig(config) {\n      const dataAttributes = Manipulator.getDataAttributes(this._element);\n      for (const dataAttribute of Object.keys(dataAttributes)) {\n        if (DISALLOWED_ATTRIBUTES.has(dataAttribute)) {\n          delete dataAttributes[dataAttribute];\n        }\n      }\n      config = {\n        ...dataAttributes,\n        ...(typeof config === 'object' && config ? config : {})\n      };\n      config = this._mergeConfigObj(config);\n      config = this._configAfterMerge(config);\n      this._typeCheckConfig(config);\n      return config;\n    }\n    _configAfterMerge(config) {\n      config.container = config.container === false ? document.body : getElement(config.container);\n      if (typeof config.delay === 'number') {\n        config.delay = {\n          show: config.delay,\n          hide: config.delay\n        };\n      }\n      if (typeof config.title === 'number') {\n        config.title = config.title.toString();\n      }\n      if (typeof config.content === 'number') {\n        config.content = config.content.toString();\n      }\n      return config;\n    }\n    _getDelegateConfig() {\n      const config = {};\n      for (const [key, value] of Object.entries(this._config)) {\n        if (this.constructor.Default[key] !== value) {\n          config[key] = value;\n        }\n      }\n      config.selector = false;\n      config.trigger = 'manual';\n\n      // In the future can be replaced with:\n      // const keysWithDifferentValues = Object.entries(this._config).filter(entry => this.constructor.Default[entry[0]] !== this._config[entry[0]])\n      // `Object.fromEntries(keysWithDifferentValues)`\n      return config;\n    }\n    _disposePopper() {\n      if (this._popper) {\n        this._popper.destroy();\n        this._popper = null;\n      }\n      if (this.tip) {\n        this.tip.remove();\n        this.tip = null;\n      }\n    }\n\n    // Static\n    static jQueryInterface(config) {\n      return this.each(function () {\n        const data = Tooltip.getOrCreateInstance(this, config);\n        if (typeof config !== 'string') {\n          return;\n        }\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n        data[config]();\n      });\n    }\n  }\n\n  /**\n   * jQuery\n   */\n\n  defineJQueryPlugin(Tooltip);\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap popover.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME$3 = 'popover';\n  const SELECTOR_TITLE = '.popover-header';\n  const SELECTOR_CONTENT = '.popover-body';\n  const Default$2 = {\n    ...Tooltip.Default,\n    content: '',\n    offset: [0, 8],\n    placement: 'right',\n    template: '<div class=\"popover\" role=\"tooltip\">' + '<div class=\"popover-arrow\"></div>' + '<h3 class=\"popover-header\"></h3>' + '<div class=\"popover-body\"></div>' + '</div>',\n    trigger: 'click'\n  };\n  const DefaultType$2 = {\n    ...Tooltip.DefaultType,\n    content: '(null|string|element|function)'\n  };\n\n  /**\n   * Class definition\n   */\n\n  class Popover extends Tooltip {\n    // Getters\n    static get Default() {\n      return Default$2;\n    }\n    static get DefaultType() {\n      return DefaultType$2;\n    }\n    static get NAME() {\n      return NAME$3;\n    }\n\n    // Overrides\n    _isWithContent() {\n      return this._getTitle() || this._getContent();\n    }\n\n    // Private\n    _getContentForTemplate() {\n      return {\n        [SELECTOR_TITLE]: this._getTitle(),\n        [SELECTOR_CONTENT]: this._getContent()\n      };\n    }\n    _getContent() {\n      return this._resolvePossibleFunction(this._config.content);\n    }\n\n    // Static\n    static jQueryInterface(config) {\n      return this.each(function () {\n        const data = Popover.getOrCreateInstance(this, config);\n        if (typeof config !== 'string') {\n          return;\n        }\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n        data[config]();\n      });\n    }\n  }\n\n  /**\n   * jQuery\n   */\n\n  defineJQueryPlugin(Popover);\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap scrollspy.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME$2 = 'scrollspy';\n  const DATA_KEY$2 = 'bs.scrollspy';\n  const EVENT_KEY$2 = `.${DATA_KEY$2}`;\n  const DATA_API_KEY = '.data-api';\n  const EVENT_ACTIVATE = `activate${EVENT_KEY$2}`;\n  const EVENT_CLICK = `click${EVENT_KEY$2}`;\n  const EVENT_LOAD_DATA_API$1 = `load${EVENT_KEY$2}${DATA_API_KEY}`;\n  const CLASS_NAME_DROPDOWN_ITEM = 'dropdown-item';\n  const CLASS_NAME_ACTIVE$1 = 'active';\n  const SELECTOR_DATA_SPY = '[data-bs-spy=\"scroll\"]';\n  const SELECTOR_TARGET_LINKS = '[href]';\n  const SELECTOR_NAV_LIST_GROUP = '.nav, .list-group';\n  const SELECTOR_NAV_LINKS = '.nav-link';\n  const SELECTOR_NAV_ITEMS = '.nav-item';\n  const SELECTOR_LIST_ITEMS = '.list-group-item';\n  const SELECTOR_LINK_ITEMS = `${SELECTOR_NAV_LINKS}, ${SELECTOR_NAV_ITEMS} > ${SELECTOR_NAV_LINKS}, ${SELECTOR_LIST_ITEMS}`;\n  const SELECTOR_DROPDOWN = '.dropdown';\n  const SELECTOR_DROPDOWN_TOGGLE$1 = '.dropdown-toggle';\n  const Default$1 = {\n    offset: null,\n    // TODO: v6 @deprecated, keep it for backwards compatibility reasons\n    rootMargin: '0px 0px -25%',\n    smoothScroll: false,\n    target: null,\n    threshold: [0.1, 0.5, 1]\n  };\n  const DefaultType$1 = {\n    offset: '(number|null)',\n    // TODO v6 @deprecated, keep it for backwards compatibility reasons\n    rootMargin: 'string',\n    smoothScroll: 'boolean',\n    target: 'element',\n    threshold: 'array'\n  };\n\n  /**\n   * Class definition\n   */\n\n  class ScrollSpy extends BaseComponent {\n    constructor(element, config) {\n      super(element, config);\n\n      // this._element is the observablesContainer and config.target the menu links wrapper\n      this._targetLinks = new Map();\n      this._observableSections = new Map();\n      this._rootElement = getComputedStyle(this._element).overflowY === 'visible' ? null : this._element;\n      this._activeTarget = null;\n      this._observer = null;\n      this._previousScrollData = {\n        visibleEntryTop: 0,\n        parentScrollTop: 0\n      };\n      this.refresh(); // initialize\n    }\n\n    // Getters\n    static get Default() {\n      return Default$1;\n    }\n    static get DefaultType() {\n      return DefaultType$1;\n    }\n    static get NAME() {\n      return NAME$2;\n    }\n\n    // Public\n    refresh() {\n      this._initializeTargetsAndObservables();\n      this._maybeEnableSmoothScroll();\n      if (this._observer) {\n        this._observer.disconnect();\n      } else {\n        this._observer = this._getNewObserver();\n      }\n      for (const section of this._observableSections.values()) {\n        this._observer.observe(section);\n      }\n    }\n    dispose() {\n      this._observer.disconnect();\n      super.dispose();\n    }\n\n    // Private\n    _configAfterMerge(config) {\n      // TODO: on v6 target should be given explicitly & remove the {target: 'ss-target'} case\n      config.target = getElement(config.target) || document.body;\n\n      // TODO: v6 Only for backwards compatibility reasons. Use rootMargin only\n      config.rootMargin = config.offset ? `${config.offset}px 0px -30%` : config.rootMargin;\n      if (typeof config.threshold === 'string') {\n        config.threshold = config.threshold.split(',').map(value => Number.parseFloat(value));\n      }\n      return config;\n    }\n    _maybeEnableSmoothScroll() {\n      if (!this._config.smoothScroll) {\n        return;\n      }\n\n      // unregister any previous listeners\n      EventHandler.off(this._config.target, EVENT_CLICK);\n      EventHandler.on(this._config.target, EVENT_CLICK, SELECTOR_TARGET_LINKS, event => {\n        const observableSection = this._observableSections.get(event.target.hash);\n        if (observableSection) {\n          event.preventDefault();\n          const root = this._rootElement || window;\n          const height = observableSection.offsetTop - this._element.offsetTop;\n          if (root.scrollTo) {\n            root.scrollTo({\n              top: height,\n              behavior: 'smooth'\n            });\n            return;\n          }\n\n          // Chrome 60 doesn't support `scrollTo`\n          root.scrollTop = height;\n        }\n      });\n    }\n    _getNewObserver() {\n      const options = {\n        root: this._rootElement,\n        threshold: this._config.threshold,\n        rootMargin: this._config.rootMargin\n      };\n      return new IntersectionObserver(entries => this._observerCallback(entries), options);\n    }\n\n    // The logic of selection\n    _observerCallback(entries) {\n      const targetElement = entry => this._targetLinks.get(`#${entry.target.id}`);\n      const activate = entry => {\n        this._previousScrollData.visibleEntryTop = entry.target.offsetTop;\n        this._process(targetElement(entry));\n      };\n      const parentScrollTop = (this._rootElement || document.documentElement).scrollTop;\n      const userScrollsDown = parentScrollTop >= this._previousScrollData.parentScrollTop;\n      this._previousScrollData.parentScrollTop = parentScrollTop;\n      for (const entry of entries) {\n        if (!entry.isIntersecting) {\n          this._activeTarget = null;\n          this._clearActiveClass(targetElement(entry));\n          continue;\n        }\n        const entryIsLowerThanPrevious = entry.target.offsetTop >= this._previousScrollData.visibleEntryTop;\n        // if we are scrolling down, pick the bigger offsetTop\n        if (userScrollsDown && entryIsLowerThanPrevious) {\n          activate(entry);\n          // if parent isn't scrolled, let's keep the first visible item, breaking the iteration\n          if (!parentScrollTop) {\n            return;\n          }\n          continue;\n        }\n\n        // if we are scrolling up, pick the smallest offsetTop\n        if (!userScrollsDown && !entryIsLowerThanPrevious) {\n          activate(entry);\n        }\n      }\n    }\n    _initializeTargetsAndObservables() {\n      this._targetLinks = new Map();\n      this._observableSections = new Map();\n      const targetLinks = SelectorEngine.find(SELECTOR_TARGET_LINKS, this._config.target);\n      for (const anchor of targetLinks) {\n        // ensure that the anchor has an id and is not disabled\n        if (!anchor.hash || isDisabled(anchor)) {\n          continue;\n        }\n        const observableSection = SelectorEngine.findOne(decodeURI(anchor.hash), this._element);\n\n        // ensure that the observableSection exists & is visible\n        if (isVisible(observableSection)) {\n          this._targetLinks.set(decodeURI(anchor.hash), anchor);\n          this._observableSections.set(anchor.hash, observableSection);\n        }\n      }\n    }\n    _process(target) {\n      if (this._activeTarget === target) {\n        return;\n      }\n      this._clearActiveClass(this._config.target);\n      this._activeTarget = target;\n      target.classList.add(CLASS_NAME_ACTIVE$1);\n      this._activateParents(target);\n      EventHandler.trigger(this._element, EVENT_ACTIVATE, {\n        relatedTarget: target\n      });\n    }\n    _activateParents(target) {\n      // Activate dropdown parents\n      if (target.classList.contains(CLASS_NAME_DROPDOWN_ITEM)) {\n        SelectorEngine.findOne(SELECTOR_DROPDOWN_TOGGLE$1, target.closest(SELECTOR_DROPDOWN)).classList.add(CLASS_NAME_ACTIVE$1);\n        return;\n      }\n      for (const listGroup of SelectorEngine.parents(target, SELECTOR_NAV_LIST_GROUP)) {\n        // Set triggered links parents as active\n        // With both <ul> and <nav> markup a parent is the previous sibling of any nav ancestor\n        for (const item of SelectorEngine.prev(listGroup, SELECTOR_LINK_ITEMS)) {\n          item.classList.add(CLASS_NAME_ACTIVE$1);\n        }\n      }\n    }\n    _clearActiveClass(parent) {\n      parent.classList.remove(CLASS_NAME_ACTIVE$1);\n      const activeNodes = SelectorEngine.find(`${SELECTOR_TARGET_LINKS}.${CLASS_NAME_ACTIVE$1}`, parent);\n      for (const node of activeNodes) {\n        node.classList.remove(CLASS_NAME_ACTIVE$1);\n      }\n    }\n\n    // Static\n    static jQueryInterface(config) {\n      return this.each(function () {\n        const data = ScrollSpy.getOrCreateInstance(this, config);\n        if (typeof config !== 'string') {\n          return;\n        }\n        if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n        data[config]();\n      });\n    }\n  }\n\n  /**\n   * Data API implementation\n   */\n\n  EventHandler.on(window, EVENT_LOAD_DATA_API$1, () => {\n    for (const spy of SelectorEngine.find(SELECTOR_DATA_SPY)) {\n      ScrollSpy.getOrCreateInstance(spy);\n    }\n  });\n\n  /**\n   * jQuery\n   */\n\n  defineJQueryPlugin(ScrollSpy);\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap tab.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME$1 = 'tab';\n  const DATA_KEY$1 = 'bs.tab';\n  const EVENT_KEY$1 = `.${DATA_KEY$1}`;\n  const EVENT_HIDE$1 = `hide${EVENT_KEY$1}`;\n  const EVENT_HIDDEN$1 = `hidden${EVENT_KEY$1}`;\n  const EVENT_SHOW$1 = `show${EVENT_KEY$1}`;\n  const EVENT_SHOWN$1 = `shown${EVENT_KEY$1}`;\n  const EVENT_CLICK_DATA_API = `click${EVENT_KEY$1}`;\n  const EVENT_KEYDOWN = `keydown${EVENT_KEY$1}`;\n  const EVENT_LOAD_DATA_API = `load${EVENT_KEY$1}`;\n  const ARROW_LEFT_KEY = 'ArrowLeft';\n  const ARROW_RIGHT_KEY = 'ArrowRight';\n  const ARROW_UP_KEY = 'ArrowUp';\n  const ARROW_DOWN_KEY = 'ArrowDown';\n  const HOME_KEY = 'Home';\n  const END_KEY = 'End';\n  const CLASS_NAME_ACTIVE = 'active';\n  const CLASS_NAME_FADE$1 = 'fade';\n  const CLASS_NAME_SHOW$1 = 'show';\n  const CLASS_DROPDOWN = 'dropdown';\n  const SELECTOR_DROPDOWN_TOGGLE = '.dropdown-toggle';\n  const SELECTOR_DROPDOWN_MENU = '.dropdown-menu';\n  const NOT_SELECTOR_DROPDOWN_TOGGLE = `:not(${SELECTOR_DROPDOWN_TOGGLE})`;\n  const SELECTOR_TAB_PANEL = '.list-group, .nav, [role=\"tablist\"]';\n  const SELECTOR_OUTER = '.nav-item, .list-group-item';\n  const SELECTOR_INNER = `.nav-link${NOT_SELECTOR_DROPDOWN_TOGGLE}, .list-group-item${NOT_SELECTOR_DROPDOWN_TOGGLE}, [role=\"tab\"]${NOT_SELECTOR_DROPDOWN_TOGGLE}`;\n  const SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"tab\"], [data-bs-toggle=\"pill\"], [data-bs-toggle=\"list\"]'; // TODO: could only be `tab` in v6\n  const SELECTOR_INNER_ELEM = `${SELECTOR_INNER}, ${SELECTOR_DATA_TOGGLE}`;\n  const SELECTOR_DATA_TOGGLE_ACTIVE = `.${CLASS_NAME_ACTIVE}[data-bs-toggle=\"tab\"], .${CLASS_NAME_ACTIVE}[data-bs-toggle=\"pill\"], .${CLASS_NAME_ACTIVE}[data-bs-toggle=\"list\"]`;\n\n  /**\n   * Class definition\n   */\n\n  class Tab extends BaseComponent {\n    constructor(element) {\n      super(element);\n      this._parent = this._element.closest(SELECTOR_TAB_PANEL);\n      if (!this._parent) {\n        return;\n        // TODO: should throw exception in v6\n        // throw new TypeError(`${element.outerHTML} has not a valid parent ${SELECTOR_INNER_ELEM}`)\n      }\n\n      // Set up initial aria attributes\n      this._setInitialAttributes(this._parent, this._getChildren());\n      EventHandler.on(this._element, EVENT_KEYDOWN, event => this._keydown(event));\n    }\n\n    // Getters\n    static get NAME() {\n      return NAME$1;\n    }\n\n    // Public\n    show() {\n      // Shows this elem and deactivate the active sibling if exists\n      const innerElem = this._element;\n      if (this._elemIsActive(innerElem)) {\n        return;\n      }\n\n      // Search for active tab on same parent to deactivate it\n      const active = this._getActiveElem();\n      const hideEvent = active ? EventHandler.trigger(active, EVENT_HIDE$1, {\n        relatedTarget: innerElem\n      }) : null;\n      const showEvent = EventHandler.trigger(innerElem, EVENT_SHOW$1, {\n        relatedTarget: active\n      });\n      if (showEvent.defaultPrevented || hideEvent && hideEvent.defaultPrevented) {\n        return;\n      }\n      this._deactivate(active, innerElem);\n      this._activate(innerElem, active);\n    }\n\n    // Private\n    _activate(element, relatedElem) {\n      if (!element) {\n        return;\n      }\n      element.classList.add(CLASS_NAME_ACTIVE);\n      this._activate(SelectorEngine.getElementFromSelector(element)); // Search and activate/show the proper section\n\n      const complete = () => {\n        if (element.getAttribute('role') !== 'tab') {\n          element.classList.add(CLASS_NAME_SHOW$1);\n          return;\n        }\n        element.removeAttribute('tabindex');\n        element.setAttribute('aria-selected', true);\n        this._toggleDropDown(element, true);\n        EventHandler.trigger(element, EVENT_SHOWN$1, {\n          relatedTarget: relatedElem\n        });\n      };\n      this._queueCallback(complete, element, element.classList.contains(CLASS_NAME_FADE$1));\n    }\n    _deactivate(element, relatedElem) {\n      if (!element) {\n        return;\n      }\n      element.classList.remove(CLASS_NAME_ACTIVE);\n      element.blur();\n      this._deactivate(SelectorEngine.getElementFromSelector(element)); // Search and deactivate the shown section too\n\n      const complete = () => {\n        if (element.getAttribute('role') !== 'tab') {\n          element.classList.remove(CLASS_NAME_SHOW$1);\n          return;\n        }\n        element.setAttribute('aria-selected', false);\n        element.setAttribute('tabindex', '-1');\n        this._toggleDropDown(element, false);\n        EventHandler.trigger(element, EVENT_HIDDEN$1, {\n          relatedTarget: relatedElem\n        });\n      };\n      this._queueCallback(complete, element, element.classList.contains(CLASS_NAME_FADE$1));\n    }\n    _keydown(event) {\n      if (![ARROW_LEFT_KEY, ARROW_RIGHT_KEY, ARROW_UP_KEY, ARROW_DOWN_KEY, HOME_KEY, END_KEY].includes(event.key)) {\n        return;\n      }\n      event.stopPropagation(); // stopPropagation/preventDefault both added to support up/down keys without scrolling the page\n      event.preventDefault();\n      const children = this._getChildren().filter(element => !isDisabled(element));\n      let nextActiveElement;\n      if ([HOME_KEY, END_KEY].includes(event.key)) {\n        nextActiveElement = children[event.key === HOME_KEY ? 0 : children.length - 1];\n      } else {\n        const isNext = [ARROW_RIGHT_KEY, ARROW_DOWN_KEY].includes(event.key);\n        nextActiveElement = getNextActiveElement(children, event.target, isNext, true);\n      }\n      if (nextActiveElement) {\n        nextActiveElement.focus({\n          preventScroll: true\n        });\n        Tab.getOrCreateInstance(nextActiveElement).show();\n      }\n    }\n    _getChildren() {\n      // collection of inner elements\n      return SelectorEngine.find(SELECTOR_INNER_ELEM, this._parent);\n    }\n    _getActiveElem() {\n      return this._getChildren().find(child => this._elemIsActive(child)) || null;\n    }\n    _setInitialAttributes(parent, children) {\n      this._setAttributeIfNotExists(parent, 'role', 'tablist');\n      for (const child of children) {\n        this._setInitialAttributesOnChild(child);\n      }\n    }\n    _setInitialAttributesOnChild(child) {\n      child = this._getInnerElement(child);\n      const isActive = this._elemIsActive(child);\n      const outerElem = this._getOuterElement(child);\n      child.setAttribute('aria-selected', isActive);\n      if (outerElem !== child) {\n        this._setAttributeIfNotExists(outerElem, 'role', 'presentation');\n      }\n      if (!isActive) {\n        child.setAttribute('tabindex', '-1');\n      }\n      this._setAttributeIfNotExists(child, 'role', 'tab');\n\n      // set attributes to the related panel too\n      this._setInitialAttributesOnTargetPanel(child);\n    }\n    _setInitialAttributesOnTargetPanel(child) {\n      const target = SelectorEngine.getElementFromSelector(child);\n      if (!target) {\n        return;\n      }\n      this._setAttributeIfNotExists(target, 'role', 'tabpanel');\n      if (child.id) {\n        this._setAttributeIfNotExists(target, 'aria-labelledby', `${child.id}`);\n      }\n    }\n    _toggleDropDown(element, open) {\n      const outerElem = this._getOuterElement(element);\n      if (!outerElem.classList.contains(CLASS_DROPDOWN)) {\n        return;\n      }\n      const toggle = (selector, className) => {\n        const element = SelectorEngine.findOne(selector, outerElem);\n        if (element) {\n          element.classList.toggle(className, open);\n        }\n      };\n      toggle(SELECTOR_DROPDOWN_TOGGLE, CLASS_NAME_ACTIVE);\n      toggle(SELECTOR_DROPDOWN_MENU, CLASS_NAME_SHOW$1);\n      outerElem.setAttribute('aria-expanded', open);\n    }\n    _setAttributeIfNotExists(element, attribute, value) {\n      if (!element.hasAttribute(attribute)) {\n        element.setAttribute(attribute, value);\n      }\n    }\n    _elemIsActive(elem) {\n      return elem.classList.contains(CLASS_NAME_ACTIVE);\n    }\n\n    // Try to get the inner element (usually the .nav-link)\n    _getInnerElement(elem) {\n      return elem.matches(SELECTOR_INNER_ELEM) ? elem : SelectorEngine.findOne(SELECTOR_INNER_ELEM, elem);\n    }\n\n    // Try to get the outer element (usually the .nav-item)\n    _getOuterElement(elem) {\n      return elem.closest(SELECTOR_OUTER) || elem;\n    }\n\n    // Static\n    static jQueryInterface(config) {\n      return this.each(function () {\n        const data = Tab.getOrCreateInstance(this);\n        if (typeof config !== 'string') {\n          return;\n        }\n        if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n          throw new TypeError(`No method named \"${config}\"`);\n        }\n        data[config]();\n      });\n    }\n  }\n\n  /**\n   * Data API implementation\n   */\n\n  EventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n    if (['A', 'AREA'].includes(this.tagName)) {\n      event.preventDefault();\n    }\n    if (isDisabled(this)) {\n      return;\n    }\n    Tab.getOrCreateInstance(this).show();\n  });\n\n  /**\n   * Initialize on focus\n   */\n  EventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n    for (const element of SelectorEngine.find(SELECTOR_DATA_TOGGLE_ACTIVE)) {\n      Tab.getOrCreateInstance(element);\n    }\n  });\n  /**\n   * jQuery\n   */\n\n  defineJQueryPlugin(Tab);\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap toast.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n\n  /**\n   * Constants\n   */\n\n  const NAME = 'toast';\n  const DATA_KEY = 'bs.toast';\n  const EVENT_KEY = `.${DATA_KEY}`;\n  const EVENT_MOUSEOVER = `mouseover${EVENT_KEY}`;\n  const EVENT_MOUSEOUT = `mouseout${EVENT_KEY}`;\n  const EVENT_FOCUSIN = `focusin${EVENT_KEY}`;\n  const EVENT_FOCUSOUT = `focusout${EVENT_KEY}`;\n  const EVENT_HIDE = `hide${EVENT_KEY}`;\n  const EVENT_HIDDEN = `hidden${EVENT_KEY}`;\n  const EVENT_SHOW = `show${EVENT_KEY}`;\n  const EVENT_SHOWN = `shown${EVENT_KEY}`;\n  const CLASS_NAME_FADE = 'fade';\n  const CLASS_NAME_HIDE = 'hide'; // @deprecated - kept here only for backwards compatibility\n  const CLASS_NAME_SHOW = 'show';\n  const CLASS_NAME_SHOWING = 'showing';\n  const DefaultType = {\n    animation: 'boolean',\n    autohide: 'boolean',\n    delay: 'number'\n  };\n  const Default = {\n    animation: true,\n    autohide: true,\n    delay: 5000\n  };\n\n  /**\n   * Class definition\n   */\n\n  class Toast extends BaseComponent {\n    constructor(element, config) {\n      super(element, config);\n      this._timeout = null;\n      this._hasMouseInteraction = false;\n      this._hasKeyboardInteraction = false;\n      this._setListeners();\n    }\n\n    // Getters\n    static get Default() {\n      return Default;\n    }\n    static get DefaultType() {\n      return DefaultType;\n    }\n    static get NAME() {\n      return NAME;\n    }\n\n    // Public\n    show() {\n      const showEvent = EventHandler.trigger(this._element, EVENT_SHOW);\n      if (showEvent.defaultPrevented) {\n        return;\n      }\n      this._clearTimeout();\n      if (this._config.animation) {\n        this._element.classList.add(CLASS_NAME_FADE);\n      }\n      const complete = () => {\n        this._element.classList.remove(CLASS_NAME_SHOWING);\n        EventHandler.trigger(this._element, EVENT_SHOWN);\n        this._maybeScheduleHide();\n      };\n      this._element.classList.remove(CLASS_NAME_HIDE); // @deprecated\n      reflow(this._element);\n      this._element.classList.add(CLASS_NAME_SHOW, CLASS_NAME_SHOWING);\n      this._queueCallback(complete, this._element, this._config.animation);\n    }\n    hide() {\n      if (!this.isShown()) {\n        return;\n      }\n      const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE);\n      if (hideEvent.defaultPrevented) {\n        return;\n      }\n      const complete = () => {\n        this._element.classList.add(CLASS_NAME_HIDE); // @deprecated\n        this._element.classList.remove(CLASS_NAME_SHOWING, CLASS_NAME_SHOW);\n        EventHandler.trigger(this._element, EVENT_HIDDEN);\n      };\n      this._element.classList.add(CLASS_NAME_SHOWING);\n      this._queueCallback(complete, this._element, this._config.animation);\n    }\n    dispose() {\n      this._clearTimeout();\n      if (this.isShown()) {\n        this._element.classList.remove(CLASS_NAME_SHOW);\n      }\n      super.dispose();\n    }\n    isShown() {\n      return this._element.classList.contains(CLASS_NAME_SHOW);\n    }\n\n    // Private\n\n    _maybeScheduleHide() {\n      if (!this._config.autohide) {\n        return;\n      }\n      if (this._hasMouseInteraction || this._hasKeyboardInteraction) {\n        return;\n      }\n      this._timeout = setTimeout(() => {\n        this.hide();\n      }, this._config.delay);\n    }\n    _onInteraction(event, isInteracting) {\n      switch (event.type) {\n        case 'mouseover':\n        case 'mouseout':\n          {\n            this._hasMouseInteraction = isInteracting;\n            break;\n          }\n        case 'focusin':\n        case 'focusout':\n          {\n            this._hasKeyboardInteraction = isInteracting;\n            break;\n          }\n      }\n      if (isInteracting) {\n        this._clearTimeout();\n        return;\n      }\n      const nextElement = event.relatedTarget;\n      if (this._element === nextElement || this._element.contains(nextElement)) {\n        return;\n      }\n      this._maybeScheduleHide();\n    }\n    _setListeners() {\n      EventHandler.on(this._element, EVENT_MOUSEOVER, event => this._onInteraction(event, true));\n      EventHandler.on(this._element, EVENT_MOUSEOUT, event => this._onInteraction(event, false));\n      EventHandler.on(this._element, EVENT_FOCUSIN, event => this._onInteraction(event, true));\n      EventHandler.on(this._element, EVENT_FOCUSOUT, event => this._onInteraction(event, false));\n    }\n    _clearTimeout() {\n      clearTimeout(this._timeout);\n      this._timeout = null;\n    }\n\n    // Static\n    static jQueryInterface(config) {\n      return this.each(function () {\n        const data = Toast.getOrCreateInstance(this, config);\n        if (typeof config === 'string') {\n          if (typeof data[config] === 'undefined') {\n            throw new TypeError(`No method named \"${config}\"`);\n          }\n          data[config](this);\n        }\n      });\n    }\n  }\n\n  /**\n   * Data API implementation\n   */\n\n  enableDismissTrigger(Toast);\n\n  /**\n   * jQuery\n   */\n\n  defineJQueryPlugin(Toast);\n\n  /**\n   * --------------------------------------------------------------------------\n   * Bootstrap index.umd.js\n   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n   * --------------------------------------------------------------------------\n   */\n\n  const index_umd = {\n    Alert,\n    Button,\n    Carousel,\n    Collapse,\n    Dropdown,\n    Modal,\n    Offcanvas,\n    Popover,\n    ScrollSpy,\n    Tab,\n    Toast,\n    Tooltip\n  };\n\n  return index_umd;\n\n}));\n//# sourceMappingURL=bootstrap.bundle.js.map\n", "// This file consistently uses `let` keyword instead of `const` for reducing the bundle size.\n\n// Global variables - aliasing some builtin symbols to reduce the bundle size.\nlet protoOf = Object.getPrototypeOf\nlet changedStates, derivedStates, curDeps, curNewDerives, alwaysConnectedDom = {isConnected: 1}\nlet gcCycleInMs = 1000, statesToGc, propSetterCache = {}\nlet objProto = protoOf(alwaysConnectedDom), funcProto = protoOf(protoOf), _undefined\n\nlet addAndScheduleOnFirst = (set, s, f, waitMs) =>\n  (set ?? (setTimeout(f, waitMs), new Set)).add(s)\n\nlet runAndCaptureDeps = (f, deps, arg) => {\n  let prevDeps = curDeps\n  curDeps = deps\n  try {\n    return f(arg)\n  } catch (e) {\n    console.error(e)\n    return arg\n  } finally {\n    curDeps = prevDeps\n  }\n}\n\nlet keepConnected = l => l.filter(b => b._dom?.isConnected)\n\nlet addStatesToGc = d => statesToGc = addAndScheduleOnFirst(statesToGc, d, () => {\n  for (let s of statesToGc)\n    s._bindings = keepConnected(s._bindings),\n    s._listeners = keepConnected(s._listeners)\n  statesToGc = _undefined\n}, gcCycleInMs)\n\nlet stateProto = {\n  get val() {\n    curDeps?._getters?.add(this)\n    return this.rawVal\n  },\n\n  get oldVal() {\n    curDeps?._getters?.add(this)\n    return this._oldVal\n  },\n\n  set val(v) {\n    curDeps?._setters?.add(this)\n    if (v !== this.rawVal) {\n      this.rawVal = v\n      this._bindings.length + this._listeners.length ?\n        (derivedStates?.add(this), changedStates = addAndScheduleOnFirst(changedStates, this, updateDoms)) :\n        this._oldVal = v\n    }\n  },\n}\n\nlet state = initVal => ({\n  __proto__: stateProto,\n  rawVal: initVal,\n  _oldVal: initVal,\n  _bindings: [],\n  _listeners: [],\n})\n\nlet bind = (f, dom) => {\n  let deps = {_getters: new Set, _setters: new Set}, binding = {f}, prevNewDerives = curNewDerives\n  curNewDerives = []\n  let newDom = runAndCaptureDeps(f, deps, dom)\n  newDom = (newDom ?? document).nodeType ? newDom : new Text(newDom)\n  for (let d of deps._getters)\n    deps._setters.has(d) || (addStatesToGc(d), d._bindings.push(binding))\n  for (let l of curNewDerives) l._dom = newDom\n  curNewDerives = prevNewDerives\n  return binding._dom = newDom\n}\n\nlet derive = (f, s = state(), dom) => {\n  let deps = {_getters: new Set, _setters: new Set}, listener = {f, s}\n  listener._dom = dom ?? curNewDerives?.push(listener) ?? alwaysConnectedDom\n  s.val = runAndCaptureDeps(f, deps, s.rawVal)\n  for (let d of deps._getters)\n    deps._setters.has(d) || (addStatesToGc(d), d._listeners.push(listener))\n  return s\n}\n\nlet add = (dom, ...children) => {\n  for (let c of children.flat(Infinity)) {\n    let protoOfC = protoOf(c ?? 0)\n    let child = protoOfC === stateProto ? bind(() => c.val) :\n      protoOfC === funcProto ? bind(c) : c\n    child != _undefined && dom.append(child)\n  }\n  return dom\n}\n\nlet tag = (ns, name, ...args) => {\n  let [props, ...children] = protoOf(args[0] ?? 0) === objProto ? args : [{}, ...args]\n  let dom = ns ? document.createElementNS(ns, name) : document.createElement(name)\n  for (let [k, v] of Object.entries(props)) {\n    let getPropDescriptor = proto => proto ?\n      Object.getOwnPropertyDescriptor(proto, k) ?? getPropDescriptor(protoOf(proto)) :\n      _undefined\n    let cacheKey = name + \",\" + k\n    let propSetter = propSetterCache[cacheKey] ??= getPropDescriptor(protoOf(dom))?.set ?? 0\n    let setter = k.startsWith(\"on\") ?\n      (v, oldV) => {\n        let event = k.slice(2)\n        dom.removeEventListener(event, oldV)\n        dom.addEventListener(event, v)\n      } :\n      propSetter ? propSetter.bind(dom) : dom.setAttribute.bind(dom, k)\n    let protoOfV = protoOf(v ?? 0)\n    k.startsWith(\"on\") || protoOfV === funcProto && (v = derive(v), protoOfV = stateProto)\n    protoOfV === stateProto ? bind(() => (setter(v.val, v._oldVal), dom)) : setter(v)\n  }\n  return add(dom, children)\n}\n\nlet handler = ns => ({get: (_, name) => tag.bind(_undefined, ns, name)})\n\nlet update = (dom, newDom) => newDom ? newDom !== dom && dom.replaceWith(newDom) : dom.remove()\n\nlet updateDoms = () => {\n  let iter = 0, derivedStatesArray = [...changedStates].filter(s => s.rawVal !== s._oldVal)\n  do {\n    derivedStates = new Set\n    for (let l of new Set(derivedStatesArray.flatMap(s => s._listeners = keepConnected(s._listeners))))\n      derive(l.f, l.s, l._dom), l._dom = _undefined\n  } while (++iter < 100 && (derivedStatesArray = [...derivedStates]).length)\n  let changedStatesArray = [...changedStates].filter(s => s.rawVal !== s._oldVal)\n  changedStates = _undefined\n  for (let b of new Set(changedStatesArray.flatMap(s => s._bindings = keepConnected(s._bindings))))\n    update(b._dom, bind(b.f, b._dom)), b._dom = _undefined\n  for (let s of changedStatesArray) s._oldVal = s.rawVal\n}\n\nexport default {\n  tags: new Proxy(ns => new Proxy(tag, handler(ns)), handler()),\n  hydrate: (dom, f) => update(dom, bind(f, dom)),\n  add, state, derive,\n}\n", "\nimport van from \"./lib/van-1.5.2.js\"\nconst {h5, div} = van.tags\nimport { Modal } from './lib/bootstrap.bundle.js'\n\nexport enum NotificationStatus {\n    MODAL,\n    ERROR,\n    SUCCESS,\n    WARNING,\n}\n\nexport interface NotificationEvent {\n    msg: string;\n    title?: string;\n    status?: NotificationStatus;\n}\n\nexport class Notifications {\n\n    public static showSuccess(n: NotificationEvent) {\n        n.status = NotificationStatus.SUCCESS;\n        Notifications.show(n);\n    }\n\n    public static showError(n: NotificationEvent) {\n        n.status = NotificationStatus.ERROR;\n        Notifications.show(n);\n    }\n\n    public static showWarning(n: NotificationEvent) {\n        n.status = NotificationStatus.WARNING;\n        Notifications.show(n);\n    }\n\n    public static show(n:NotificationEvent) {\n        document.dispatchEvent(\n            new CustomEvent(\"SFT_NOTIFICATION\", {detail: n})\n        );\n    }\n\n    public createModal(n: NotificationEvent) {\n        var content_class = \"modal-content\";\n        if (!n.status)\n            n.status = NotificationStatus.MODAL;\n\n        switch(n.status) {\n            case NotificationStatus.SUCCESS:\n                content_class = \"alert alert-success\";\n                break;\n            case NotificationStatus.ERROR:\n                content_class = \"alert alert-danger\";\n        }\n        var div_content = div({class: content_class});\n\n        if (n.title)\n            van.add(div_content,\n                div({class: \"modal-header\"},\n                    h5({class: \"modal-title\"}, n.title),\n                )\n            );\n\n        if (n.msg)\n            van.add(div_content,\n                div({class: \"modal-body\"}, n.msg)\n            );\n        var d = div({class:\"modal fade \", tabindex: \"-1\", role: \"dialog\"},\n            div({class: \"modal-dialog\", role: \"document\"},\n                div_content\n            )\n        );\n        van.add(document.body, d);\n        return new Modal(d);\n    }\n\n    public showNotification(n: NotificationEvent) {\n        var modal = this.createModal(n);\n        modal.show();\n        setTimeout(() => {\n            modal.hide();\n            setTimeout(() => {\n                modal.dispose();\n                }, 5000);\n        }, 1500);\n    }\n\n    constructor() {\n        document.addEventListener(\"SFT_NOTIFICATION\",\n            (e: CustomEventInit<NotificationEvent>) => {\n            if (e.detail)\n                this.showNotification(e.detail);\n        })\n    }\n}\n", "import { Notifications } from \"./Notifications\";\n\ninterface TimeSyncData {\n    client: Array<number>;\n    server: Array<number>;\n}\n\nexport class TimeSync {\n    static #instance: TimeSync;\n    offset: number;\n\n    constructor() {\n\n    }\n\n    static instance() : TimeSync {\n        if (!TimeSync.#instance) {\n            TimeSync.#instance = new TimeSync();\n        }\n\n        return TimeSync.#instance;\n    }\n\n    static getOffset() {\n        return TimeSync.instance().offset;\n    }\n\n    sync_time_finish(data: TimeSyncData)\n    {\n        var c0 = data.client[0];\n        var c1 = data.client[1];\n        var c2 = data.client[2];\n        var c3 = data.client[3];\n        var s0 = data.server[0];\n        var s1 = data.server[1];\n        var s2 = data.server[2];\n        var s3 = data.server[3];\n\n        var rtt1 = (c1-c0 + s1-s0) / 4;      // how long it takes to get the package to server\n        var offset1 = c1 - (s1 - rtt1);\n\n        var rtt2 = (c3-c2 + s3-s2) / 4;      // how long it takes to get the package to server\n        var offset2 = c2 - (s2 - rtt2);\n\n        var offset = (offset1 + offset2) / 2;\n        return Math.round(offset);\n    }\n\n    async sync_time(data: TimeSyncData) {\n        if (! data) {\n            data = { 'client': [Date.now()]} as TimeSyncData;\n        }\n\n        if (this.offset)\n            return this.offset;\n\n        const response = await fetch( '/api/v1/time-sync', {\n            method: 'POST',\n            headers: {\n                'Content-Type': \"application/json; charset=utf-8\",\n            },\n            body: JSON.stringify(data)\n        });\n\n        if (!response.ok) {\n            Notifications.showError({msg: `Failed to sync time! ${response.status}`})\n        } else {\n            const json = await response.json();\n\n            if (json.client && json.server) {\n                if (json.client.length < 4) {\n                    json.client.push(Date.now());\n                    this.sync_time(json);\n                } else {\n                    this.offset = this.sync_time_finish(json);\n                    return this.offset;\n                }\n            }\n        }\n    }\n}\n", "\nexport function format_ms_short(arg: number|string) {\n\n    var sec_num = typeof arg === \"string\" ? parseInt(arg, 10): arg;\n    var hours   = Math.floor(sec_num / 3600 / 1000);\n    var minutes = Math.floor((sec_num - (hours * 3600 * 1000)) / 60 / 1000);\n    var seconds = Math.floor((sec_num - (hours * 3600 * 1000)  - (minutes * 60 * 1000)) / 1000);\n    var ms = sec_num - (hours * 3600 * 1000) - (minutes * 60 * 1000) - seconds * 1000;\n\n    var t = [[hours, \"h\"], [minutes,\"m\"], [seconds,\".\"], [ms,\"s\"]];\n    var ret = \"\";\n    for (var i=0; i < t.length; i++){\n        ret += \"\" + t[i][0] + t[i][1];\n    }\n    return ret;\n}\n\n\nexport function format_ms(arg: number|string) {\n    var sec_num = typeof arg === \"string\" ? parseInt(arg, 10): arg;\n    var hours   = Math.floor(sec_num / 3600 / 1000);\n    var minutes = Math.floor((sec_num - (hours * 3600 * 1000)) / 60 / 1000);\n    var seconds = Math.floor((sec_num - (hours * 3600 * 1000)  - (minutes * 60 * 1000)) / 1000);\n    var ms = sec_num - (hours * 3600 * 1000) - (minutes * 60 * 1000) - seconds * 1000;\n\n    var t = [[hours.toString(), \"h\"], [minutes.toString(),\"m\"], [seconds.toString(),\"s\"], [ms.toString(),\"ms\"]];\n    var p = false;\n    var ret = \"\";\n    for (var i=0; i < t.length; i++){\n        if (t[i][0] != \"0\" || p) {\n            ret += t[i][0] + t[i][1] + \" \";\n            p=true;\n        }\n    }\n    return ret;\n}\n\nexport function $(element : string) {\n    return document.getElementById(element);\n}\n\nexport function hide(element: HTMLElement) {\n    if (element.style.display !== \"none\") {\n        element[\"old_display\"] = element.style.display;\n        element.style.display = \"none\";\n    }\n}\n\nexport function show(element: HTMLElement) {\n    if (element.style.display === \"none\")\n        element.style.display = element[\"old_display\"] || \"initial\";\n}\n\nexport function enumToMap(obj: Object) {\n    var m = new Map<string, string>();\n\n    for( const key  of Object.keys(obj)) {\n        if (!Number.isNaN(Number(key))) {\n            m.set(key, obj[key]);\n        }\n    }\n    return m;\n}\n\nexport function suffix(v: String) {\n    return v.slice((v.lastIndexOf(\".\") - 1 >>> 0) + 2);\n}\n\nexport class Images {\n    public static get QUESTION_SVG():string { return \"question-circle.svg\"; }\n}\n\n\nexport function nullOrUndef(variable: any, default_val: string): any | string {\n    if (typeof variable === 'undefined' || variable === null) {\n        return default_val;\n    }\n    return variable;\n}\n\n\n", "import van from \"./lib/van-1.5.2.js\"\nimport { Notifications } from \"./Notifications.js\";\nimport { TimeSync } from \"./TimeSync.js\";\nimport { nullOrUndef } from \"./utils.js\";\nconst {button, div, pre, ul, li, a} = van.tags\n\nexport abstract class Page {\n    name: string;\n    visible: boolean;\n\n    abstract getDom(): HTMLElement;\n\n    constructor(name: string) {\n        this.name = name;\n        this.visible = false;\n    }\n}\n\nexport class Mode {\n    name: string;\n    pages: Page[];\n    currentPage: Page;\n\n    public addPage(page: Page) {\n        this.pages.push(page);\n    }\n\n    public showPage(page: Page, root: HTMLElement) {\n\n        if (!this.pages.find((e) => e == page)) {\n            console.error(`Failed: showPage(${page.name}) - page not in this Mode`);\n            return;\n        }\n\n        if (this.currentPage)\n            this.currentPage.visible = false;\n\n        this.currentPage = page;\n        page.visible = true;\n\n        root.replaceChildren(page.getDom());\n    }\n\n    constructor(name: string) {\n        this.name = name;\n        this.pages = new Array<Page>();\n    }\n}\n\nexport interface WsEvent {\n    type: string;\n}\n\nexport interface RssiData {\n    t: number;\n    r: number;\n    s: number;\n    i: boolean;\n}\n\nexport interface RssiEvent {\n    type: string;\n    freq: number;\n    data: RssiData[];\n}\n\nexport interface PlayersEvent {\n    type: string;\n    players: Player[];\n}\n\nexport class RSSIConfig {\n    name: string;\n    freq: number;\n    peak: number;\n    filter: number;\n    offset_enter: number;\n    offset_leave: number;\n    calib_max_lap_count: number;\n    calib_min_rssi_peak: number;\n    led_color: number;\n}\n\nexport enum ConfigWIFIMode {\n    AP = 0,\n    STA = 1,\n}\n\nexport enum ConfigNodeMode {\n    CONTROLLER = 0,\n    CLIENT = 1,\n}\n\nexport enum ConfigGameMode {\n    RACE = 0,\n    CTF = 1,\n    SPECTRUM = 2,\n}\n\nexport class Config {\n    rssi: RSSIConfig[];\n\n    game_mode: ConfigGameMode;\n    node_name: string;\n    node_mode: number;\n    ctrl_ipv4: string;\n    led_num: number;\n\n\n    elrs_uid: string;\n    osd_x: number;\n    osd_y: number;\n    osd_format: string;\n\n    wifi_mode: ConfigWIFIMode;\n    ssid: string;\n    passphrase: string;\n\n\n    public getValue(name: string): string {\n        var matches = name.match(/^rssi\\[(\\d)\\]\\.(\\w+)$/);\n        if (matches !== null) {\n            const idx = matches[1];\n            const name = matches[2];\n            if (this.rssi[idx]) {\n                return nullOrUndef(this.rssi[idx][name], \"\");\n            }\n        }\n        return nullOrUndef(this[name], \"\");\n    }\n\n    public setValues(obj: Object) {\n        for (const [k, v] of Object.entries(obj)) {\n            var matches = k.match(/^rssi\\[(\\d)\\]\\.(\\w+)$/);\n            if (matches !== null) {\n                const idx = matches[1];\n                const name = matches[2];\n                if (!this.rssi) {\n                    this.rssi = new Array<RSSIConfig>();\n                }\n                if (!this.rssi[idx]) {\n                    this.rssi[idx] = new RSSIConfig();\n                }\n                this.rssi[idx][name] = v;\n            } else if(k.match(/^\\w+$/)) {\n                this[k] = v;\n            }\n        }\n        return this;\n    }\n\n    public toJsonString() {\n        var obj = new Object();\n        for (const [k, v] of Object.entries(this)) {\n            if (k === \"rssi\") {\n                for (let i = 0; i < this.rssi.length; i++) {\n                    const element = this.rssi[i];\n                    for (const [kk, vv] of Object.entries(element)) {\n                        obj[`rssi[${i}].${kk}`] = vv;\n                    }\n                }\n            } else {\n                obj[k] = v;\n            }\n        }\n        return JSON.stringify(obj);\n    }\n\n    public async update(func: CallableFunction) {\n        const url = \"/api/v1/settings\";\n        try {\n            const response = await fetch(url);\n            if (!response.ok) {\n                throw new Error(`Response status: ${response.status}`);\n            }\n\n            const json = await response.json();\n\n            if (json.config) {\n                this.setValues(json.config);\n                document.dispatchEvent(\n                    new CustomEvent(\"SFT_CONFIG_UPDATE\", {detail: this})\n                );\n                func(this);\n            }\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    public async save(func: CallableFunction) {\n        const url = \"/api/v1/settings\";\n        try {\n            const response = await fetch(url, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json; charset=utf-8'\n                },\n                body: this.toJsonString()\n            });\n            if (!response.ok) {\n                Notifications.showError({msg: `Failed to save config ${response.status}`})\n                func(null);\n            } else {\n\n                const json = await response.json();\n                if (json.status !== \"ok\") {\n                    Notifications.showError({msg: `Failed to save config ${json.msg}`})\n                    func(null);\n                } else {\n                    if (json.config) {\n                        this.setValues(json.config);\n\n                    }\n                    document.dispatchEvent(\n                        new CustomEvent(\"SFT_CONFIG_UPDATE\", {detail: this})\n                    );\n                    func(this);\n                    Notifications.showSuccess({msg: \"Configuration saved!\"});\n                }\n            }\n\n        } catch (error) {\n            console.error(error.message);\n        }\n    }\n\n}\n\nexport class Lap {\n    id: number;\n    duration: number;\n    abs_time: number;\n    rssi: number;\n}\n\nexport class Player {\n    name: string;\n    ipaddr: string;\n    laps: Lap[];\n\n    constructor (name:string) {\n        this.name = name;\n    }\n\n    from(p: Player) {\n        this.name = p.name;\n        this.ipaddr = p.ipaddr;\n        this.laps = p.laps;\n       return this;\n    }\n\n    /**\n     * Sort laps by duration shortes duration on index 0.\n     */\n    public sortLapsByDuration() {\n        this.laps.sort((a,b) => {\n            return a.duration - b.duration;\n        });\n    }\n\n    /**\n     * Sort laps by id, lowest first\n     */\n    public sortLapsById() {\n        this.laps.sort((a,b) => {\n            return a.id - b.id;\n        });\n    }\n\n    public patchTime(offset: number) {\n        for (const l of this.laps) {\n            l.abs_time += offset;\n        }\n        return this;\n    }\n}\n\nexport class SimpleFpvTimer {\n\n    _currentMode: Mode;\n    _modes : Map<ConfigGameMode, Mode>;\n    _ws: WebSocket;\n    _players: Player[];\n    _root: HTMLElement;\n\n    constructor () {\n        this._modes = new Map<ConfigGameMode,Mode>();\n        this._currentMode = null;\n\n        this.initWebsocket();\n\n        document.addEventListener(\"SFT_CONFIG_UPDATE\", (e: CustomEventInit<any>) => {\n            this.onConfigUpdate(e.detail);\n        });\n\n        new Config().update(()=> {\n            console.debug(\"GOT CONFIG!\");\n        });\n    }\n\n\n\n    private initWebsocket() {\n        if (this._ws) {\n            this._ws.close();\n            this._ws = null;\n        }\n        const ws_uri = `ws://${window.location.hostname}:${window.location.port}/ws/rssi`;\n        const ws = new WebSocket(ws_uri);\n\n        ws.addEventListener(\"open\", () => {\n            console.debug('WebSocket: connected ' + ws_uri);\n            this._ws.send(JSON.stringify({type: \"hello\", msg: 'Hello, server!'}));\n        });\n\n        ws.addEventListener(\"message\", (ev) => {\n            try {\n                const json = JSON.parse(ev.data);\n                const wsEv = json as WsEvent;\n\n                if (wsEv.type === \"rssi\") {\n                    this.dispatchRSSIUpdateEv(json as RssiEvent);\n\n                } else if (wsEv.type === \"players\") {\n                    this.dispatchPlayersUpdateEv((json as PlayersEvent).players);\n                }\n\n            } catch {\n                console.log(\"WebSocket: Failed to parse json:\" + ev.data);\n            }\n        });\n\n        ws.onclose = () => {\n            console.debug('WebSocket: disconnected ' + ws_uri);\n\n            setTimeout(() => {\n                this.initWebsocket()\n            }, 1000);\n        };\n\n        this._ws = ws;\n    }\n\n    private onConfigUpdate(cfg: Config) {\n        var expected_mode = this._modes.get(Number(cfg.game_mode));\n\n        if (expected_mode != this._currentMode)\n            this.changeMode(expected_mode);\n    }\n\n    private changeMode(m: Mode) {\n        this._currentMode = m;\n        this.getDom().replaceChildren(this.drawTabs());\n    }\n    public addMode(configMode: ConfigGameMode, mode: Mode) {\n        this._modes.set(configMode, mode);\n    }\n\n    public drawTabs(): HTMLElement {\n        // Currently we have tab's as menu\n        const tabList = ul({ class: 'nav nav-tabs' }); // Use destructured ul\n        const tabContent = div({ class: 'tab-content' }); // Use destructured div\n\n        const mode = this._currentMode;\n        if (!mode)\n            return div({class: \"alert alert-danger\"}, \"NO MODE AVAILABLE\");\n\n        mode.pages.forEach((page, index) => {\n            const tabLink = li({ class: 'nav-item' }, [\n                a({\n                    class: `nav-link ${index === 0 ? 'active' : ''}`,\n                    'data-bs-toggle': 'tab',\n                    href: `#tab${index + 1}`,\n                    onclick: () => {\n\n                        const tabPane = document.getElementById(`tab${index + 1}`);\n                        if (tabPane) {\n                            mode.showPage(page, tabPane);\n                        }\n                    }\n                }, page.name),\n            ]);\n            tabList.appendChild(tabLink);\n\n            const tabPane = div({\n                class: `tab-pane fade ${index === 0 ? 'show active' : ''}`,\n                id: `tab${index + 1}`,\n            });\n\n            if (index === 0 ) {\n                tabPane.replaceChildren(page.getDom());\n            }\n            tabContent.appendChild(tabPane);\n        });\n\n        return div(tabList, tabContent);\n    }\n\n    public getDom(): HTMLElement {\n        if (!this._root) {\n            this._root = div();\n        }\n        return this._root;\n    }\n\n    private dispatchPlayersUpdateEv(players: Player[]) {\n        var p2 = new Array<Player>();\n        for(const p of players) {\n            const new_p = new Player(\"\").from(p).patchTime(TimeSync.getOffset());\n            p2.push(new_p);\n        }\n        document.dispatchEvent(\n            new CustomEvent(\"SFT_PLAYERS_UPDATE\", {detail: p2})\n        );\n    }\n\n    private dispatchRSSIUpdateEv(ev: RssiEvent) {\n        for (const rssidata of ev.data) {\n            rssidata.t += TimeSync.getOffset();\n        }\n\n        document.dispatchEvent(\n            new CustomEvent(\"SFT_RSSI\", {detail: ev })\n        );\n    }\n\n    private async requestSettings() {\n        const url = \"/api/v1/settings\";\n        try {\n            const response = await fetch(url);\n            if (!response.ok) {\n                throw new Error(`Response status: ${response.status}`);\n            }\n\n            const json = await response.json();\n            if (json.status && json.status.players) {\n                this.dispatchPlayersUpdateEv(json.status.players as Player[]);\n            }\n\n            return json;\n        } catch (error) {\n            console.error(error.message);\n        }\n\n    }\n}\n", "import { SimpleFpvTimer, Mode, Page, RssiEvent, ConfigGameMode } from \"./SimpleFpvTimer.js\"\nimport van from \"./lib/van-1.5.2.js\"\nimport \"./lib/bootstrap.bundle.js\"\nimport { RaceMode } from \"./race/RaceMode.js\"\nimport { Notifications } from \"./Notifications.js\"\nimport { TimeSync } from \"./TimeSync.js\"\nimport { CaptureTheFlagMode } from \"./ctf/CaptureTheFlagMode.js\"\nimport { TestuPlot } from \"./race/tabs/TestuPlot.js\"\nimport { SpectrumMode } from \"./spectrum/SpectrumMode.js\"\n\nconst {button, div, pre} = van.tags\n\n\nconst sleep = ms => new Promise(resolve => setTimeout(resolve, ms))\n\nconst Run = ({sleepMs}) => {\n    const steps = van.state(0);\n\n    (\n        async () => {\n        for (; steps.val < 40; ++steps.val) await sleep(sleepMs)\n    }\n    )(\n\n    )\n\n    return pre(() =>\n        `${\" \".repeat(40 - steps.val)}\uD83D\uDE90\uD83D\uDCA8Hello VanJS!${\"_\".repeat(steps.val)}`)\n}\n\nconst Hello = () => {\n    const dom = div()\n    return div(\n        dom,\n        button({onclick: () => van.add(dom, Run({sleepMs: 2000}))}, \"Hello \uD83D\uDC0C\"),\n        button({onclick: () => van.add(dom, Run({sleepMs: 500}))}, \"Hello \uD83D\uDC22\"),\n        button({onclick: () => van.add(dom, Run({sleepMs: 100}))}, \"Hello \uD83D\uDEB6\u200D\u2642\uFE0F\"),\n        button({onclick: () => van.add(dom, Run({sleepMs: 10}))}, \"Hello \uD83C\uDFCE\uFE0F\"),\n        button({onclick: () => van.add(dom, Run({sleepMs: 2}))}, \"Hello \uD83D\uDE80\"),\n    )\n}\n\nclass DebugPage extends Page {\n    root: HTMLElement;\n\n    getDom(): HTMLElement {\n        if (!this.root) {\n            this.root = div();\n        }\n        return this.root;\n    }\n\n    onRssiUpdate(ev: RssiEvent) {\n        this.root.append(div(JSON.stringify(ev)));\n    }\n\n    constructor() {\n        super(\"DEBUG\");\n        this.getDom();\n\n        document.addEventListener(\"SFT_RSSI\", (e: CustomEventInit<RssiEvent>) => {\n            this.onRssiUpdate(e.detail);\n        })\n    }\n}\n\n\n\nconst raceMode = new RaceMode (\"Race\");\nraceMode.addPage(new DebugPage());\n\nconst ctfMode = new CaptureTheFlagMode(\"CTF\");\nctfMode.addPage(new DebugPage());\n\nconst spectrumMode = new SpectrumMode(\"CTF\");\nspectrumMode.addPage(new DebugPage());\n\nconst app = new SimpleFpvTimer();\napp.addMode(ConfigGameMode.RACE, raceMode);\napp.addMode(ConfigGameMode.CTF, ctfMode);\napp.addMode(ConfigGameMode.SPECTRUM, spectrumMode);\n\nvan.add(document.body, app.getDom());\nconst notifications = new Notifications();\n\nTimeSync.instance().sync_time(null);\nsetTimeout(() => {\n    console.debug(\"TimeSync offset: \" + TimeSync.getOffset());\n    }, 2000);\n\n", "import van from \"../../lib/van-1.5.2.js\"\nimport { Notifications } from \"../../Notifications.js\";\nimport { Config, ConfigGameMode, ConfigNodeMode, ConfigWIFIMode, Lap, Page, Player } from \"../../SimpleFpvTimer.js\";\nimport { $, enumToMap, format_ms, hide, Images, show, suffix } from \"../../utils.js\";\n\nconst { h3,label, form, select,input,img,fieldset, option, button, div, h5, pre, ul, li, span, a, table, thead, tbody, th, tr,td} = van.tags\n\n\nclass VisibleElements {\n    protected hidden: Array<string>;\n    protected hidden_groups: Array<string>;\n    protected rssi_min: number;\n    protected rssi_max: number;\n    protected rssi_label: string;\n\n    public fieldIsVisible(fieldname: string): boolean {\n        return !this.inArray(this.hidden, fieldname);\n    }\n\n    public groupIsVisible(group: string): boolean {\n        return !this.inArray(this.hidden_groups, group);\n    }\n\n    private inArray(arr: Array<string>, needle: string) {\n        return !!arr.find((v) => {\n            if (v.charAt(0) == '^') {\n                return !! needle.match(v);\n            } else {\n                return v === needle;\n            }\n        });\n    }\n\n    get getRssiMin() {\n        return this.rssi_min;\n    }\n\n    get getRssiMax() {\n        return this.rssi_max;\n    }\n\n    get getRssiLabel() {\n        return this.rssi_label;\n    }\n\n    constructor(\n        hidden: Array<string>,\n        hidden_groups: Array<string>,\n        rssi_min?:number,\n        rssi_max?: number) {\n\n        this.hidden = hidden;\n        this.hidden_groups = hidden_groups;\n        this.rssi_min = rssi_min || 1;\n        this.rssi_max = rssi_max || 8;\n    }\n}\n\nclass ElementsRace extends VisibleElements {\n\n    constructor(cfg: Config) {\n        super(new Array<string>(), new Array<string>(), 1, 1);\n\n        this.rssi_label = \"Player Settings\";\n        this.hidden.push('node_name');\n        this.hidden.push('rssi[0].led_color');\n        if (cfg.node_mode == ConfigNodeMode.CONTROLLER)\n            this.hidden.push('ctrl_ipv4');\n    }\n}\n\nclass ElementsCTF extends VisibleElements {\n\n    constructor(cfg: Config) {\n        super(new Array<string>(), new Array<string>());\n\n        this.rssi_label = \"CTF Teams\";\n        this.hidden_groups.push(ElrsConfigGroup.name)\n\n        if (cfg.node_mode == ConfigNodeMode.CONTROLLER)\n            this.hidden.push('ctrl_ipv4');\n        else\n            this.hidden_groups.push(TabedRssiConfigGroup.name)\n    }\n}\n\nclass ElementsSpectrum extends VisibleElements {\n\n    constructor(_: Config) {\n        super(new Array<string>(), new Array<string>());\n        this.hidden_groups.push(ElrsConfigGroup.name)\n\n        this.hidden.push('ctrl_ipv4');\n        this.hidden.push('node_name');\n        this.hidden.push('node_mode');\n        this.hidden.push('^rssi\\\\[\\\\d+\\\\]\\\\.(?!freq)');\n    }\n}\n\nexport class ConfigElement extends EventTarget {\n    fieldname: string;\n    value: string;\n    label: string;\n    help: string;\n    cfg: Config;\n    visible: boolean;\n\n    constructor(cfg: Config, visible: VisibleElements, fieldname: string, label: string, help?: string) {\n        super();\n        this.visible = visible.fieldIsVisible(fieldname);\n        this.fieldname = fieldname;\n        this.value = cfg.getValue(fieldname);\n        this.label = label;\n        if (help)\n            this.help = help;\n    }\n\n    inputId() {\n        return `id_input_${this.fieldname}`;\n    }\n\n    public draw() {\n        return this.visible ? this.buildHtmlElement() : div();\n    }\n\n    public buildHtmlElement() {\n        return div({class: \"form-group\"},\n            fieldset(\n                label( {class: \"form-label\", for: this.inputId()},\n                    this.label,\n                    (this.help ?\n                        a({style: \"margin: 0px 5px\",\n                            \"data-toggle\": \"tooltip\",\n                            \"data-trigger\": \"click\",\n                            title: this.help}, img({src: Images.QUESTION_SVG}))\n                        : span())\n                ),\n                input({class: \"form-control\", name: this.fieldname,\n                    id: this.inputId(), type: \"text\", value: this.value})\n            )\n        );\n    }\n\n    public getValue(): string | null {\n        var e = $(this.inputId());\n        if (e) {\n            var i = e as HTMLInputElement;\n            return i.value;\n        }\n        return String(this.value);\n    }\n\n    public setValue(v: string) {\n        this.value = v;\n        var e = $(this.inputId());\n        if (e) {\n            var i = e as HTMLInputElement;\n            i.value = v;\n        }\n    }\n\n    public getKeyValue(obj_r?: Object): Object{\n        var obj = new Object();\n        var v = this.getValue();\n        if (v) {\n            obj[this.fieldname] = v;\n            if (obj_r)\n                obj_r[this.fieldname] = v;\n            return obj;\n        }\n        return obj;\n    }\n}\n\nexport class ConfigColorElement extends ConfigElement {\n    public buildHtmlElement() {\n        var value = \"#000000\";\n        var v = this.value || 0;\n        if (!Number.isNaN(v)) {\n            v = v as number;\n            var r = (v & 0xff0000) >> 16;\n            var g = (v & 0x00ff00) >> 8;\n            var b = (v & 0x0000ff);\n            value = \"#\" + r.toString(16).padStart(2, '0') +\n                g.toString(16).padStart(2,'0') + b.toString(16).padStart(2,'0');\n        }\n\n        return div({class: \"form-group\"},\n            fieldset(\n                label( {class: \"form-label\", for: this.inputId()},\n                    this.label,\n                    (this.help ?\n                        a({style: \"margin: 0px 5px\",\n                            \"data-toggle\": \"tooltip\",\n                            \"data-trigger\": \"click\",\n                            title: this.help}, img({src: Images.QUESTION_SVG}))\n                        : span())\n                ),\n                input({class: \"form-control form-control-color\", name: this.fieldname,\n                    id: this.inputId(), type: \"color\", value: value})\n            )\n        );\n    }\n\n    public getValue(): string | null {\n        var v = super.getValue();\n        if (!v) return null;\n        var m = v.match(/#(\\w{2})(\\w{2})(\\w{2})/ );\n        if (m) {\n            var r = parseInt(m[1], 16);\n            var g = parseInt(m[2], 16);\n            var b = parseInt(m[3], 16);\n            v = (r << 16 | g << 8 | b).toString();\n            return v;\n        }\n        return v;\n    }\n}\n\nexport class ConfigSelectElement extends ConfigElement {\n    options: Map<string,string>;\n\n    constructor(cfg: Config, visible: VisibleElements,\n        fieldname: string, label: string, options: Map<string, string>, help?: string) {\n        super(cfg, visible, fieldname, label, help);\n        this.options = options;\n    }\n\n\n    public buildHtmlElement() {\n\n        var s = select({class: \"form-select\", name: this.fieldname, id: this.inputId(),\n            onchange: () => {\n                var i = $(this.inputId()) as HTMLSelectElement;\n                this.dispatchEvent(new CustomEvent('onchange', { detail: { element: this, value: i.value } }));\n            }\n        });\n        var v = this.value;\n        for (let [key, value] of this.options) {\n            van.add(s, option( {value: key, selected: v == key}, value));\n        }\n\n        return div({class: \"form-group\"},\n            fieldset(\n                label( {class: \"form-label\", for: this.inputId()},\n                    this.label,\n                    (this.help ?\n                        a({style: \"margin: 0px 5px\",\n                            \"data-toggle\": \"tooltip\",\n                            \"data-trigger\": \"click\",\n                            title: this.help}, img({src: Images.QUESTION_SVG}))\n                        : span())\n                ),\n                s\n            )\n        );\n    }\n\n}\n\nexport class ConfigGroup {\n    label: string;\n    elements: ConfigElement[];\n    cfg: Config;\n    visible: boolean;\n\n    constructor(cfg: Config, visible: VisibleElements, label: string) {\n        this.label = label;\n        this.cfg = cfg;\n        this.elements = new Array<ConfigElement>();\n        this.visible = visible.groupIsVisible(this.constructor.name);\n    }\n\n    addElement(elem: ConfigElement) : ConfigGroup{\n        this.elements.push(elem);\n        return this;\n    }\n\n    public buildHtmlElement(): HTMLElement {\n        return li({class:\"list-group-item config-group rounded bg-gradient\", },\n            h5({style: \"text-align: right; margin:0\"}, this.label),\n            this.elements.map((e) => {\n                return e.draw();\n            })\n        );\n    }\n\n    public draw() : HTMLElement {\n        return this.visible ? this.buildHtmlElement() : div();\n    }\n\n    public getKeyValues(obj_r?: Object): Object{\n        var obj = new Object();\n        for(const e of this.elements){\n            for (const [key, value] of Object.entries(e.getKeyValue(obj_r)) ){\n                obj[key] = value;\n            }\n        }\n        return obj;\n    }\n\n    public findConfigElementById(id: string): ConfigElement {\n        for (const elem  of this.elements) {\n            if (elem.fieldname == id) {\n                return elem;\n            }\n        }\n        return null;\n    }\n\n}\n\nclass RSSIConfigElement extends ConfigElement {\n    constructor(cfg: Config, visible: VisibleElements, idx: number, fieldname: string, label: string, help?: string) {\n        super(cfg, visible, `rssi[${idx}].${fieldname}`, label, help);\n    }\n}\n\nexport class GeneralConfigGroup extends ConfigGroup {\n    constructor(cfg: Config, visible: VisibleElements) {\n        super(cfg, visible, \"General settings\");\n        var game_mode = new ConfigSelectElement(cfg, visible,\n            \"game_mode\", \"Game mode\", enumToMap(ConfigGameMode))\n        var node_name = new ConfigElement(cfg, visible, \"node_name\", \"Device Name\",\n            \"Used for CTF, could descripe the location of this device\");\n\n        this.addElement(game_mode);\n        this.addElement(node_name);\n\n        var node_mode = new ConfigSelectElement(cfg, visible, \"node_mode\", \"Device Mode\",\n            enumToMap(ConfigNodeMode),\n            \"Specify if this is a controller device or a client which connects to a controller.\"\n        );\n        var ctrl_ipv4 = new ConfigElement(cfg, visible, \"ctrl_ipv4\", \"Controller IPv4\",\n            \"The controller IPv4 address to connect to. If value is 0.0.0.0, GW is used.\");\n\n        this.addElement(node_mode);\n        this.addElement(ctrl_ipv4);\n\n        this.addElement(new ConfigElement(cfg, visible, \"led_num\", \"Number of LEDs\"));\n    }\n}\n\nconst freq_map = new Map([\n            [ \"5658\", \"R1 (5658)\"  ],\n            [ \"5695\", \"R2 (5695)\"  ],\n            [ \"5732\", \"R3 (5732)\"  ],\n            [ \"5769\", \"R4 (5769)\"  ],\n            [ \"5806\", \"R5 (5806)\"  ],\n            [ \"5843\", \"R6 (5843)\"  ],\n            [ \"5880\", \"R7 (5880)\"  ],\n            [ \"5917\", \"R8 (5917)\"  ],\n            ]);\n\nexport class RSSITap extends ConfigGroup {\n    tablink: HTMLLIElement;\n    tabpane: HTMLDivElement;\n    index: number;\n    id_prefix = \"rssi_config_tab_\";\n\n    public buildHtmlElement() : HTMLElement {\n        return div(\n            this.elements.map((e) => {\n                return e.draw();\n            })\n        );\n    }\n\n    public getTabLink() {\n        if (!this.tablink)\n            this.tablink = li({ class: 'nav-item' }, [\n                a({\n                    class: `nav-link`,\n                    'data-bs-toggle': 'tab',\n                    href: `#${this.id_prefix}${this.index}`,\n                }, this.label),\n            ]);\n        return this.tablink;\n    }\n\n    public getTabPane() {\n        if (!this.tabpane)\n            this.tabpane = div({\n            class: `tab-pane fade}`,\n            id: `${this.id_prefix}${this.index}`} ,\n            this.draw()\n        );\n        return this.tabpane;\n    }\n\n    public selectTab() {\n        if (document.body.contains(this.getTabLink())) {\n            this.getTabLink().firstChild.click();\n        }\n    }\n\n    public initFromOther(other: RSSITap) {\n        var fields = [\n            'peak',\n            'filter',\n            'offset_leave',\n            'offset_enter',\n            'calib_max_lap_count',\n            'calib_min_rssi_peak',\n            'led_color'\n        ];\n\n        for(const other_e of other.elements){\n            for(const my of this.elements) {\n                const my_suffix = suffix(my.fieldname);\n                const other_suffix = suffix(other_e.fieldname);\n                if (my_suffix == other_suffix && fields.indexOf(my_suffix) >= 0) {\n                    my.setValue(other_e.getValue());\n                }\n            }\n        }\n    }\n\n    public getValue(fieldname: string): string | null {\n\n        fieldname = `rssi[${this.index}].${fieldname}`;\n        for(const e of this.elements) {\n            if (e.fieldname == fieldname) {\n                return e.getValue();\n            }\n        }\n        return null;\n    }\n\n    public setValue(fieldname: string, value: string) {\n        var e = this.findConfigElementById(`rssi[${this.index}].${fieldname}`);\n        if (e) {\n            e.setValue(value);\n        }\n    }\n\n    constructor(cfg: Config, visible: VisibleElements, idx: number) {\n        super(cfg, visible, \"Player settings\");\n        this.index = idx;\n        this.label = (idx + 1).toString();\n\n\n        this.addElement(new RSSIConfigElement(cfg, visible, idx, \"name\", \"Name\"));\n        this.addElement(new ConfigSelectElement(cfg, visible, `rssi[${idx}].freq`,\n            \"Frequency\", freq_map));\n\n        this.addElement(new ConfigColorElement(cfg, visible, `rssi[${idx}].led_color`, \"LED color\"));\n\n        [{\n            label: \"RSSI Peak value (default: 1100)\",\n            name: \"peak\",\n            help: \"The expected RSSI maximum, when the drone fly through the gate.\"\n        },\n        {\n            name: \"filter\",\n            label: \"Filter\",\n            help: \"Smooth the RSSI input signals. Range is 1-100, a value near\" +\n                \" to 1 smooth more, a value of 100 keeps the raw RSSI value.\"\n        },\n        {\n            label: \"Offset enter (in %)\",\n            name: \"offset_enter\",\n            help: \"The percentage of 'RSSI-Peak' to count a drone as entered\" +\n                \" the gate. The range is 50-100 (Default: 80)\"\n        },\n        {\n            label: \"Offset leave (in %)\",\n            name: \"offset_leave\",\n            help: \"The percentage of 'RSSI-Peak' to count a drone as leaved the\"+\n                \" gate. The range is 50-100 (Default: 70)\"\n        },\n        {\n            label: \"Calibration max lap count\",\n            name: \"calib_max_lap_count\",\n            help: \"The number of laps to be detected to finish the calibration.\"\n        },\n        {\n            label: \"Calibration min rssi peak\",\n            name: \"calib_min_rssi_peak\",\n            help: \"The minimum RSSI value to detect a 'drone enter gate' during\" +\n                \" calibration.\"\n        }].forEach((l) => {\n            this.addElement(new RSSIConfigElement(cfg, visible, idx,l.name, l.label, l.help));\n        });\n    }\n}\n\nexport class TabedRssiConfigGroup extends ConfigGroup {\n    tabs: Array<RSSITap>;\n    tabList: HTMLUListElement;\n    tabContent: HTMLDivElement;\n    plusTabListElement: HTMLLIElement;\n    minusTabListElement: HTMLLIElement;\n    min_tabs: number;\n    max_tabs: number;\n    visible_elements: VisibleElements;\n\n    public drawTab(e: RSSITap){\n        this.plusTabListElement.insertAdjacentElement(\"beforebegin\", e.getTabLink());\n        this.tabContent.appendChild(e.getTabPane());\n    }\n\n    private updatePlusMinus() {\n        if (this.max_tabs - this.min_tabs == 0) {\n            hide(this.tabList);\n            return;\n        }\n\n        show(this.tabList);\n        if (this.tabs.length >= this.max_tabs) {\n            hide(this.plusTabListElement);\n        } else {\n            show(this.plusTabListElement)\n        }\n\n        if (this.tabs.length <= this.min_tabs) {\n            hide(this.minusTabListElement);\n        } else {\n            show(this.minusTabListElement)\n        }\n    }\n\n    public addTab(){\n        if (this.tabs.length < this.max_tabs) {\n            const index = this.tabs.length;\n            const new_tab = new RSSITap(this.cfg, this.visible_elements, index);\n            if (index > 0 && new_tab.getValue('freq') == \"0\") {\n                new_tab.initFromOther(this.tabs[index-1]);\n                for (const freq of freq_map.keys()) {\n                    if (!this.tabs.find((e) => e.getValue(\"freq\") == freq)) {\n                        new_tab.setValue(\"freq\", freq);\n                        break;\n                    }\n                }\n            }\n            this.tabs.push(new_tab);\n            this.drawTab(new_tab);\n            new_tab.selectTab();\n        } else {\n            this.tabs[this.tabs.length -1].selectTab();\n        }\n        this.updatePlusMinus();\n    }\n\n    public removeTab() {\n        if (this.min_tabs < this.tabs.length) {\n            const e = this.tabs.pop();\n            e.getTabPane().remove();\n            e.getTabLink().remove();\n        }\n        this.tabs[this.tabs.length -1].selectTab();\n        this.updatePlusMinus();\n    }\n\n    public buildTabElements() {\n        this.tabList = ul({ class: 'nav nav-tabs' });\n        this.tabContent = div({ class: 'tab-content' });\n\n        this.plusTabListElement = li({ class: 'nav-item' }, [\n                a({\n                    class: `nav-link`,\n                    'data-bs-toggle': 'tab',\n                    onclick: () => {\n                        this.addTab();\n                    }\n                }, \"+\"),\n            ]);\n        this.minusTabListElement = li({ class: 'nav-item' }, [\n                a({\n                    class: `nav-link`,\n                    'data-bs-toggle': 'tab',\n                    onclick: () => {\n                        this.removeTab();\n                    }\n                }, \"-\"),\n            ]);\n\n        this.tabList.appendChild(this.plusTabListElement);\n        this.tabList.appendChild(this.minusTabListElement);\n    }\n\n    public buildHtmlElement(): HTMLElement {\n        return li({class:\"list-group-item config-group rounded bg-gradient\"},\n            h5({style: \"text-align: right; margin:0\"}, this.label),\n            div(this.tabList, this.tabContent)\n        );\n    }\n\n    public draw(): HTMLElement {\n        setTimeout(()=> {\n            if (this.tabs.length > 0)\n                this.tabs[0].selectTab();\n        }, 500);\n        return this.visible ? this.buildHtmlElement(): div();\n    }\n\n   public getKeyValues(obj_r?: Object): Object{\n        var obj = new Object();\n        for(const e of this.tabs){\n            for (const [key, value] of Object.entries(e.getKeyValues(obj_r)) ){\n                obj[key] = value;\n            }\n        }\n        for (let i = this.tabs.length; i < 8; i++) {\n            if (obj_r)\n                obj_r[`rssi[${i}].freq`] = \"0\";\n            obj[`rssi[${i}].freq`] = \"0\";\n        }\n        return obj;\n    }\n\n    public findConfigElementById(id: string): ConfigElement {\n        var e: ConfigElement;\n\n        for(const tab of this.tabs){\n            if (e = tab.findConfigElementById((id)))\n                return e;\n        }\n        return null;\n    }\n\n    constructor(cfg: Config, visible: VisibleElements) {\n        super(cfg, visible, visible.getRssiLabel);\n        this.visible_elements = visible;\n        this.tabs = new Array<RSSITap>();\n        this.min_tabs = visible.getRssiMin;\n        this.max_tabs = visible.getRssiMax;\n\n        if (this.visible) {\n            this.buildTabElements();\n\n            for(const rssi of cfg.rssi) {\n                if (rssi.freq == 0 || this.tabs.length >= this.max_tabs)\n                    break;\n                this.addTab();\n            }\n            while(this.tabs.length < this.min_tabs)\n                this.addTab();\n        }\n    }\n}\n\n\nexport class ElrsConfigGroup extends ConfigGroup {\n   constructor(cfg:Config, visible: VisibleElements) {\n        super(cfg, visible, \"expressLRS/OSD\");\n\n        this.addElement(new ConfigElement(cfg, visible, \"elrs_uid\", \"Elrs UID\"));\n        this.addElement(new ConfigElement(cfg, visible, \"osd_x\", \"X position on OSD\"));\n        this.addElement(new ConfigElement(cfg, visible, \"osd_y\", \"Y position on OSD\"));\n        this.addElement(new ConfigElement(cfg, visible, \"osd_format\", \"OSD message format\"));\n        // TODO test OSD element\n    }\n}\n\nexport class WifiConfigGroup extends ConfigGroup {\n   constructor(cfg: Config, visible: VisibleElements) {\n        super(cfg, visible, \"WiFi Settings\");\n\n        this.addElement(new ConfigSelectElement(cfg, visible, \"wifi_mode\", \"WIFI Mode\",\n            enumToMap(ConfigWIFIMode)));\n        this.addElement(new ConfigElement(cfg, visible, \"ssid\", \"SSID\"));\n        this.addElement(new ConfigElement(cfg, visible, \"passphrase\", \"Passphrase\"));\n    }\n}\n\nexport class ConfigForm {\n    groups: Array<ConfigGroup>;\n    root: HTMLElement;\n\n    private findConfigElementById(id: string): ConfigElement {\n        for (const group of this.groups) {\n            var elem = group.findConfigElementById(id);\n            if (elem)\n                return elem;\n        }\n        return null;\n    }\n\n    private visibleByGameMode(cfg: Config) {\n        switch (Number(cfg.game_mode)) {\n            case ConfigGameMode.RACE:\n                return new ElementsRace(cfg);\n            case ConfigGameMode.CTF:\n                return new ElementsCTF(cfg);\n            case ConfigGameMode.SPECTRUM:\n                return new ElementsSpectrum(cfg);\n            default:\n                console.error(\"Unhandled game_mode: \" + cfg.game_mode);\n        }\n        return null;\n    }\n\n    public draw(): HTMLElement{\n        return this.root;\n    }\n\n    private submitButton() {\n            return div({class: \"mb-3\", style: \"margin: 5px 3px\"},\n                    button({class: \"btn btn-primary\", type: \"button\", id: \"config_submit_btn_id\", onclick: () => {\n                        var btn = $('config_submit_btn_id') as HTMLButtonElement;\n                        btn.disabled = true;\n                        btn.classList.add(\"disabled\");\n\n                        var cfg = new Config();\n                        cfg.setValues(this.getKeyValues());\n\n                        cfg.save((cfg: Config) => {\n                            if (cfg)\n                                this.updateForm(cfg);\n\n                            btn.classList.remove(\"disabled\");\n                            btn.disabled = false;\n                        });\n                    }}, \"Submit\")\n                );\n    }\n\n    private updateRoot() {\n        this.root.replaceChildren(\n            form(\n                this.groups.map((g) => {\n                    return g.draw();\n                })\n                ,\n                this.submitButton()\n            )\n        );\n    }\n\n    public getKeyValues(obj_r?: Object): Object{\n        var obj = new Object();\n        for(const group of this.groups){\n            for (const [key, value] of Object.entries(group.getKeyValues(obj_r)) ){\n                obj[key] = value;\n            }\n        }\n        return obj;\n    }\n\n    updateForm(cfg: Config) {\n        this.groups = new Array<ConfigGroup>();\n        var visible = this.visibleByGameMode(cfg);\n        this.groups.push(new GeneralConfigGroup(cfg, visible));\n        this.groups.push(new TabedRssiConfigGroup(cfg, visible));\n        this.groups.push(new ElrsConfigGroup(cfg, visible));\n        this.groups.push(new WifiConfigGroup(cfg, visible));\n\n        var game_mode = this.findConfigElementById(\"game_mode\");\n        if (game_mode) {\n            game_mode.addEventListener(\"onchange\", () => {\n                var cfg = new Config();\n                cfg.setValues(this.getKeyValues());\n                this.updateForm(cfg);\n            });\n        }\n        var node_mode = this.findConfigElementById(\"node_mode\");\n        if (node_mode) {\n            node_mode.addEventListener(\"onchange\", () => {\n                var cfg = new Config();\n                cfg.setValues(this.getKeyValues());\n                this.updateForm(cfg);\n            });\n        }\n        this.updateRoot();\n    }\n\n    constructor(cfg: Config) {\n        this.root = div();\n        this.updateForm(cfg);\n    }\n}\n\n\nexport class RaceConfigPage extends Page {\n    root: HTMLElement;\n\n    getDom(): HTMLElement {\n        if (! this.root) {\n            this.root = div();\n        }\n\n        var cfg = new Config();\n        cfg.update((cfg: Config) => {\n            this.root.replaceChildren(new ConfigForm(cfg).draw());\n        });\n        return this.root;\n    }\n\n    constructor() {\n        super(\"Config\");\n\n    }\n}\n", "import van from \"../../lib/van-1.5.2.js\"\nimport { Lap, Page, Player } from \"../../SimpleFpvTimer\";\nimport { format_ms } from \"../../utils.js\";\nconst {button, div, pre, ul, li, a, table, thead, tbody, th, tr,td} = van.tags\n\nclass LapsRow {\n    player: Player;\n    lap: Lap;\n\n    public draw(style?: {class?: string}) {\n        return tr(\n            style,\n            td(this.player.name),\n            td(this.lap.id),\n            td(format_ms(this.lap.duration)),\n            td(this.lap.rssi),\n        );\n    }\n\n    constructor(player: Player, lap: Lap) {\n        this.player = player;\n        this.lap = lap;\n    }\n}\n\nclass LapsTable {\n    headline: string[];\n    laps: LapsRow[];\n\n    public addRow(row: LapsRow) {\n        this.laps.push(row);\n    }\n\n    public sortByDuration() {\n        this.laps.sort((a,b) => {\n            return a.lap.duration - b.lap.duration;\n        });\n    }\n\n    public sortByAbsTime() {\n        this.laps.sort((a,b) => {\n            return b.lap.abs_time - a.lap.abs_time;\n        });\n    }\n\n    public draw() : HTMLElement{\n\n        this.sortByDuration();\n        var first = this.laps[0];\n        var second = this.laps[1];\n        var third = this.laps[2];\n\n        const r = tr({class: 'table-secondary'});\n        this.headline.forEach(e => {\n           r.append(th({scope: \"col\"}, e));\n        });\n\n        const head = thead(r);\n\n        const body = tbody();\n        this.laps.forEach((l: LapsRow) => {\n            var r = l.draw();\n            if ( l == first) {\n                r.getElementsByTagName(\"td\").item(2).innerHTML += \"&#129351;\";\n            } else if (l == second) {\n                r.getElementsByTagName(\"td\").item(2).innerHTML += \"&#129352;\";\n            } else if (l == third) {\n                r.getElementsByTagName(\"td\").item(2).innerHTML += \"&#129353;\";\n            }\n\n            body.append(r);\n        });\n\n        const t = table(\n            {class: 'table table-striped table-sm table-dark' },\n            head, body);\n\n        return t;\n    }\n\n    constructor() {\n        this.headline = [\"Pilot\", \"Lap#\", \"Duration\", \"RSSI\"];\n        this.laps = new Array<LapsRow>();\n    }\n}\n\nexport class LapsPage extends Page {\n    root: HTMLElement;\n    lapsTable: LapsTable;\n\n    getDom(): HTMLElement {\n        if (! this.root) {\n            this.root = div(this.lapsTable.draw());\n        }\n        return this.root;\n    }\n\n    onPlayersUpdate(ev: Player[]) {\n        this.lapsTable = new LapsTable();\n\n        ev.forEach((player: Player) => {\n            player.laps.forEach((lap: Lap) => {\n                this.lapsTable.addRow(new LapsRow(player, lap));\n            });\n        });\n\n        this.lapsTable.sortByAbsTime();\n\n        this.getDom().replaceChildren(this.lapsTable.draw());\n    }\n\n    constructor() {\n        super(\"Laps\");\n        this.lapsTable = new LapsTable();\n        document.addEventListener(\"SFT_PLAYERS_UPDATE\", (e: CustomEventInit<Player[]>) => {\n            this.onPlayersUpdate(e.detail);\n        })\n    }\n\n}\n", "import van from \"../../lib/van-1.5.2.js\"\nimport { Lap, Page, Player } from \"../../SimpleFpvTimer.js\";\nimport { $, enumToMap, format_ms } from \"../../utils.js\";\n\nconst { h3,label, select, option, button, div, h5, pre, ul, li, span, a, table, thead, tbody, th, tr,td} = van.tags\n\nenum RaceMode {\n    OneLap,\n    TwoLaps,\n    ThreeLaps,\n    MaxLaps,\n    FastesLap,\n    FastesTwoLaps,\n    FastesThreeLaps,\n    FastesTwoContinousLaps,\n    FastesThreeContinousLaps,\n};\n\nfunction numberToRaceMode(v: number) : RaceMode {\n if (v == RaceMode.FastesTwoContinousLaps) {\n return RaceMode.FastesTwoContinousLaps;\n }\n\n    throw Error;\n}\n\n\nclass PlayerRanking {\n    player: Player;\n    ranking: number;\n    counted_laps: Lap[];\n\n    constructor(player: Player, ranking: number) {\n        this.player = player;\n        this.ranking = ranking;\n        this.counted_laps = new Array<Lap>();\n    }\n\n    public compare(other: PlayerRanking) {\n        return other.ranking - this.ranking;\n    }\n\n    private drawLap(id: string, time: string, style?:string) {\n        return div({class: \"card-text border rounded \", style: `margin: 3px; ${style}`},\n            span({style: \"font-weight: bold; border-right: 1px solid grey; margin: 0px 5px; min-width: 40px; display: inline-block;\"}, id),\n            span(time)\n        );\n    }\n\n    public drawLapInfo() : HTMLElement{\n        var laps = this.counted_laps.length > 0 ? this.counted_laps : this.player.laps;\n        var sum_div = div();\n        if (laps.length > 1) {\n            var sum_duration = 0;\n            for(const l of laps){\n                sum_duration += l.duration;\n            }\n            sum_div = this.drawLap(\"SUM\", format_ms(sum_duration), \"font-weight: bold;\");\n        }\n        return div(\n            laps.map((lap: Lap) => {\n                return  this.drawLap(lap.id.toString(), format_ms(lap.duration));\n            }),\n            sum_div\n        );\n    }\n}\n\nfunction sortPlayerRanking(a: PlayerRanking, b: PlayerRanking) {\n    return a.ranking - b.ranking;\n}\n\nclass PlayerRankingByFastesLap extends PlayerRanking {\n    constructor(player: Player, laps: number) {\n        var counted_laps = new Array<Lap>();\n\n        player.sortLapsByDuration();\n\n        var duration_sum = 0;\n\n        if (player.laps.length >= laps) {\n            player.laps.forEach((l:Lap, i:number) => {\n                if (i < laps) {\n                    duration_sum += l.duration;\n                    counted_laps.push(l);\n                }\n            });\n        } else {\n            duration_sum = Number.MAX_VALUE;\n        }\n\n        super(player, duration_sum);\n        this.counted_laps = counted_laps;\n    }\n}\n\nclass PlayerRankingByLap extends PlayerRanking {\n    constructor(player: Player, laps: number) {\n        var counted_laps = new Array<Lap>();\n        player.sortLapsById();\n\n        var duration_sum = 0;\n\n        if (player.laps.length >= laps) {\n            player.laps.forEach((l:Lap, i:number) => {\n                if (i < laps) {\n                    duration_sum += l.duration;\n                    counted_laps.push(l);\n                }\n            });\n        } else {\n            duration_sum = Number.MAX_VALUE;\n        }\n\n        super(player, duration_sum);\n        this.counted_laps = counted_laps;\n    }\n}\n\nclass PlayerRankingByContinousLaps extends PlayerRanking {\n    constructor(player: Player, num: number) {\n        var continuous_duration = new Array<{laps: Lap[], duration_sum: number}>;\n\n        player.laps.forEach((l:Lap, i:number) => {\n            var sum = 0;\n            var laps = new Array<Lap>();\n            if (i + num <= player.laps.length) {\n                for (let j = 0; j < num; j++) {\n                    sum += player.laps[i + j].duration;\n                    laps.push(player.laps[i + j]);\n                }\n            } else {\n                sum = Number.MAX_VALUE;\n            }\n            continuous_duration.push({laps: laps, duration_sum: sum})\n        });\n\n        continuous_duration.sort((a,b) =>\n            { return a.duration_sum - b.duration_sum});\n\n        super(player, continuous_duration.length > 0 ?\n            continuous_duration[0].duration_sum : Number.MAX_VALUE);\n        if (continuous_duration.length > 0)\n            this.counted_laps = continuous_duration[0].laps;\n    }\n}\n\nexport class PlayersPage extends Page {\n    root: HTMLElement;\n    playersDom: HTMLElement;\n    actionsDom: HTMLElement;\n    players: PlayerRanking[];\n    racemode: RaceMode;\n\n    getActionsDom(): HTMLElement {\n        if (!this.actionsDom) {\n            this.actionsDom = div(\n                div({class: \"mb-3\", style: \"margin: 5px 3px\"},\n                    div({class: \"input-group flex-nowrap\"},\n                        span( {class: \"input-group-text\", id: \"inputGroup-sizing-default\"},\n                            \"Race mode\"),\n                        select({class: \"form-select\", id: \"select_race_mode\",\n                            onchange: () => {\n                                var i = $(\"select_race_mode\") as HTMLSelectElement;\n                                this.racemode = Number(i.value) as RaceMode;\n                                this.onPlayersUpdate(this.players.map((p) => {\n                                    return p.player;\n                                }));\n                            }},\n                            Array.from(enumToMap(RaceMode)).map(([key, value]) => {\n                                    return option({value: key}, value.replace(/([A-Z])/g, ' $1'))\n                                })\n                        )),\n                    div({class: \"form-text\"},\n                        \"Select race mode to set the evaluation of the laps.\")\n                ),\n\n                div({class: \"mb-3\", style: \"margin: 5px 3px\"},\n                    button({class: \"btn btn-primary\", type: \"button\", onclick: () => {\n\n                    }}, \"Start Race!\")\n                )\n            );\n        }\n        return this.actionsDom;\n    }\n\n    getPlayersDom(): HTMLElement {\n        if (!this.playersDom) {\n            this.playersDom = div();\n        }\n        return this.playersDom;\n    }\n\n    getDom(): HTMLElement {\n        if (! this.root) {\n            this.root = div(\n                this.getActionsDom(),\n                this.getPlayersDom()\n            );\n        }\n        return this.root;\n    }\n\n    drawPlayerRanking(p: PlayerRanking): HTMLElement {\n\n        var medal = (p.ranking == 1)? \"\uD83C\uDFC6\" /* \"&#127942;\" || \"&#129351;\"*/ :\n                    (p.ranking == 2)? \"\uD83E\uDD48\" /*\"&#129352;\"*/ :\n                    (p.ranking == 3)? \"\uD83E\uDD49\":\n                    (p.ranking == Number.MAX_VALUE) ? \"\" :\n                    p.ranking + \".\";\n\n        var card = div({class:\"card\", style: \"margin: 5px;\"},\n            h5({class: \"card-header\"}, medal + \" \" + p.player.name,\n                a({class: \"btn btn-secondary btn-sm\",\n                    style: \"float:right\", role: \"button\",\n                    href: \"http://\" + p.player.ipaddr }, \"\u2699\uFE0F\" /*\"&#9881;\"*/)\n                ),\n            div({class: \"card-text\", style: \"font-weight: bold;\"}, \"Laps:\"),\n            p.drawLapInfo()\n        );\n        return card;\n    }\n\n    sortPlayersByFastesLap(players: Player[], laps: number) {\n        var ranking = new Array<PlayerRankingByFastesLap>();\n\n        players.forEach((p:Player) => {\n            ranking.push(new PlayerRankingByFastesLap(p, laps));\n        });\n\n        return ranking;\n    }\n\n    sortPlayersByLap(players: Player[], laps: number) {\n        var ranking = new Array<PlayerRankingByLap>();\n\n        players.forEach((p:Player) => {\n            ranking.push(new PlayerRankingByLap(p, laps));\n        });\n        return ranking;\n    }\n\n    sortPlayersByMaxLap(players: Player[]) {\n        var ranking = new Array<PlayerRankingByLap>();\n\n        players.sort((a,b) => {\n            if (a.laps.length == b.laps.length) {\n                var sum_a = 0;\n                var sum_b = 0;\n                for (const l of a.laps) {\n                    sum_a += l.duration;\n                }\n                for (const l of b.laps) {\n                    sum_b += l.duration;\n                }\n\n                return sum_a - sum_b;\n            }\n            return b.laps.length - a.laps.length;\n        });\n\n        players.forEach((p:Player, i:number) => {\n            ranking.push(new PlayerRanking(p, i));\n        });\n\n        return ranking;\n    }\n\n    sortPlayersByContinousLaps(players: Player[], num: number) {\n        var ranking = new Array<PlayerRankingByLap>();\n\n        players.forEach((p:Player) => {\n            ranking.push(new PlayerRankingByContinousLaps(p, num));\n        });\n        return ranking;\n    }\n\n    public sortPlayersByMode(players: Player[], mode: RaceMode) : PlayerRanking[] {\n\n        switch (mode) {\n            case RaceMode.FastesLap:\n                return this.sortPlayersByFastesLap(players, 1);\n            case RaceMode.FastesTwoLaps:\n                return this.sortPlayersByFastesLap(players, 2);\n            case RaceMode.FastesThreeLaps:\n                return this.sortPlayersByFastesLap(players, 3);\n\n            case RaceMode.OneLap:\n                return this.sortPlayersByLap(players, 1);\n            case RaceMode.TwoLaps:\n                return this.sortPlayersByLap(players, 2);\n            case RaceMode.ThreeLaps:\n                return this.sortPlayersByLap(players, 3);\n            case RaceMode.MaxLaps:\n                return this.sortPlayersByMaxLap(players);\n            case RaceMode.FastesTwoContinousLaps:\n                return this.sortPlayersByContinousLaps(players, 2);\n            case RaceMode.FastesThreeContinousLaps:\n                return this.sortPlayersByContinousLaps(players, 3);\n            default:\n                return this.sortPlayersByFastesLap(players, 1);\n        }\n\n    }\n\n    public playersToRanking(players: Player[], mode: RaceMode): PlayerRanking[] {\n        var ranking = this.sortPlayersByMode(players, mode);\n\n        ranking.sort(sortPlayerRanking);\n\n        var rank = 1;\n        for(const r of ranking) {\n            if (r.ranking != Number.MAX_VALUE)\n                r.ranking = rank;\n            rank += 1;\n        }\n\n        ranking.sort((a,b) => { return a.player.name.localeCompare(b.player.name)});\n\n        return ranking;\n    }\n\n    onPlayersUpdate(players: Player[]) {\n\n        this.players = this.playersToRanking(players, this.racemode)\n\n        var container = div();\n        this.players.forEach((p:PlayerRanking) => {\n            container.appendChild(this.drawPlayerRanking(p));\n        });\n        this.getPlayersDom().replaceChildren(container);\n    }\n\n    constructor() {\n        super(\"Players\");\n        this.racemode = RaceMode.FastesLap;\n        this.players = new Array<PlayerRanking>();\n\n        document.addEventListener(\"SFT_PLAYERS_UPDATE\", (e: CustomEventInit<Player[]>) => {\n            if (e.detail)\n                this.onPlayersUpdate(e.detail);\n        })\n    }\n}\n", "/**\n* Copyright (c) 2024, Leon Sorokin\n* All rights reserved. (MIT Licensed)\n*\n* uPlot.js (\u03BCPlot)\n* A small, fast chart for time series, lines, areas, ohlc & bars\n* https://github.com/leeoniya/uPlot (v1.6.31)\n*/\n\nconst FEAT_TIME          = true;\n\nconst pre = \"u-\";\n\nconst UPLOT          =       \"uplot\";\nconst ORI_HZ         = pre + \"hz\";\nconst ORI_VT         = pre + \"vt\";\nconst TITLE          = pre + \"title\";\nconst WRAP           = pre + \"wrap\";\nconst UNDER          = pre + \"under\";\nconst OVER           = pre + \"over\";\nconst AXIS           = pre + \"axis\";\nconst OFF            = pre + \"off\";\nconst SELECT         = pre + \"select\";\nconst CURSOR_X       = pre + \"cursor-x\";\nconst CURSOR_Y       = pre + \"cursor-y\";\nconst CURSOR_PT      = pre + \"cursor-pt\";\nconst LEGEND         = pre + \"legend\";\nconst LEGEND_LIVE    = pre + \"live\";\nconst LEGEND_INLINE  = pre + \"inline\";\nconst LEGEND_SERIES  = pre + \"series\";\nconst LEGEND_MARKER  = pre + \"marker\";\nconst LEGEND_LABEL   = pre + \"label\";\nconst LEGEND_VALUE   = pre + \"value\";\n\nconst WIDTH       = \"width\";\nconst HEIGHT      = \"height\";\nconst TOP         = \"top\";\nconst BOTTOM      = \"bottom\";\nconst LEFT        = \"left\";\nconst RIGHT       = \"right\";\nconst hexBlack    = \"#000\";\nconst transparent = hexBlack + \"0\";\n\nconst mousemove   = \"mousemove\";\nconst mousedown   = \"mousedown\";\nconst mouseup     = \"mouseup\";\nconst mouseenter  = \"mouseenter\";\nconst mouseleave  = \"mouseleave\";\nconst dblclick    = \"dblclick\";\nconst resize      = \"resize\";\nconst scroll      = \"scroll\";\n\nconst change      = \"change\";\nconst dppxchange  = \"dppxchange\";\n\nconst LEGEND_DISP = \"--\";\n\nconst domEnv = typeof window != 'undefined';\n\nconst doc = domEnv ? document  : null;\nconst win = domEnv ? window    : null;\nconst nav = domEnv ? navigator : null;\n\nlet pxRatio;\n\n//export const canHover = domEnv && !win.matchMedia('(hover: none)').matches;\n\nlet query;\n\nfunction setPxRatio() {\n\tlet _pxRatio = devicePixelRatio;\n\n\t// during print preview, Chrome fires off these dppx queries even without changes\n\tif (pxRatio != _pxRatio) {\n\t\tpxRatio = _pxRatio;\n\n\t\tquery && off(change, query, setPxRatio);\n\t\tquery = matchMedia(`(min-resolution: ${pxRatio - 0.001}dppx) and (max-resolution: ${pxRatio + 0.001}dppx)`);\n\t\ton(change, query, setPxRatio);\n\n\t\twin.dispatchEvent(new CustomEvent(dppxchange));\n\t}\n}\n\nfunction addClass(el, c) {\n\tif (c != null) {\n\t\tlet cl = el.classList;\n\t\t!cl.contains(c) && cl.add(c);\n\t}\n}\n\nfunction remClass(el, c) {\n\tlet cl = el.classList;\n\tcl.contains(c) && cl.remove(c);\n}\n\nfunction setStylePx(el, name, value) {\n\tel.style[name] = value + \"px\";\n}\n\nfunction placeTag(tag, cls, targ, refEl) {\n\tlet el = doc.createElement(tag);\n\n\tif (cls != null)\n\t\taddClass(el, cls);\n\n\tif (targ != null)\n\t\ttarg.insertBefore(el, refEl);\n\n\treturn el;\n}\n\nfunction placeDiv(cls, targ) {\n\treturn placeTag(\"div\", cls, targ);\n}\n\nconst xformCache = new WeakMap();\n\nfunction elTrans(el, xPos, yPos, xMax, yMax) {\n\tlet xform = \"translate(\" + xPos + \"px,\" + yPos + \"px)\";\n\tlet xformOld = xformCache.get(el);\n\n\tif (xform != xformOld) {\n\t\tel.style.transform = xform;\n\t\txformCache.set(el, xform);\n\n\t\tif (xPos < 0 || yPos < 0 || xPos > xMax || yPos > yMax)\n\t\t\taddClass(el, OFF);\n\t\telse\n\t\t\tremClass(el, OFF);\n\t}\n}\n\nconst colorCache = new WeakMap();\n\nfunction elColor(el, background, borderColor) {\n\tlet newColor = background + borderColor;\n\tlet oldColor = colorCache.get(el);\n\n\tif (newColor != oldColor) {\n\t\tcolorCache.set(el, newColor);\n\t\tel.style.background = background;\n\t\tel.style.borderColor = borderColor;\n\t}\n}\n\nconst sizeCache = new WeakMap();\n\nfunction elSize(el, newWid, newHgt, centered) {\n\tlet newSize = newWid + \"\" + newHgt;\n\tlet oldSize = sizeCache.get(el);\n\n\tif (newSize != oldSize) {\n\t\tsizeCache.set(el, newSize);\n\t\tel.style.height = newHgt + \"px\";\n\t\tel.style.width = newWid + \"px\";\n\t\tel.style.marginLeft = centered ? -newWid/2 + \"px\" : 0;\n\t\tel.style.marginTop = centered ? -newHgt/2 + \"px\" : 0;\n\t}\n}\n\nconst evOpts = {passive: true};\nconst evOpts2 = {...evOpts, capture: true};\n\nfunction on(ev, el, cb, capt) {\n\tel.addEventListener(ev, cb, capt ? evOpts2 : evOpts);\n}\n\nfunction off(ev, el, cb, capt) {\n\tel.removeEventListener(ev, cb, evOpts);\n}\n\ndomEnv && setPxRatio();\n\n// binary search for index of closest value\nfunction closestIdx(num, arr, lo, hi) {\n\tlet mid;\n\tlo = lo || 0;\n\thi = hi || arr.length - 1;\n\tlet bitwise = hi <= 2147483647;\n\n\twhile (hi - lo > 1) {\n\t\tmid = bitwise ? (lo + hi) >> 1 : floor((lo + hi) / 2);\n\n\t\tif (arr[mid] < num)\n\t\t\tlo = mid;\n\t\telse\n\t\t\thi = mid;\n\t}\n\n\tif (num - arr[lo] <= arr[hi] - num)\n\t\treturn lo;\n\n\treturn hi;\n}\n\nfunction makeIndexOfs(predicate) {\n\t let indexOfs = (data, _i0, _i1) => {\n\t\tlet i0 = -1;\n\t\tlet i1 = -1;\n\n\t\tfor (let i = _i0; i <= _i1; i++) {\n\t\t\tif (predicate(data[i])) {\n\t\t\t\ti0 = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = _i1; i >= _i0; i--) {\n\t\t\tif (predicate(data[i])) {\n\t\t\t\ti1 = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn [i0, i1];\n\t };\n\n\t return indexOfs;\n}\n\nconst notNullish = v => v != null;\nconst isPositive = v => v != null && v > 0;\n\nconst nonNullIdxs = makeIndexOfs(notNullish);\nconst positiveIdxs = makeIndexOfs(isPositive);\n\nfunction getMinMax(data, _i0, _i1, sorted = 0, log = false) {\n//\tconsole.log(\"getMinMax()\");\n\n\tlet getEdgeIdxs = log ? positiveIdxs : nonNullIdxs;\n\tlet predicate = log ? isPositive : notNullish;\n\n\t[_i0, _i1] = getEdgeIdxs(data, _i0, _i1);\n\n\tlet _min = data[_i0];\n\tlet _max = data[_i0];\n\n\tif (_i0 > -1) {\n\t\tif (sorted == 1) {\n\t\t\t_min = data[_i0];\n\t\t\t_max = data[_i1];\n\t\t}\n\t\telse if (sorted == -1) {\n\t\t\t_min = data[_i1];\n\t\t\t_max = data[_i0];\n\t\t}\n\t\telse {\n\t\t\tfor (let i = _i0; i <= _i1; i++) {\n\t\t\t\tlet v = data[i];\n\n\t\t\t\tif (predicate(v)) {\n\t\t\t\t\tif (v < _min)\n\t\t\t\t\t\t_min = v;\n\t\t\t\t\telse if (v > _max)\n\t\t\t\t\t\t_max = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn [_min ?? inf, _max ?? -inf]; // todo: fix to return nulls\n}\n\nfunction rangeLog(min, max, base, fullMags) {\n\tlet minSign = sign(min);\n\tlet maxSign = sign(max);\n\n\tif (min == max) {\n\t\tif (minSign == -1) {\n\t\t\tmin *= base;\n\t\t\tmax /= base;\n\t\t}\n\t\telse {\n\t\t\tmin /= base;\n\t\t\tmax *= base;\n\t\t}\n\t}\n\n\tlet logFn = base == 10 ? log10 : log2;\n\n\tlet growMinAbs = minSign == 1 ? floor : ceil;\n\tlet growMaxAbs = maxSign == 1 ? ceil : floor;\n\n\tlet minExp = growMinAbs(logFn(abs(min)));\n\tlet maxExp = growMaxAbs(logFn(abs(max)));\n\n\tlet minIncr = pow(base, minExp);\n\tlet maxIncr = pow(base, maxExp);\n\n\t// fix values like Math.pow(10, -5) === 0.000009999999999999999\n\tif (base == 10) {\n\t\tif (minExp < 0)\n\t\t\tminIncr = roundDec(minIncr, -minExp);\n\t\tif (maxExp < 0)\n\t\t\tmaxIncr = roundDec(maxIncr, -maxExp);\n\t}\n\n\tif (fullMags || base == 2) {\n\t\tmin = minIncr * minSign;\n\t\tmax = maxIncr * maxSign;\n\t}\n\telse {\n\t\tmin = incrRoundDn(min, minIncr);\n\t\tmax = incrRoundUp(max, maxIncr);\n\t}\n\n\treturn [min, max];\n}\n\nfunction rangeAsinh(min, max, base, fullMags) {\n\tlet minMax = rangeLog(min, max, base, fullMags);\n\n\tif (min == 0)\n\t\tminMax[0] = 0;\n\n\tif (max == 0)\n\t\tminMax[1] = 0;\n\n\treturn minMax;\n}\n\nconst rangePad = 0.1;\n\nconst autoRangePart = {\n\tmode: 3,\n\tpad: rangePad,\n};\n\nconst _eqRangePart = {\n\tpad:  0,\n\tsoft: null,\n\tmode: 0,\n};\n\nconst _eqRange = {\n\tmin: _eqRangePart,\n\tmax: _eqRangePart,\n};\n\n// this ensures that non-temporal/numeric y-axes get multiple-snapped padding added above/below\n// TODO: also account for incrs when snapping to ensure top of axis gets a tick & value\nfunction rangeNum(_min, _max, mult, extra) {\n\tif (isObj(mult))\n\t\treturn _rangeNum(_min, _max, mult);\n\n\t_eqRangePart.pad  = mult;\n\t_eqRangePart.soft = extra ? 0 : null;\n\t_eqRangePart.mode = extra ? 3 : 0;\n\n\treturn _rangeNum(_min, _max, _eqRange);\n}\n\n// nullish coalesce\nfunction ifNull(lh, rh) {\n\treturn lh == null ? rh : lh;\n}\n\n// checks if given index range in an array contains a non-null value\n// aka a range-bounded Array.some()\nfunction hasData(data, idx0, idx1) {\n\tidx0 = ifNull(idx0, 0);\n\tidx1 = ifNull(idx1, data.length - 1);\n\n\twhile (idx0 <= idx1) {\n\t\tif (data[idx0] != null)\n\t\t\treturn true;\n\t\tidx0++;\n\t}\n\n\treturn false;\n}\n\nfunction _rangeNum(_min, _max, cfg) {\n\tlet cmin = cfg.min;\n\tlet cmax = cfg.max;\n\n\tlet padMin = ifNull(cmin.pad, 0);\n\tlet padMax = ifNull(cmax.pad, 0);\n\n\tlet hardMin = ifNull(cmin.hard, -inf);\n\tlet hardMax = ifNull(cmax.hard,  inf);\n\n\tlet softMin = ifNull(cmin.soft,  inf);\n\tlet softMax = ifNull(cmax.soft, -inf);\n\n\tlet softMinMode = ifNull(cmin.mode, 0);\n\tlet softMaxMode = ifNull(cmax.mode, 0);\n\n\tlet delta = _max - _min;\n\tlet deltaMag = log10(delta);\n\n\tlet scalarMax = max(abs(_min), abs(_max));\n\tlet scalarMag = log10(scalarMax);\n\n\tlet scalarMagDelta = abs(scalarMag - deltaMag);\n\n\t// this handles situations like 89.7, 89.69999999999999\n\t// by assuming 0.001x deltas are precision errors\n//\tif (delta > 0 && delta < abs(_max) / 1e3)\n//\t\tdelta = 0;\n\n\t// treat data as flat if delta is less than 1e-24\n\t// or range is 11+ orders of magnitude below raw values, e.g. 99999999.99999996 - 100000000.00000004\n\tif (delta < 1e-24 || scalarMagDelta > 10) {\n\t\tdelta = 0;\n\n\t\t// if soft mode is 2 and all vals are flat at 0, avoid the 0.1 * 1e3 fallback\n\t\t// this prevents 0,0,0 from ranging to -100,100 when softMin/softMax are -1,1\n\t\tif (_min == 0 || _max == 0) {\n\t\t\tdelta = 1e-24;\n\n\t\t\tif (softMinMode == 2 && softMin != inf)\n\t\t\t\tpadMin = 0;\n\n\t\t\tif (softMaxMode == 2 && softMax != -inf)\n\t\t\t\tpadMax = 0;\n\t\t}\n\t}\n\n\tlet nonZeroDelta = delta || scalarMax || 1e3;\n\tlet mag          = log10(nonZeroDelta);\n\tlet base         = pow(10, floor(mag));\n\n\tlet _padMin  = nonZeroDelta * (delta == 0 ? (_min == 0 ? .1 : 1) : padMin);\n\tlet _newMin  = roundDec(incrRoundDn(_min - _padMin, base/10), 24);\n\tlet _softMin = _min >= softMin && (softMinMode == 1 || softMinMode == 3 && _newMin <= softMin || softMinMode == 2 && _newMin >= softMin) ? softMin : inf;\n\tlet minLim   = max(hardMin, _newMin < _softMin && _min >= _softMin ? _softMin : min(_softMin, _newMin));\n\n\tlet _padMax  = nonZeroDelta * (delta == 0 ? (_max == 0 ? .1 : 1) : padMax);\n\tlet _newMax  = roundDec(incrRoundUp(_max + _padMax, base/10), 24);\n\tlet _softMax = _max <= softMax && (softMaxMode == 1 || softMaxMode == 3 && _newMax >= softMax || softMaxMode == 2 && _newMax <= softMax) ? softMax : -inf;\n\tlet maxLim   = min(hardMax, _newMax > _softMax && _max <= _softMax ? _softMax : max(_softMax, _newMax));\n\n\tif (minLim == maxLim && minLim == 0)\n\t\tmaxLim = 100;\n\n\treturn [minLim, maxLim];\n}\n\n// alternative: https://stackoverflow.com/a/2254896\nconst numFormatter = new Intl.NumberFormat(domEnv ? nav.language : 'en-US');\nconst fmtNum = val => numFormatter.format(val);\n\nconst M = Math;\n\nconst PI = M.PI;\nconst abs = M.abs;\nconst floor = M.floor;\nconst round = M.round;\nconst ceil = M.ceil;\nconst min = M.min;\nconst max = M.max;\nconst pow = M.pow;\nconst sign = M.sign;\nconst log10 = M.log10;\nconst log2 = M.log2;\n// TODO: seems like this needs to match asinh impl if the passed v is tweaked?\nconst sinh =  (v, linthresh = 1) => M.sinh(v) * linthresh;\nconst asinh = (v, linthresh = 1) => M.asinh(v / linthresh);\n\nconst inf = Infinity;\n\nfunction numIntDigits(x) {\n\treturn (log10((x ^ (x >> 31)) - (x >> 31)) | 0) + 1;\n}\n\nfunction clamp(num, _min, _max) {\n\treturn min(max(num, _min), _max);\n}\n\nfunction fnOrSelf(v) {\n\treturn typeof v == \"function\" ? v : () => v;\n}\n\nconst noop = () => {};\n\n// note: these identity fns may get deoptimized if reused for different arg types\n// a TS version would enforce they stay monotyped and require making variants\nconst retArg0 = _0 => _0;\n\nconst retArg1 = (_0, _1) => _1;\n\nconst retTrue = _ => true;\n\nconst retEq = (a, b) => a == b;\n\nconst regex6 = /\\.\\d*?(?=9{6,}|0{6,})/gm;\n\n// e.g. 17999.204999999998 -> 17999.205\nconst fixFloat = val => {\n\tif (isInt(val) || fixedDec.has(val))\n\t\treturn val;\n\n\tconst str = `${val}`;\n\n\tconst match = str.match(regex6);\n\n\tif (match == null)\n\t\treturn val;\n\n\tlet len = match[0].length - 1;\n\n\t// e.g. 1.0000000000000001e-24\n\tif (str.indexOf('e-') != -1) {\n\t\tlet [num, exp] = str.split('e');\n\t\treturn +`${fixFloat(num)}e${exp}`;\n\t}\n\n\treturn roundDec(val, len);\n};\n\nfunction incrRound(num, incr) {\n\treturn fixFloat(roundDec(fixFloat(num/incr))*incr);\n}\n\nfunction incrRoundUp(num, incr) {\n\treturn fixFloat(ceil(fixFloat(num/incr))*incr);\n}\n\nfunction incrRoundDn(num, incr) {\n\treturn fixFloat(floor(fixFloat(num/incr))*incr);\n}\n\n// https://stackoverflow.com/a/48764436\n// rounds half away from zero\nfunction roundDec(val, dec = 0) {\n\tif (isInt(val))\n\t\treturn val;\n//\telse if (dec == 0)\n//\t\treturn round(val);\n\n\tlet p = 10 ** dec;\n\tlet n = (val * p) * (1 + Number.EPSILON);\n\treturn round(n) / p;\n}\n\nconst fixedDec = new Map();\n\nfunction guessDec(num) {\n\treturn ((\"\"+num).split(\".\")[1] || \"\").length;\n}\n\nfunction genIncrs(base, minExp, maxExp, mults) {\n\tlet incrs = [];\n\n\tlet multDec = mults.map(guessDec);\n\n\tfor (let exp = minExp; exp < maxExp; exp++) {\n\t\tlet expa = abs(exp);\n\t\tlet mag = roundDec(pow(base, exp), expa);\n\n\t\tfor (let i = 0; i < mults.length; i++) {\n\t\t\tlet _incr = base == 10 ? +`${mults[i]}e${exp}` : mults[i] * mag;\n\t\t\tlet dec = (exp >= 0 ? 0 : expa) + (exp >= multDec[i] ? 0 : multDec[i]);\n\t\t\tlet incr = base == 10 ? _incr : roundDec(_incr, dec);\n\t\t\tincrs.push(incr);\n\t\t\tfixedDec.set(incr, dec);\n\t\t}\n\t}\n\n\treturn incrs;\n}\n\n//export const assign = Object.assign;\n\nconst EMPTY_OBJ = {};\nconst EMPTY_ARR = [];\n\nconst nullNullTuple = [null, null];\n\nconst isArr = Array.isArray;\nconst isInt = Number.isInteger;\nconst isUndef = v => v === void 0;\n\nfunction isStr(v) {\n\treturn typeof v == 'string';\n}\n\nfunction isObj(v) {\n\tlet is = false;\n\n\tif (v != null) {\n\t\tlet c = v.constructor;\n\t\tis = c == null || c == Object;\n\t}\n\n\treturn is;\n}\n\nfunction fastIsObj(v) {\n\treturn v != null && typeof v == 'object';\n}\n\nconst TypedArray = Object.getPrototypeOf(Uint8Array);\n\nconst __proto__ = \"__proto__\";\n\nfunction copy(o, _isObj = isObj) {\n\tlet out;\n\n\tif (isArr(o)) {\n\t\tlet val = o.find(v => v != null);\n\n\t\tif (isArr(val) || _isObj(val)) {\n\t\t\tout = Array(o.length);\n\t\t\tfor (let i = 0; i < o.length; i++)\n\t\t\t\tout[i] = copy(o[i], _isObj);\n\t\t}\n\t\telse\n\t\t\tout = o.slice();\n\t}\n\telse if (o instanceof TypedArray) // also (ArrayBuffer.isView(o) && !(o instanceof DataView))\n\t\tout = o.slice();\n\telse if (_isObj(o)) {\n\t\tout = {};\n\t\tfor (let k in o) {\n\t\t\tif (k != __proto__)\n\t\t\t\tout[k] = copy(o[k], _isObj);\n\t\t}\n\t}\n\telse\n\t\tout = o;\n\n\treturn out;\n}\n\nfunction assign(targ) {\n\tlet args = arguments;\n\n\tfor (let i = 1; i < args.length; i++) {\n\t\tlet src = args[i];\n\n\t\tfor (let key in src) {\n\t\t\tif (key != __proto__) {\n\t\t\t\tif (isObj(targ[key]))\n\t\t\t\t\tassign(targ[key], copy(src[key]));\n\t\t\t\telse\n\t\t\t\t\ttarg[key] = copy(src[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn targ;\n}\n\n// nullModes\nconst NULL_REMOVE = 0;  // nulls are converted to undefined (e.g. for spanGaps: true)\nconst NULL_RETAIN = 1;  // nulls are retained, with alignment artifacts set to undefined (default)\nconst NULL_EXPAND = 2;  // nulls are expanded to include any adjacent alignment artifacts\n\n// sets undefined values to nulls when adjacent to existing nulls (minesweeper)\nfunction nullExpand(yVals, nullIdxs, alignedLen) {\n\tfor (let i = 0, xi, lastNullIdx = -1; i < nullIdxs.length; i++) {\n\t\tlet nullIdx = nullIdxs[i];\n\n\t\tif (nullIdx > lastNullIdx) {\n\t\t\txi = nullIdx - 1;\n\t\t\twhile (xi >= 0 && yVals[xi] == null)\n\t\t\t\tyVals[xi--] = null;\n\n\t\t\txi = nullIdx + 1;\n\t\t\twhile (xi < alignedLen && yVals[xi] == null)\n\t\t\t\tyVals[lastNullIdx = xi++] = null;\n\t\t}\n\t}\n}\n\n// nullModes is a tables-matched array indicating how to treat nulls in each series\n// output is sorted ASC on the joined field (table[0]) and duplicate join values are collapsed\nfunction join(tables, nullModes) {\n\tif (allHeadersSame(tables)) {\n\t//\tconsole.log('cheap join!');\n\n\t\tlet table = tables[0].slice();\n\n\t\tfor (let i = 1; i < tables.length; i++)\n\t\t\ttable.push(...tables[i].slice(1));\n\n\t\tif (!isAsc(table[0]))\n\t\t\ttable = sortCols(table);\n\n\t\treturn table;\n\t}\n\n\tlet xVals = new Set();\n\n\tfor (let ti = 0; ti < tables.length; ti++) {\n\t\tlet t = tables[ti];\n\t\tlet xs = t[0];\n\t\tlet len = xs.length;\n\n\t\tfor (let i = 0; i < len; i++)\n\t\t\txVals.add(xs[i]);\n\t}\n\n\tlet data = [Array.from(xVals).sort((a, b) => a - b)];\n\n\tlet alignedLen = data[0].length;\n\n\tlet xIdxs = new Map();\n\n\tfor (let i = 0; i < alignedLen; i++)\n\t\txIdxs.set(data[0][i], i);\n\n\tfor (let ti = 0; ti < tables.length; ti++) {\n\t\tlet t = tables[ti];\n\t\tlet xs = t[0];\n\n\t\tfor (let si = 1; si < t.length; si++) {\n\t\t\tlet ys = t[si];\n\n\t\t\tlet yVals = Array(alignedLen).fill(undefined);\n\n\t\t\tlet nullMode = nullModes ? nullModes[ti][si] : NULL_RETAIN;\n\n\t\t\tlet nullIdxs = [];\n\n\t\t\tfor (let i = 0; i < ys.length; i++) {\n\t\t\t\tlet yVal = ys[i];\n\t\t\t\tlet alignedIdx = xIdxs.get(xs[i]);\n\n\t\t\t\tif (yVal === null) {\n\t\t\t\t\tif (nullMode != NULL_REMOVE) {\n\t\t\t\t\t\tyVals[alignedIdx] = yVal;\n\n\t\t\t\t\t\tif (nullMode == NULL_EXPAND)\n\t\t\t\t\t\t\tnullIdxs.push(alignedIdx);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tyVals[alignedIdx] = yVal;\n\t\t\t}\n\n\t\t\tnullExpand(yVals, nullIdxs, alignedLen);\n\n\t\t\tdata.push(yVals);\n\t\t}\n\t}\n\n\treturn data;\n}\n\nconst microTask = typeof queueMicrotask == \"undefined\" ? fn => Promise.resolve().then(fn) : queueMicrotask;\n\n// TODO: https://github.com/dy/sort-ids (~2x faster for 1e5+ arrays)\nfunction sortCols(table) {\n\tlet head = table[0];\n\tlet rlen = head.length;\n\n\tlet idxs = Array(rlen);\n\tfor (let i = 0; i < idxs.length; i++)\n\t\tidxs[i] = i;\n\n\tidxs.sort((i0, i1) => head[i0] - head[i1]);\n\n\tlet table2 = [];\n\tfor (let i = 0; i < table.length; i++) {\n\t\tlet row = table[i];\n\t\tlet row2 = Array(rlen);\n\n\t\tfor (let j = 0; j < rlen; j++)\n\t\t\trow2[j] = row[idxs[j]];\n\n\t\ttable2.push(row2);\n\t}\n\n\treturn table2;\n}\n\n// test if we can do cheap join (all join fields same)\nfunction allHeadersSame(tables) {\n\tlet vals0 = tables[0][0];\n\tlet len0 = vals0.length;\n\n\tfor (let i = 1; i < tables.length; i++) {\n\t\tlet vals1 = tables[i][0];\n\n\t\tif (vals1.length != len0)\n\t\t\treturn false;\n\n\t\tif (vals1 != vals0) {\n\t\t\tfor (let j = 0; j < len0; j++) {\n\t\t\t\tif (vals1[j] != vals0[j])\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn true;\n}\n\nfunction isAsc(vals, samples = 100) {\n\tconst len = vals.length;\n\n\t// empty or single value\n\tif (len <= 1)\n\t\treturn true;\n\n\t// skip leading & trailing nullish\n\tlet firstIdx = 0;\n\tlet lastIdx = len - 1;\n\n\twhile (firstIdx <= lastIdx && vals[firstIdx] == null)\n\t\tfirstIdx++;\n\n\twhile (lastIdx >= firstIdx && vals[lastIdx] == null)\n\t\tlastIdx--;\n\n\t// all nullish or one value surrounded by nullish\n\tif (lastIdx <= firstIdx)\n\t\treturn true;\n\n\tconst stride = max(1, floor((lastIdx - firstIdx + 1) / samples));\n\n\tfor (let prevVal = vals[firstIdx], i = firstIdx + stride; i <= lastIdx; i += stride) {\n\t\tconst v = vals[i];\n\n\t\tif (v != null) {\n\t\t\tif (v <= prevVal)\n\t\t\t\treturn false;\n\n\t\t\tprevVal = v;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nconst months = [\n\t\"January\",\n\t\"February\",\n\t\"March\",\n\t\"April\",\n\t\"May\",\n\t\"June\",\n\t\"July\",\n\t\"August\",\n\t\"September\",\n\t\"October\",\n\t\"November\",\n\t\"December\",\n];\n\nconst days = [\n\t\"Sunday\",\n\t\"Monday\",\n\t\"Tuesday\",\n\t\"Wednesday\",\n\t\"Thursday\",\n\t\"Friday\",\n\t\"Saturday\",\n];\n\nfunction slice3(str) {\n\treturn str.slice(0, 3);\n}\n\nconst days3 = days.map(slice3);\n\nconst months3 = months.map(slice3);\n\nconst engNames = {\n\tMMMM: months,\n\tMMM:  months3,\n\tWWWW: days,\n\tWWW:  days3,\n};\n\nfunction zeroPad2(int) {\n\treturn (int < 10 ? '0' : '') + int;\n}\n\nfunction zeroPad3(int) {\n\treturn (int < 10 ? '00' : int < 100 ? '0' : '') + int;\n}\n\n/*\nfunction suffix(int) {\n\tlet mod10 = int % 10;\n\n\treturn int + (\n\t\tmod10 == 1 && int != 11 ? \"st\" :\n\t\tmod10 == 2 && int != 12 ? \"nd\" :\n\t\tmod10 == 3 && int != 13 ? \"rd\" : \"th\"\n\t);\n}\n*/\n\nconst subs = {\n\t// 2019\n\tYYYY:\td => d.getFullYear(),\n\t// 19\n\tYY:\t\td => (d.getFullYear()+'').slice(2),\n\t// July\n\tMMMM:\t(d, names) => names.MMMM[d.getMonth()],\n\t// Jul\n\tMMM:\t(d, names) => names.MMM[d.getMonth()],\n\t// 07\n\tMM:\t\td => zeroPad2(d.getMonth()+1),\n\t// 7\n\tM:\t\td => d.getMonth()+1,\n\t// 09\n\tDD:\t\td => zeroPad2(d.getDate()),\n\t// 9\n\tD:\t\td => d.getDate(),\n\t// Monday\n\tWWWW:\t(d, names) => names.WWWW[d.getDay()],\n\t// Mon\n\tWWW:\t(d, names) => names.WWW[d.getDay()],\n\t// 03\n\tHH:\t\td => zeroPad2(d.getHours()),\n\t// 3\n\tH:\t\td => d.getHours(),\n\t// 9 (12hr, unpadded)\n\th:\t\td => {let h = d.getHours(); return h == 0 ? 12 : h > 12 ? h - 12 : h;},\n\t// AM\n\tAA:\t\td => d.getHours() >= 12 ? 'PM' : 'AM',\n\t// am\n\taa:\t\td => d.getHours() >= 12 ? 'pm' : 'am',\n\t// a\n\ta:\t\td => d.getHours() >= 12 ? 'p' : 'a',\n\t// 09\n\tmm:\t\td => zeroPad2(d.getMinutes()),\n\t// 9\n\tm:\t\td => d.getMinutes(),\n\t// 09\n\tss:\t\td => zeroPad2(d.getSeconds()),\n\t// 9\n\ts:\t\td => d.getSeconds(),\n\t// 374\n\tfff:\td => zeroPad3(d.getMilliseconds()),\n};\n\nfunction fmtDate(tpl, names) {\n\tnames = names || engNames;\n\tlet parts = [];\n\n\tlet R = /\\{([a-z]+)\\}|[^{]+/gi, m;\n\n\twhile (m = R.exec(tpl))\n\t\tparts.push(m[0][0] == '{' ? subs[m[1]] : m[0]);\n\n\treturn d => {\n\t\tlet out = '';\n\n\t\tfor (let i = 0; i < parts.length; i++)\n\t\t\tout += typeof parts[i] == \"string\" ? parts[i] : parts[i](d, names);\n\n\t\treturn out;\n\t}\n}\n\nconst localTz = new Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n// https://stackoverflow.com/questions/15141762/how-to-initialize-a-javascript-date-to-a-particular-time-zone/53652131#53652131\nfunction tzDate(date, tz) {\n\tlet date2;\n\n\t// perf optimization\n\tif (tz == 'UTC' || tz == 'Etc/UTC')\n\t\tdate2 = new Date(+date + date.getTimezoneOffset() * 6e4);\n\telse if (tz == localTz)\n\t\tdate2 = date;\n\telse {\n\t\tdate2 = new Date(date.toLocaleString('en-US', {timeZone: tz}));\n\t\tdate2.setMilliseconds(date.getMilliseconds());\n\t}\n\n\treturn date2;\n}\n\n//export const series = [];\n\n// default formatters:\n\nconst onlyWhole = v => v % 1 == 0;\n\nconst allMults = [1,2,2.5,5];\n\n// ...0.01, 0.02, 0.025, 0.05, 0.1, 0.2, 0.25, 0.5\nconst decIncrs = genIncrs(10, -32, 0, allMults);\n\n// 1, 2, 2.5, 5, 10, 20, 25, 50...\nconst oneIncrs = genIncrs(10, 0, 32, allMults);\n\n// 1, 2,      5, 10, 20, 25, 50...\nconst wholeIncrs = oneIncrs.filter(onlyWhole);\n\nconst numIncrs = decIncrs.concat(oneIncrs);\n\nconst NL = \"\\n\";\n\nconst yyyy    = \"{YYYY}\";\nconst NLyyyy  = NL + yyyy;\nconst md      = \"{M}/{D}\";\nconst NLmd    = NL + md;\nconst NLmdyy  = NLmd + \"/{YY}\";\n\nconst aa      = \"{aa}\";\nconst hmm     = \"{h}:{mm}\";\nconst hmmaa   = hmm + aa;\nconst NLhmmaa = NL + hmmaa;\nconst ss      = \":{ss}\";\n\nconst _ = null;\n\nfunction genTimeStuffs(ms) {\n\tlet\ts  = ms * 1e3,\n\t\tm  = s  * 60,\n\t\th  = m  * 60,\n\t\td  = h  * 24,\n\t\tmo = d  * 30,\n\t\ty  = d  * 365;\n\n\t// min of 1e-3 prevents setting a temporal x ticks too small since Date objects cannot advance ticks smaller than 1ms\n\tlet subSecIncrs = ms == 1 ? genIncrs(10, 0, 3, allMults).filter(onlyWhole) : genIncrs(10, -3, 0, allMults);\n\n\tlet timeIncrs = subSecIncrs.concat([\n\t\t// minute divisors (# of secs)\n\t\ts,\n\t\ts * 5,\n\t\ts * 10,\n\t\ts * 15,\n\t\ts * 30,\n\t\t// hour divisors (# of mins)\n\t\tm,\n\t\tm * 5,\n\t\tm * 10,\n\t\tm * 15,\n\t\tm * 30,\n\t\t// day divisors (# of hrs)\n\t\th,\n\t\th * 2,\n\t\th * 3,\n\t\th * 4,\n\t\th * 6,\n\t\th * 8,\n\t\th * 12,\n\t\t// month divisors TODO: need more?\n\t\td,\n\t\td * 2,\n\t\td * 3,\n\t\td * 4,\n\t\td * 5,\n\t\td * 6,\n\t\td * 7,\n\t\td * 8,\n\t\td * 9,\n\t\td * 10,\n\t\td * 15,\n\t\t// year divisors (# months, approx)\n\t\tmo,\n\t\tmo * 2,\n\t\tmo * 3,\n\t\tmo * 4,\n\t\tmo * 6,\n\t\t// century divisors\n\t\ty,\n\t\ty * 2,\n\t\ty * 5,\n\t\ty * 10,\n\t\ty * 25,\n\t\ty * 50,\n\t\ty * 100,\n\t]);\n\n\t// [0]:   minimum num secs in the tick incr\n\t// [1]:   default tick format\n\t// [2-7]: rollover tick formats\n\t// [8]:   mode: 0: replace [1] -> [2-7], 1: concat [1] + [2-7]\n\tconst _timeAxisStamps = [\n\t//   tick incr    default          year                    month   day                   hour    min       sec   mode\n\t\t[y,           yyyy,            _,                      _,      _,                    _,      _,        _,       1],\n\t\t[d * 28,      \"{MMM}\",         NLyyyy,                 _,      _,                    _,      _,        _,       1],\n\t\t[d,           md,              NLyyyy,                 _,      _,                    _,      _,        _,       1],\n\t\t[h,           \"{h}\" + aa,      NLmdyy,                 _,      NLmd,                 _,      _,        _,       1],\n\t\t[m,           hmmaa,           NLmdyy,                 _,      NLmd,                 _,      _,        _,       1],\n\t\t[s,           ss,              NLmdyy + \" \" + hmmaa,   _,      NLmd + \" \" + hmmaa,   _,      NLhmmaa,  _,       1],\n\t\t[ms,          ss + \".{fff}\",   NLmdyy + \" \" + hmmaa,   _,      NLmd + \" \" + hmmaa,   _,      NLhmmaa,  _,       1],\n\t];\n\n\t// the ensures that axis ticks, values & grid are aligned to logical temporal breakpoints and not an arbitrary timestamp\n\t// https://www.timeanddate.com/time/dst/\n\t// https://www.timeanddate.com/time/dst/2019.html\n\t// https://www.epochconverter.com/timezones\n\tfunction timeAxisSplits(tzDate) {\n\t\treturn (self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace) => {\n\t\t\tlet splits = [];\n\t\t\tlet isYr = foundIncr >= y;\n\t\t\tlet isMo = foundIncr >= mo && foundIncr < y;\n\n\t\t\t// get the timezone-adjusted date\n\t\t\tlet minDate = tzDate(scaleMin);\n\t\t\tlet minDateTs = roundDec(minDate * ms, 3);\n\n\t\t\t// get ts of 12am (this lands us at or before the original scaleMin)\n\t\t\tlet minMin = mkDate(minDate.getFullYear(), isYr ? 0 : minDate.getMonth(), isMo || isYr ? 1 : minDate.getDate());\n\t\t\tlet minMinTs = roundDec(minMin * ms, 3);\n\n\t\t\tif (isMo || isYr) {\n\t\t\t\tlet moIncr = isMo ? foundIncr / mo : 0;\n\t\t\t\tlet yrIncr = isYr ? foundIncr / y  : 0;\n\t\t\t//\tlet tzOffset = scaleMin - minDateTs;\t\t// needed?\n\t\t\t\tlet split = minDateTs == minMinTs ? minDateTs : roundDec(mkDate(minMin.getFullYear() + yrIncr, minMin.getMonth() + moIncr, 1) * ms, 3);\n\t\t\t\tlet splitDate = new Date(round(split / ms));\n\t\t\t\tlet baseYear = splitDate.getFullYear();\n\t\t\t\tlet baseMonth = splitDate.getMonth();\n\n\t\t\t\tfor (let i = 0; split <= scaleMax; i++) {\n\t\t\t\t\tlet next = mkDate(baseYear + yrIncr * i, baseMonth + moIncr * i, 1);\n\t\t\t\t\tlet offs = next - tzDate(roundDec(next * ms, 3));\n\n\t\t\t\t\tsplit = roundDec((+next + offs) * ms, 3);\n\n\t\t\t\t\tif (split <= scaleMax)\n\t\t\t\t\t\tsplits.push(split);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet incr0 = foundIncr >= d ? d : foundIncr;\n\t\t\t\tlet tzOffset = floor(scaleMin) - floor(minDateTs);\n\t\t\t\tlet split = minMinTs + tzOffset + incrRoundUp(minDateTs - minMinTs, incr0);\n\t\t\t\tsplits.push(split);\n\n\t\t\t\tlet date0 = tzDate(split);\n\n\t\t\t\tlet prevHour = date0.getHours() + (date0.getMinutes() / m) + (date0.getSeconds() / h);\n\t\t\t\tlet incrHours = foundIncr / h;\n\n\t\t\t\tlet minSpace = self.axes[axisIdx]._space;\n\t\t\t\tlet pctSpace = foundSpace / minSpace;\n\n\t\t\t\twhile (1) {\n\t\t\t\t\tsplit = roundDec(split + foundIncr, ms == 1 ? 0 : 3);\n\n\t\t\t\t\tif (split > scaleMax)\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tif (incrHours > 1) {\n\t\t\t\t\t\tlet expectedHour = floor(roundDec(prevHour + incrHours, 6)) % 24;\n\t\t\t\t\t\tlet splitDate = tzDate(split);\n\t\t\t\t\t\tlet actualHour = splitDate.getHours();\n\n\t\t\t\t\t\tlet dstShift = actualHour - expectedHour;\n\n\t\t\t\t\t\tif (dstShift > 1)\n\t\t\t\t\t\t\tdstShift = -1;\n\n\t\t\t\t\t\tsplit -= dstShift * h;\n\n\t\t\t\t\t\tprevHour = (prevHour + incrHours) % 24;\n\n\t\t\t\t\t\t// add a tick only if it's further than 70% of the min allowed label spacing\n\t\t\t\t\t\tlet prevSplit = splits[splits.length - 1];\n\t\t\t\t\t\tlet pctIncr = roundDec((split - prevSplit) / foundIncr, 3);\n\n\t\t\t\t\t\tif (pctIncr * pctSpace >= .7)\n\t\t\t\t\t\t\tsplits.push(split);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tsplits.push(split);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn splits;\n\t\t}\n\t}\n\n\treturn [\n\t\ttimeIncrs,\n\t\t_timeAxisStamps,\n\t\ttimeAxisSplits,\n\t];\n}\n\nconst [ timeIncrsMs, _timeAxisStampsMs, timeAxisSplitsMs ] = genTimeStuffs(1);\nconst [ timeIncrsS,  _timeAxisStampsS,  timeAxisSplitsS  ] = genTimeStuffs(1e-3);\n\n// base 2\ngenIncrs(2, -53, 53, [1]);\n\n/*\nconsole.log({\n\tdecIncrs,\n\toneIncrs,\n\twholeIncrs,\n\tnumIncrs,\n\ttimeIncrs,\n\tfixedDec,\n});\n*/\n\nfunction timeAxisStamps(stampCfg, fmtDate) {\n\treturn stampCfg.map(s => s.map((v, i) =>\n\t\ti == 0 || i == 8 || v == null ? v : fmtDate(i == 1 || s[8] == 0 ? v : s[1] + v)\n\t));\n}\n\n// TODO: will need to accept spaces[] and pull incr into the loop when grid will be non-uniform, eg for log scales.\n// currently we ignore this for months since they're *nearly* uniform and the added complexity is not worth it\nfunction timeAxisVals(tzDate, stamps) {\n\treturn (self, splits, axisIdx, foundSpace, foundIncr) => {\n\t\tlet s = stamps.find(s => foundIncr >= s[0]) || stamps[stamps.length - 1];\n\n\t\t// these track boundaries when a full label is needed again\n\t\tlet prevYear;\n\t\tlet prevMnth;\n\t\tlet prevDate;\n\t\tlet prevHour;\n\t\tlet prevMins;\n\t\tlet prevSecs;\n\n\t\treturn splits.map(split => {\n\t\t\tlet date = tzDate(split);\n\n\t\t\tlet newYear = date.getFullYear();\n\t\t\tlet newMnth = date.getMonth();\n\t\t\tlet newDate = date.getDate();\n\t\t\tlet newHour = date.getHours();\n\t\t\tlet newMins = date.getMinutes();\n\t\t\tlet newSecs = date.getSeconds();\n\n\t\t\tlet stamp = (\n\t\t\t\tnewYear != prevYear && s[2] ||\n\t\t\t\tnewMnth != prevMnth && s[3] ||\n\t\t\t\tnewDate != prevDate && s[4] ||\n\t\t\t\tnewHour != prevHour && s[5] ||\n\t\t\t\tnewMins != prevMins && s[6] ||\n\t\t\t\tnewSecs != prevSecs && s[7] ||\n\t\t\t\t                       s[1]\n\t\t\t);\n\n\t\t\tprevYear = newYear;\n\t\t\tprevMnth = newMnth;\n\t\t\tprevDate = newDate;\n\t\t\tprevHour = newHour;\n\t\t\tprevMins = newMins;\n\t\t\tprevSecs = newSecs;\n\n\t\t\treturn stamp(date);\n\t\t});\n\t}\n}\n\n// for when axis.values is defined as a static fmtDate template string\nfunction timeAxisVal(tzDate, dateTpl) {\n\tlet stamp = fmtDate(dateTpl);\n\treturn (self, splits, axisIdx, foundSpace, foundIncr) => splits.map(split => stamp(tzDate(split)));\n}\n\nfunction mkDate(y, m, d) {\n\treturn new Date(y, m, d);\n}\n\nfunction timeSeriesStamp(stampCfg, fmtDate) {\n\treturn fmtDate(stampCfg);\n}\nconst _timeSeriesStamp = '{YYYY}-{MM}-{DD} {h}:{mm}{aa}';\n\nfunction timeSeriesVal(tzDate, stamp) {\n\treturn (self, val, seriesIdx, dataIdx) => dataIdx == null ? LEGEND_DISP : stamp(tzDate(val));\n}\n\nfunction legendStroke(self, seriesIdx) {\n\tlet s = self.series[seriesIdx];\n\treturn s.width ? s.stroke(self, seriesIdx) : s.points.width ? s.points.stroke(self, seriesIdx) : null;\n}\n\nfunction legendFill(self, seriesIdx) {\n\treturn self.series[seriesIdx].fill(self, seriesIdx);\n}\n\nconst legendOpts = {\n\tshow: true,\n\tlive: true,\n\tisolate: false,\n\tmount: noop,\n\tmarkers: {\n\t\tshow: true,\n\t\twidth: 2,\n\t\tstroke: legendStroke,\n\t\tfill: legendFill,\n\t\tdash: \"solid\",\n\t},\n\tidx: null,\n\tidxs: null,\n\tvalues: [],\n};\n\nfunction cursorPointShow(self, si) {\n\tlet o = self.cursor.points;\n\n\tlet pt = placeDiv();\n\n\tlet size = o.size(self, si);\n\tsetStylePx(pt, WIDTH, size);\n\tsetStylePx(pt, HEIGHT, size);\n\n\tlet mar = size / -2;\n\tsetStylePx(pt, \"marginLeft\", mar);\n\tsetStylePx(pt, \"marginTop\", mar);\n\n\tlet width = o.width(self, si, size);\n\twidth && setStylePx(pt, \"borderWidth\", width);\n\n\treturn pt;\n}\n\nfunction cursorPointFill(self, si) {\n\tlet sp = self.series[si].points;\n\treturn sp._fill || sp._stroke;\n}\n\nfunction cursorPointStroke(self, si) {\n\tlet sp = self.series[si].points;\n\treturn sp._stroke || sp._fill;\n}\n\nfunction cursorPointSize(self, si) {\n\tlet sp = self.series[si].points;\n\treturn sp.size;\n}\n\nconst moveTuple = [0,0];\n\nfunction cursorMove(self, mouseLeft1, mouseTop1) {\n\tmoveTuple[0] = mouseLeft1;\n\tmoveTuple[1] = mouseTop1;\n\treturn moveTuple;\n}\n\nfunction filtBtn0(self, targ, handle, onlyTarg = true) {\n\treturn e => {\n\t\te.button == 0 && (!onlyTarg || e.target == targ) && handle(e);\n\t};\n}\n\nfunction filtTarg(self, targ, handle, onlyTarg = true) {\n\treturn e => {\n\t\t(!onlyTarg || e.target == targ) && handle(e);\n\t};\n}\n\nconst cursorOpts = {\n\tshow: true,\n\tx: true,\n\ty: true,\n\tlock: false,\n\tmove: cursorMove,\n\tpoints: {\n\t\tone:    false,\n\t\tshow:   cursorPointShow,\n\t\tsize:   cursorPointSize,\n\t\twidth:  0,\n\t\tstroke: cursorPointStroke,\n\t\tfill:   cursorPointFill,\n\t},\n\n\tbind: {\n\t\tmousedown:   filtBtn0,\n\t\tmouseup:     filtBtn0,\n\t\tclick:       filtBtn0, // legend clicks, not .u-over clicks\n\t\tdblclick:    filtBtn0,\n\n\t\tmousemove:   filtTarg,\n\t\tmouseleave:  filtTarg,\n\t\tmouseenter:  filtTarg,\n\t},\n\n\tdrag: {\n\t\tsetScale: true,\n\t\tx: true,\n\t\ty: false,\n\t\tdist: 0,\n\t\tuni: null,\n\t\tclick: (self, e) => {\n\t\t//\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t},\n\t\t_x: false,\n\t\t_y: false,\n\t},\n\n\tfocus: {\n\t\tdist: (self, seriesIdx, dataIdx, valPos, curPos) => valPos - curPos,\n\t\tprox: -1,\n\t\tbias: 0,\n\t},\n\n\thover: {\n\t\tskip: [void 0],\n\t\tprox: null,\n\t\tbias: 0,\n\t},\n\n\tleft: -10,\n\ttop: -10,\n\tidx: null,\n\tdataIdx: null,\n\tidxs: null,\n\n\tevent: null,\n};\n\nconst axisLines = {\n\tshow: true,\n\tstroke: \"rgba(0,0,0,0.07)\",\n\twidth: 2,\n//\tdash: [],\n};\n\nconst grid = assign({}, axisLines, {\n\tfilter: retArg1,\n});\n\nconst ticks = assign({}, grid, {\n\tsize: 10,\n});\n\nconst border = assign({}, axisLines, {\n\tshow: false,\n});\n\nconst font      = '12px system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"';\nconst labelFont = \"bold \" + font;\nconst lineGap = 1.5;\t// font-size multiplier\n\nconst xAxisOpts = {\n\tshow: true,\n\tscale: \"x\",\n\tstroke: hexBlack,\n\tspace: 50,\n\tgap: 5,\n\tsize: 50,\n\tlabelGap: 0,\n\tlabelSize: 30,\n\tlabelFont,\n\tside: 2,\n//\tclass: \"x-vals\",\n//\tincrs: timeIncrs,\n//\tvalues: timeVals,\n//\tfilter: retArg1,\n\tgrid,\n\tticks,\n\tborder,\n\tfont,\n\tlineGap,\n\trotate: 0,\n};\n\nconst numSeriesLabel = \"Value\";\nconst timeSeriesLabel = \"Time\";\n\nconst xSeriesOpts = {\n\tshow: true,\n\tscale: \"x\",\n\tauto: false,\n\tsorted: 1,\n//\tlabel: \"Time\",\n//\tvalue: v => stamp(new Date(v * 1e3)),\n\n\t// internal caches\n\tmin: inf,\n\tmax: -inf,\n\tidxs: [],\n};\n\nfunction numAxisVals(self, splits, axisIdx, foundSpace, foundIncr) {\n\treturn splits.map(v => v == null ? \"\" : fmtNum(v));\n}\n\nfunction numAxisSplits(self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace, forceMin) {\n\tlet splits = [];\n\n\tlet numDec = fixedDec.get(foundIncr) || 0;\n\n\tscaleMin = forceMin ? scaleMin : roundDec(incrRoundUp(scaleMin, foundIncr), numDec);\n\n\tfor (let val = scaleMin; val <= scaleMax; val = roundDec(val + foundIncr, numDec))\n\t\tsplits.push(Object.is(val, -0) ? 0 : val);\t\t// coalesces -0\n\n\treturn splits;\n}\n\n// this doesnt work for sin, which needs to come off from 0 independently in pos and neg dirs\nfunction logAxisSplits(self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace, forceMin) {\n\tconst splits = [];\n\n\tconst logBase = self.scales[self.axes[axisIdx].scale].log;\n\n\tconst logFn = logBase == 10 ? log10 : log2;\n\n\tconst exp = floor(logFn(scaleMin));\n\n\tfoundIncr = pow(logBase, exp);\n\n\t// boo: 10 ** -24 === 1.0000000000000001e-24\n\t// this grabs the proper 1e-24 one\n\tif (logBase == 10)\n\t\tfoundIncr = numIncrs[closestIdx(foundIncr, numIncrs)];\n\n\tlet split = scaleMin;\n\tlet nextMagIncr = foundIncr * logBase;\n\n\tif (logBase == 10)\n\t\tnextMagIncr = numIncrs[closestIdx(nextMagIncr, numIncrs)];\n\n\tdo {\n\t\tsplits.push(split);\n\t\tsplit = split + foundIncr;\n\n\t\tif (logBase == 10 && !fixedDec.has(split))\n\t\t\tsplit = roundDec(split, fixedDec.get(foundIncr));\n\n\t\tif (split >= nextMagIncr) {\n\t\t\tfoundIncr = split;\n\t\t\tnextMagIncr = foundIncr * logBase;\n\n\t\t\tif (logBase == 10)\n\t\t\t\tnextMagIncr = numIncrs[closestIdx(nextMagIncr, numIncrs)];\n\t\t}\n\t} while (split <= scaleMax);\n\n\treturn splits;\n}\n\nfunction asinhAxisSplits(self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace, forceMin) {\n\tlet sc = self.scales[self.axes[axisIdx].scale];\n\n\tlet linthresh = sc.asinh;\n\n\tlet posSplits = scaleMax > linthresh ? logAxisSplits(self, axisIdx, max(linthresh, scaleMin), scaleMax, foundIncr) : [linthresh];\n\tlet zero = scaleMax >= 0 && scaleMin <= 0 ? [0] : [];\n\tlet negSplits = scaleMin < -linthresh ? logAxisSplits(self, axisIdx, max(linthresh, -scaleMax), -scaleMin, foundIncr): [linthresh];\n\n\treturn negSplits.reverse().map(v => -v).concat(zero, posSplits);\n}\n\nconst RE_ALL   = /./;\nconst RE_12357 = /[12357]/;\nconst RE_125   = /[125]/;\nconst RE_1     = /1/;\n\nconst _filt = (splits, distr, re, keepMod) => splits.map((v, i) => ((distr == 4 && v == 0) || i % keepMod == 0 && re.test(v.toExponential()[v < 0 ? 1 : 0])) ? v : null);\n\nfunction log10AxisValsFilt(self, splits, axisIdx, foundSpace, foundIncr) {\n\tlet axis = self.axes[axisIdx];\n\tlet scaleKey = axis.scale;\n\tlet sc = self.scales[scaleKey];\n\n//\tif (sc.distr == 3 && sc.log == 2)\n//\t\treturn splits;\n\n\tlet valToPos = self.valToPos;\n\n\tlet minSpace = axis._space;\n\n\tlet _10 = valToPos(10, scaleKey);\n\n\tlet re = (\n\t\tvalToPos(9, scaleKey) - _10 >= minSpace ? RE_ALL :\n\t\tvalToPos(7, scaleKey) - _10 >= minSpace ? RE_12357 :\n\t\tvalToPos(5, scaleKey) - _10 >= minSpace ? RE_125 :\n\t\tRE_1\n\t);\n\n\tif (re == RE_1) {\n\t\tlet magSpace = abs(valToPos(1, scaleKey) - _10);\n\n\t\tif (magSpace < minSpace)\n\t\t\treturn _filt(splits.slice().reverse(), sc.distr, re, ceil(minSpace / magSpace)).reverse(); // max->min skip\n\t}\n\n\treturn _filt(splits, sc.distr, re, 1);\n}\n\nfunction log2AxisValsFilt(self, splits, axisIdx, foundSpace, foundIncr) {\n\tlet axis = self.axes[axisIdx];\n\tlet scaleKey = axis.scale;\n\tlet minSpace = axis._space;\n\tlet valToPos = self.valToPos;\n\n\tlet magSpace = abs(valToPos(1, scaleKey) - valToPos(2, scaleKey));\n\n\tif (magSpace < minSpace)\n\t\treturn _filt(splits.slice().reverse(), 3, RE_ALL, ceil(minSpace / magSpace)).reverse(); // max->min skip\n\n\treturn splits;\n}\n\nfunction numSeriesVal(self, val, seriesIdx, dataIdx) {\n\treturn dataIdx == null ? LEGEND_DISP : val == null ? \"\" : fmtNum(val);\n}\n\nconst yAxisOpts = {\n\tshow: true,\n\tscale: \"y\",\n\tstroke: hexBlack,\n\tspace: 30,\n\tgap: 5,\n\tsize: 50,\n\tlabelGap: 0,\n\tlabelSize: 30,\n\tlabelFont,\n\tside: 3,\n//\tclass: \"y-vals\",\n//\tincrs: numIncrs,\n//\tvalues: (vals, space) => vals,\n//\tfilter: retArg1,\n\tgrid,\n\tticks,\n\tborder,\n\tfont,\n\tlineGap,\n\trotate: 0,\n};\n\n// takes stroke width\nfunction ptDia(width, mult) {\n\tlet dia = 3 + (width || 1) * 2;\n\treturn roundDec(dia * mult, 3);\n}\n\nfunction seriesPointsShow(self, si) {\n\tlet { scale, idxs } = self.series[0];\n\tlet xData = self._data[0];\n\tlet p0 = self.valToPos(xData[idxs[0]], scale, true);\n\tlet p1 = self.valToPos(xData[idxs[1]], scale, true);\n\tlet dim = abs(p1 - p0);\n\n\tlet s = self.series[si];\n//\tconst dia = ptDia(s.width, pxRatio);\n\tlet maxPts = dim / (s.points.space * pxRatio);\n\treturn idxs[1] - idxs[0] <= maxPts;\n}\n\nconst facet = {\n\tscale: null,\n\tauto: true,\n\tsorted: 0,\n\n\t// internal caches\n\tmin: inf,\n\tmax: -inf,\n};\n\nconst gaps = (self, seriesIdx, idx0, idx1, nullGaps) => nullGaps;\n\nconst xySeriesOpts = {\n\tshow: true,\n\tauto: true,\n\tsorted: 0,\n\tgaps,\n\talpha: 1,\n\tfacets: [\n\t\tassign({}, facet, {scale: 'x'}),\n\t\tassign({}, facet, {scale: 'y'}),\n\t],\n};\n\nconst ySeriesOpts = {\n\tscale: \"y\",\n\tauto: true,\n\tsorted: 0,\n\tshow: true,\n\tspanGaps: false,\n\tgaps,\n\talpha: 1,\n\tpoints: {\n\t\tshow: seriesPointsShow,\n\t\tfilter: null,\n\t//  paths:\n\t//\tstroke: \"#000\",\n\t//\tfill: \"#fff\",\n\t//\twidth: 1,\n\t//\tsize: 10,\n\t},\n//\tlabel: \"Value\",\n//\tvalue: v => v,\n\tvalues: null,\n\n\t// internal caches\n\tmin: inf,\n\tmax: -inf,\n\tidxs: [],\n\n\tpath: null,\n\tclip: null,\n};\n\nfunction clampScale(self, val, scaleMin, scaleMax, scaleKey) {\n/*\n\tif (val < 0) {\n\t\tlet cssHgt = self.bbox.height / pxRatio;\n\t\tlet absPos = self.valToPos(abs(val), scaleKey);\n\t\tlet fromBtm = cssHgt - absPos;\n\t\treturn self.posToVal(cssHgt + fromBtm, scaleKey);\n\t}\n*/\n\treturn scaleMin / 10;\n}\n\nconst xScaleOpts = {\n\ttime: FEAT_TIME,\n\tauto: true,\n\tdistr: 1,\n\tlog: 10,\n\tasinh: 1,\n\tmin: null,\n\tmax: null,\n\tdir: 1,\n\tori: 0,\n};\n\nconst yScaleOpts = assign({}, xScaleOpts, {\n\ttime: false,\n\tori: 1,\n});\n\nconst syncs = {};\n\nfunction _sync(key, opts) {\n\tlet s = syncs[key];\n\n\tif (!s) {\n\t\ts = {\n\t\t\tkey,\n\t\t\tplots: [],\n\t\t\tsub(plot) {\n\t\t\t\ts.plots.push(plot);\n\t\t\t},\n\t\t\tunsub(plot) {\n\t\t\t\ts.plots = s.plots.filter(c => c != plot);\n\t\t\t},\n\t\t\tpub(type, self, x, y, w, h, i) {\n\t\t\t\tfor (let j = 0; j < s.plots.length; j++)\n\t\t\t\t\ts.plots[j] != self && s.plots[j].pub(type, self, x, y, w, h, i);\n\t\t\t},\n\t\t};\n\n\t\tif (key != null)\n\t\t\tsyncs[key] = s;\n\t}\n\n\treturn s;\n}\n\nconst BAND_CLIP_FILL   = 1 << 0;\nconst BAND_CLIP_STROKE = 1 << 1;\n\nfunction orient(u, seriesIdx, cb) {\n\tconst mode = u.mode;\n\tconst series = u.series[seriesIdx];\n\tconst data = mode == 2 ? u._data[seriesIdx] : u._data;\n\tconst scales = u.scales;\n\tconst bbox   = u.bbox;\n\n\tlet dx = data[0],\n\t\tdy = mode == 2 ? data[1] : data[seriesIdx],\n\t\tsx = mode == 2 ? scales[series.facets[0].scale] : scales[u.series[0].scale],\n\t\tsy = mode == 2 ? scales[series.facets[1].scale] : scales[series.scale],\n\t\tl = bbox.left,\n\t\tt = bbox.top,\n\t\tw = bbox.width,\n\t\th = bbox.height,\n\t\tH = u.valToPosH,\n\t\tV = u.valToPosV;\n\n\treturn (sx.ori == 0\n\t\t? cb(\n\t\t\tseries,\n\t\t\tdx,\n\t\t\tdy,\n\t\t\tsx,\n\t\t\tsy,\n\t\t\tH,\n\t\t\tV,\n\t\t\tl,\n\t\t\tt,\n\t\t\tw,\n\t\t\th,\n\t\t\tmoveToH,\n\t\t\tlineToH,\n\t\t\trectH,\n\t\t\tarcH,\n\t\t\tbezierCurveToH,\n\t\t)\n\t\t: cb(\n\t\t\tseries,\n\t\t\tdx,\n\t\t\tdy,\n\t\t\tsx,\n\t\t\tsy,\n\t\t\tV,\n\t\t\tH,\n\t\t\tt,\n\t\t\tl,\n\t\t\th,\n\t\t\tw,\n\t\t\tmoveToV,\n\t\t\tlineToV,\n\t\t\trectV,\n\t\t\tarcV,\n\t\t\tbezierCurveToV,\n\t\t)\n\t);\n}\n\nfunction bandFillClipDirs(self, seriesIdx) {\n\tlet fillDir = 0;\n\n\t// 2 bits, -1 | 1\n\tlet clipDirs = 0;\n\n\tlet bands = ifNull(self.bands, EMPTY_ARR);\n\n\tfor (let i = 0; i < bands.length; i++) {\n\t\tlet b = bands[i];\n\n\t\t// is a \"from\" band edge\n\t\tif (b.series[0] == seriesIdx)\n\t\t\tfillDir = b.dir;\n\t\t// is a \"to\" band edge\n\t\telse if (b.series[1] == seriesIdx) {\n\t\t\tif (b.dir == 1)\n\t\t\t\tclipDirs |= 1;\n\t\t\telse\n\t\t\t\tclipDirs |= 2;\n\t\t}\n\t}\n\n\treturn [\n\t\tfillDir,\n\t\t(\n\t\t\tclipDirs == 1 ? -1 : // neg only\n\t\t\tclipDirs == 2 ?  1 : // pos only\n\t\t\tclipDirs == 3 ?  2 : // both\n\t\t\t                 0   // neither\n\t\t)\n\t];\n}\n\nfunction seriesFillTo(self, seriesIdx, dataMin, dataMax, bandFillDir) {\n\tlet mode = self.mode;\n\tlet series = self.series[seriesIdx];\n\tlet scaleKey = mode == 2 ? series.facets[1].scale : series.scale;\n\tlet scale = self.scales[scaleKey];\n\n\treturn (\n\t\tbandFillDir == -1 ? scale.min :\n\t\tbandFillDir ==  1 ? scale.max :\n\t\tscale.distr ==  3 ? (\n\t\t\tscale.dir == 1 ? scale.min :\n\t\t\tscale.max\n\t\t) : 0\n\t);\n}\n\n// creates inverted band clip path (from stroke path -> yMax || yMin)\n// clipDir is always inverse of fillDir\n// default clip dir is upwards (1), since default band fill is downwards/fillBelowTo (-1) (highIdx -> lowIdx)\nfunction clipBandLine(self, seriesIdx, idx0, idx1, strokePath, clipDir) {\n\treturn orient(self, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n\t\tlet pxRound = series.pxRound;\n\n\t\tconst dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n\t\tconst lineTo = scaleX.ori == 0 ? lineToH : lineToV;\n\n\t\tlet frIdx, toIdx;\n\n\t\tif (dir == 1) {\n\t\t\tfrIdx = idx0;\n\t\t\ttoIdx = idx1;\n\t\t}\n\t\telse {\n\t\t\tfrIdx = idx1;\n\t\t\ttoIdx = idx0;\n\t\t}\n\n\t\t// path start\n\t\tlet x0 = pxRound(valToPosX(dataX[frIdx], scaleX, xDim, xOff));\n\t\tlet y0 = pxRound(valToPosY(dataY[frIdx], scaleY, yDim, yOff));\n\t\t// path end x\n\t\tlet x1 = pxRound(valToPosX(dataX[toIdx], scaleX, xDim, xOff));\n\t\t// upper or lower y limit\n\t\tlet yLimit = pxRound(valToPosY(clipDir == 1 ? scaleY.max : scaleY.min, scaleY, yDim, yOff));\n\n\t\tlet clip = new Path2D(strokePath);\n\n\t\tlineTo(clip, x1, yLimit);\n\t\tlineTo(clip, x0, yLimit);\n\t\tlineTo(clip, x0, y0);\n\n\t\treturn clip;\n\t});\n}\n\nfunction clipGaps(gaps, ori, plotLft, plotTop, plotWid, plotHgt) {\n\tlet clip = null;\n\n\t// create clip path (invert gaps and non-gaps)\n\tif (gaps.length > 0) {\n\t\tclip = new Path2D();\n\n\t\tconst rect = ori == 0 ? rectH : rectV;\n\n\t\tlet prevGapEnd = plotLft;\n\n\t\tfor (let i = 0; i < gaps.length; i++) {\n\t\t\tlet g = gaps[i];\n\n\t\t\tif (g[1] > g[0]) {\n\t\t\t\tlet w = g[0] - prevGapEnd;\n\n\t\t\t\tw > 0 && rect(clip, prevGapEnd, plotTop, w, plotTop + plotHgt);\n\n\t\t\t\tprevGapEnd = g[1];\n\t\t\t}\n\t\t}\n\n\t\tlet w = plotLft + plotWid - prevGapEnd;\n\n\t\t// hack to ensure we expand the clip enough to avoid cutting off strokes at edges\n\t\tlet maxStrokeWidth = 10;\n\n\t\tw > 0 && rect(clip, prevGapEnd, plotTop - maxStrokeWidth / 2, w, plotTop + plotHgt + maxStrokeWidth);\n\t}\n\n\treturn clip;\n}\n\nfunction addGap(gaps, fromX, toX) {\n\tlet prevGap = gaps[gaps.length - 1];\n\n\tif (prevGap && prevGap[0] == fromX)\t\t\t// TODO: gaps must be encoded at stroke widths?\n\t\tprevGap[1] = toX;\n\telse\n\t\tgaps.push([fromX, toX]);\n}\n\nfunction findGaps(xs, ys, idx0, idx1, dir, pixelForX, align) {\n\tlet gaps = [];\n\tlet len = xs.length;\n\n\tfor (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n\t\tlet yVal = ys[i];\n\n\t\tif (yVal === null) {\n\t\t\tlet fr = i, to = i;\n\n\t\t\tif (dir == 1) {\n\t\t\t\twhile (++i <= idx1 && ys[i] === null)\n\t\t\t\t\tto = i;\n\t\t\t}\n\t\t\telse {\n\t\t\t\twhile (--i >= idx0 && ys[i] === null)\n\t\t\t\t\tto = i;\n\t\t\t}\n\n\t\t\tlet frPx = pixelForX(xs[fr]);\n\t\t\tlet toPx = to == fr ? frPx : pixelForX(xs[to]);\n\n\t\t\t// if value adjacent to edge null is same pixel, then it's partially\n\t\t\t// filled and gap should start at next pixel\n\t\t\tlet fri2 = fr - dir;\n\t\t\tlet frPx2 = align <= 0 && fri2 >= 0 && fri2 < len ? pixelForX(xs[fri2]) : frPx;\n\t\t//\tif (frPx2 == frPx)\n\t\t//\t\tfrPx++;\n\t\t//\telse\n\t\t\t\tfrPx = frPx2;\n\n\t\t\tlet toi2 = to + dir;\n\t\t\tlet toPx2 = align >= 0 && toi2 >= 0 && toi2 < len ? pixelForX(xs[toi2]) : toPx;\n\t\t//\tif (toPx2 == toPx)\n\t\t//\t\ttoPx--;\n\t\t//\telse\n\t\t\t\ttoPx = toPx2;\n\n\t\t\tif (toPx >= frPx)\n\t\t\t\tgaps.push([frPx, toPx]); // addGap\n\t\t}\n\t}\n\n\treturn gaps;\n}\n\nfunction pxRoundGen(pxAlign) {\n\treturn pxAlign == 0 ? retArg0 : pxAlign == 1 ? round : v => incrRound(v, pxAlign);\n}\n\n/*\n// inefficient linear interpolation that does bi-directinal scans on each call\nexport function costlyLerp(i, idx0, idx1, _dirX, dataY) {\n\tlet prevNonNull = nonNullIdx(dataY, _dirX == 1 ? idx0 : idx1, i, -_dirX);\n\tlet nextNonNull = nonNullIdx(dataY, i, _dirX == 1 ? idx1 : idx0,  _dirX);\n\n\tlet prevVal = dataY[prevNonNull];\n\tlet nextVal = dataY[nextNonNull];\n\n\treturn prevVal + (i - prevNonNull) / (nextNonNull - prevNonNull) * (nextVal - prevVal);\n}\n*/\n\nfunction rect(ori) {\n\tlet moveTo = ori == 0 ?\n\t\tmoveToH :\n\t\tmoveToV;\n\n\tlet arcTo = ori == 0 ?\n\t\t(p, x1, y1, x2, y2, r) => { p.arcTo(x1, y1, x2, y2, r); } :\n\t\t(p, y1, x1, y2, x2, r) => { p.arcTo(x1, y1, x2, y2, r); };\n\n\tlet rect = ori == 0 ?\n\t\t(p, x, y, w, h) => { p.rect(x, y, w, h); } :\n\t\t(p, y, x, h, w) => { p.rect(x, y, w, h); };\n\n\t// TODO (pending better browser support): https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/roundRect\n\treturn (p, x, y, w, h, endRad = 0, baseRad = 0) => {\n\t\tif (endRad == 0 && baseRad == 0)\n\t\t\trect(p, x, y, w, h);\n\t\telse {\n\t\t\tendRad  = min(endRad,  w / 2, h / 2);\n\t\t\tbaseRad = min(baseRad, w / 2, h / 2);\n\n\t\t\t// adapted from https://stackoverflow.com/questions/1255512/how-to-draw-a-rounded-rectangle-using-html-canvas/7838871#7838871\n\t\t\tmoveTo(p, x + endRad, y);\n\t\t\tarcTo(p, x + w, y, x + w, y + h, endRad);\n\t\t\tarcTo(p, x + w, y + h, x, y + h, baseRad);\n\t\t\tarcTo(p, x, y + h, x, y, baseRad);\n\t\t\tarcTo(p, x, y, x + w, y, endRad);\n\t\t\tp.closePath();\n\t\t}\n\t};\n}\n\n// orientation-inverting canvas functions\nconst moveToH = (p, x, y) => { p.moveTo(x, y); };\nconst moveToV = (p, y, x) => { p.moveTo(x, y); };\nconst lineToH = (p, x, y) => { p.lineTo(x, y); };\nconst lineToV = (p, y, x) => { p.lineTo(x, y); };\nconst rectH = rect(0);\nconst rectV = rect(1);\nconst arcH = (p, x, y, r, startAngle, endAngle) => { p.arc(x, y, r, startAngle, endAngle); };\nconst arcV = (p, y, x, r, startAngle, endAngle) => { p.arc(x, y, r, startAngle, endAngle); };\nconst bezierCurveToH = (p, bp1x, bp1y, bp2x, bp2y, p2x, p2y) => { p.bezierCurveTo(bp1x, bp1y, bp2x, bp2y, p2x, p2y); };\nconst bezierCurveToV = (p, bp1y, bp1x, bp2y, bp2x, p2y, p2x) => { p.bezierCurveTo(bp1x, bp1y, bp2x, bp2y, p2x, p2y); };\n\n// TODO: drawWrap(seriesIdx, drawPoints) (save, restore, translate, clip)\nfunction points(opts) {\n\treturn (u, seriesIdx, idx0, idx1, filtIdxs) => {\n\t//\tlog(\"drawPoints()\", arguments);\n\n\t\treturn orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n\t\t\tlet { pxRound, points } = series;\n\n\t\t\tlet moveTo, arc;\n\n\t\t\tif (scaleX.ori == 0) {\n\t\t\t\tmoveTo = moveToH;\n\t\t\t\tarc = arcH;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmoveTo = moveToV;\n\t\t\t\tarc = arcV;\n\t\t\t}\n\n\t\t\tconst width = roundDec(points.width * pxRatio, 3);\n\n\t\t\tlet rad = (points.size - points.width) / 2 * pxRatio;\n\t\t\tlet dia = roundDec(rad * 2, 3);\n\n\t\t\tlet fill = new Path2D();\n\t\t\tlet clip = new Path2D();\n\n\t\t\tlet { left: lft, top: top, width: wid, height: hgt } = u.bbox;\n\n\t\t\trectH(clip,\n\t\t\t\tlft - dia,\n\t\t\t\ttop - dia,\n\t\t\t\twid + dia * 2,\n\t\t\t\thgt + dia * 2,\n\t\t\t);\n\n\t\t\tconst drawPoint = pi => {\n\t\t\t\tif (dataY[pi] != null) {\n\t\t\t\t\tlet x = pxRound(valToPosX(dataX[pi], scaleX, xDim, xOff));\n\t\t\t\t\tlet y = pxRound(valToPosY(dataY[pi], scaleY, yDim, yOff));\n\n\t\t\t\t\tmoveTo(fill, x + rad, y);\n\t\t\t\t\tarc(fill, x, y, rad, 0, PI * 2);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (filtIdxs)\n\t\t\t\tfiltIdxs.forEach(drawPoint);\n\t\t\telse {\n\t\t\t\tfor (let pi = idx0; pi <= idx1; pi++)\n\t\t\t\t\tdrawPoint(pi);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tstroke: width > 0 ? fill : null,\n\t\t\t\tfill,\n\t\t\t\tclip,\n\t\t\t\tflags: BAND_CLIP_FILL | BAND_CLIP_STROKE,\n\t\t\t};\n\t\t});\n\t};\n}\n\nfunction _drawAcc(lineTo) {\n\treturn (stroke, accX, minY, maxY, inY, outY) => {\n\t\tif (minY != maxY) {\n\t\t\tif (inY != minY && outY != minY)\n\t\t\t\tlineTo(stroke, accX, minY);\n\t\t\tif (inY != maxY && outY != maxY)\n\t\t\t\tlineTo(stroke, accX, maxY);\n\n\t\t\tlineTo(stroke, accX, outY);\n\t\t}\n\t};\n}\n\nconst drawAccH = _drawAcc(lineToH);\nconst drawAccV = _drawAcc(lineToV);\n\nfunction linear(opts) {\n\tconst alignGaps = ifNull(opts?.alignGaps, 0);\n\n\treturn (u, seriesIdx, idx0, idx1) => {\n\t\treturn orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n\t\t\t[idx0, idx1] = nonNullIdxs(dataY, idx0, idx1);\n\n\t\t\tlet pxRound = series.pxRound;\n\n\t\t\tlet pixelForX = val => pxRound(valToPosX(val, scaleX, xDim, xOff));\n\t\t\tlet pixelForY = val => pxRound(valToPosY(val, scaleY, yDim, yOff));\n\n\t\t\tlet lineTo, drawAcc;\n\n\t\t\tif (scaleX.ori == 0) {\n\t\t\t\tlineTo = lineToH;\n\t\t\t\tdrawAcc = drawAccH;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlineTo = lineToV;\n\t\t\t\tdrawAcc = drawAccV;\n\t\t\t}\n\n\t\t\tconst dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n\n\t\t\tconst _paths = {stroke: new Path2D(), fill: null, clip: null, band: null, gaps: null, flags: BAND_CLIP_FILL};\n\t\t\tconst stroke = _paths.stroke;\n\n\t\t\tlet hasGap = false;\n\n\t\t\t// decimate when number of points >= 4x available pixels\n\t\t\tconst decimate = idx1 - idx0 >= xDim * 4;\n\n\t\t\tif (decimate) {\n\t\t\t\tlet xForPixel = pos => u.posToVal(pos, scaleX.key, true);\n\n\t\t\t\tlet minY = null,\n\t\t\t\t\tmaxY = null,\n\t\t\t\t\tinY, outY, drawnAtX;\n\n\t\t\t\tlet accX = pixelForX(dataX[dir == 1 ? idx0 : idx1]);\n\n\t\t\t\tlet idx0px = pixelForX(dataX[idx0]);\n\t\t\t\tlet idx1px = pixelForX(dataX[idx1]);\n\n\t\t\t\t// tracks limit of current x bucket to avoid having to get x pixel for every x value\n\t\t\t\tlet nextAccXVal = xForPixel(dir == 1 ? idx0px + 1 : idx1px - 1);\n\n\t\t\t\tfor (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n\t\t\t\t\tlet xVal = dataX[i];\n\t\t\t\t\tlet reuseAccX = dir == 1 ? (xVal < nextAccXVal) : (xVal > nextAccXVal);\n\t\t\t\t\tlet x = reuseAccX ? accX :  pixelForX(xVal);\n\n\t\t\t\t\tlet yVal = dataY[i];\n\n\t\t\t\t\tif (x == accX) {\n\t\t\t\t\t\tif (yVal != null) {\n\t\t\t\t\t\t\toutY = yVal;\n\n\t\t\t\t\t\t\tif (minY == null) {\n\t\t\t\t\t\t\t\tlineTo(stroke, x, pixelForY(outY));\n\t\t\t\t\t\t\t\tinY = minY = maxY = outY;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (outY < minY)\n\t\t\t\t\t\t\t\t\tminY = outY;\n\t\t\t\t\t\t\t\telse if (outY > maxY)\n\t\t\t\t\t\t\t\t\tmaxY = outY;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (yVal === null)\n\t\t\t\t\t\t\t\thasGap = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (minY != null)\n\t\t\t\t\t\t\tdrawAcc(stroke, accX, pixelForY(minY), pixelForY(maxY), pixelForY(inY), pixelForY(outY));\n\n\t\t\t\t\t\tif (yVal != null) {\n\t\t\t\t\t\t\toutY = yVal;\n\t\t\t\t\t\t\tlineTo(stroke, x, pixelForY(outY));\n\t\t\t\t\t\t\tminY = maxY = inY = outY;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tminY = maxY = null;\n\n\t\t\t\t\t\t\tif (yVal === null)\n\t\t\t\t\t\t\t\thasGap = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\taccX = x;\n\t\t\t\t\t\tnextAccXVal = xForPixel(accX + dir);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (minY != null && minY != maxY && drawnAtX != accX)\n\t\t\t\t\tdrawAcc(stroke, accX, pixelForY(minY), pixelForY(maxY), pixelForY(inY), pixelForY(outY));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n\t\t\t\t\tlet yVal = dataY[i];\n\n\t\t\t\t\tif (yVal === null)\n\t\t\t\t\t\thasGap = true;\n\t\t\t\t\telse if (yVal != null)\n\t\t\t\t\t\tlineTo(stroke, pixelForX(dataX[i]), pixelForY(yVal));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet [ bandFillDir, bandClipDir ] = bandFillClipDirs(u, seriesIdx);\n\n\t\t\tif (series.fill != null || bandFillDir != 0) {\n\t\t\t\tlet fill = _paths.fill = new Path2D(stroke);\n\n\t\t\t\tlet fillToVal = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n\t\t\t\tlet fillToY = pixelForY(fillToVal);\n\n\t\t\t\tlet frX = pixelForX(dataX[idx0]);\n\t\t\t\tlet toX = pixelForX(dataX[idx1]);\n\n\t\t\t\tif (dir == -1)\n\t\t\t\t\t[toX, frX] = [frX, toX];\n\n\t\t\t\tlineTo(fill, toX, fillToY);\n\t\t\t\tlineTo(fill, frX, fillToY);\n\t\t\t}\n\n\t\t\tif (!series.spanGaps) { // skip in mode: 2?\n\t\t\t//\tconsole.time('gaps');\n\t\t\t\tlet gaps = [];\n\n\t\t\t\thasGap && gaps.push(...findGaps(dataX, dataY, idx0, idx1, dir, pixelForX, alignGaps));\n\n\t\t\t//\tconsole.timeEnd('gaps');\n\n\t\t\t//\tconsole.log('gaps', JSON.stringify(gaps));\n\n\t\t\t\t_paths.gaps = gaps = series.gaps(u, seriesIdx, idx0, idx1, gaps);\n\n\t\t\t\t_paths.clip = clipGaps(gaps, scaleX.ori, xOff, yOff, xDim, yDim);\n\t\t\t}\n\n\t\t\tif (bandClipDir != 0) {\n\t\t\t\t_paths.band = bandClipDir == 2 ? [\n\t\t\t\t\tclipBandLine(u, seriesIdx, idx0, idx1, stroke, -1),\n\t\t\t\t\tclipBandLine(u, seriesIdx, idx0, idx1, stroke,  1),\n\t\t\t\t] : clipBandLine(u, seriesIdx, idx0, idx1, stroke, bandClipDir);\n\t\t\t}\n\n\t\t\treturn _paths;\n\t\t});\n\t};\n}\n\n// BUG: align: -1 behaves like align: 1 when scale.dir: -1\nfunction stepped(opts) {\n\tconst align = ifNull(opts.align, 1);\n\t// whether to draw ascenders/descenders at null/gap bondaries\n\tconst ascDesc = ifNull(opts.ascDesc, false);\n\tconst alignGaps = ifNull(opts.alignGaps, 0);\n\tconst extend = ifNull(opts.extend, false);\n\n\treturn (u, seriesIdx, idx0, idx1) => {\n\t\treturn orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n\t\t\t[idx0, idx1] = nonNullIdxs(dataY, idx0, idx1);\n\n\t\t\tlet pxRound = series.pxRound;\n\n\t\t\tlet { left, width } = u.bbox;\n\n\t\t\tlet pixelForX = val => pxRound(valToPosX(val, scaleX, xDim, xOff));\n\t\t\tlet pixelForY = val => pxRound(valToPosY(val, scaleY, yDim, yOff));\n\n\t\t\tlet lineTo = scaleX.ori == 0 ? lineToH : lineToV;\n\n\t\t\tconst _paths = {stroke: new Path2D(), fill: null, clip: null, band: null, gaps: null, flags: BAND_CLIP_FILL};\n\t\t\tconst stroke = _paths.stroke;\n\n\t\t\tconst dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n\n\t\t\tlet prevYPos  = pixelForY(dataY[dir == 1 ? idx0 : idx1]);\n\t\t\tlet firstXPos = pixelForX(dataX[dir == 1 ? idx0 : idx1]);\n\t\t\tlet prevXPos = firstXPos;\n\n\t\t\tlet firstXPosExt = firstXPos;\n\n\t\t\tif (extend && align == -1) {\n\t\t\t\tfirstXPosExt = left;\n\t\t\t\tlineTo(stroke, firstXPosExt, prevYPos);\n\t\t\t}\n\n\t\t\tlineTo(stroke, firstXPos, prevYPos);\n\n\t\t\tfor (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n\t\t\t\tlet yVal1 = dataY[i];\n\n\t\t\t\tif (yVal1 == null)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tlet x1 = pixelForX(dataX[i]);\n\t\t\t\tlet y1 = pixelForY(yVal1);\n\n\t\t\t\tif (align == 1)\n\t\t\t\t\tlineTo(stroke, x1, prevYPos);\n\t\t\t\telse\n\t\t\t\t\tlineTo(stroke, prevXPos, y1);\n\n\t\t\t\tlineTo(stroke, x1, y1);\n\n\t\t\t\tprevYPos = y1;\n\t\t\t\tprevXPos = x1;\n\t\t\t}\n\n\t\t\tlet prevXPosExt = prevXPos;\n\n\t\t\tif (extend && align == 1) {\n\t\t\t\tprevXPosExt = left + width;\n\t\t\t\tlineTo(stroke, prevXPosExt, prevYPos);\n\t\t\t}\n\n\t\t\tlet [ bandFillDir, bandClipDir ] = bandFillClipDirs(u, seriesIdx);\n\n\t\t\tif (series.fill != null || bandFillDir != 0) {\n\t\t\t\tlet fill = _paths.fill = new Path2D(stroke);\n\n\t\t\t\tlet fillTo = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n\t\t\t\tlet fillToY = pixelForY(fillTo);\n\n\t\t\t\tlineTo(fill, prevXPosExt, fillToY);\n\t\t\t\tlineTo(fill, firstXPosExt, fillToY);\n\t\t\t}\n\n\t\t\tif (!series.spanGaps) {\n\t\t\t//\tconsole.time('gaps');\n\t\t\t\tlet gaps = [];\n\n\t\t\t\tgaps.push(...findGaps(dataX, dataY, idx0, idx1, dir, pixelForX, alignGaps));\n\n\t\t\t//\tconsole.timeEnd('gaps');\n\n\t\t\t//\tconsole.log('gaps', JSON.stringify(gaps));\n\n\t\t\t\t// expand/contract clips for ascenders/descenders\n\t\t\t\tlet halfStroke = (series.width * pxRatio) / 2;\n\t\t\t\tlet startsOffset = (ascDesc || align ==  1) ?  halfStroke : -halfStroke;\n\t\t\t\tlet endsOffset   = (ascDesc || align == -1) ? -halfStroke :  halfStroke;\n\n\t\t\t\tgaps.forEach(g => {\n\t\t\t\t\tg[0] += startsOffset;\n\t\t\t\t\tg[1] += endsOffset;\n\t\t\t\t});\n\n\t\t\t\t_paths.gaps = gaps = series.gaps(u, seriesIdx, idx0, idx1, gaps);\n\n\t\t\t\t_paths.clip = clipGaps(gaps, scaleX.ori, xOff, yOff, xDim, yDim);\n\t\t\t}\n\n\t\t\tif (bandClipDir != 0) {\n\t\t\t\t_paths.band = bandClipDir == 2 ? [\n\t\t\t\t\tclipBandLine(u, seriesIdx, idx0, idx1, stroke, -1),\n\t\t\t\t\tclipBandLine(u, seriesIdx, idx0, idx1, stroke,  1),\n\t\t\t\t] : clipBandLine(u, seriesIdx, idx0, idx1, stroke, bandClipDir);\n\t\t\t}\n\n\t\t\treturn _paths;\n\t\t});\n\t};\n}\n\nfunction findColWidth(dataX, dataY, valToPosX, scaleX, xDim, xOff, colWid = inf) {\n\tif (dataX.length > 1) {\n\t\t// prior index with non-undefined y data\n\t\tlet prevIdx = null;\n\n\t\t// scan full dataset for smallest adjacent delta\n\t\t// will not work properly for non-linear x scales, since does not do expensive valToPosX calcs till end\n\t\tfor (let i = 0, minDelta = Infinity; i < dataX.length; i++) {\n\t\t\tif (dataY[i] !== undefined) {\n\t\t\t\tif (prevIdx != null) {\n\t\t\t\t\tlet delta = abs(dataX[i] - dataX[prevIdx]);\n\n\t\t\t\t\tif (delta < minDelta) {\n\t\t\t\t\t\tminDelta = delta;\n\t\t\t\t\t\tcolWid = abs(valToPosX(dataX[i], scaleX, xDim, xOff) - valToPosX(dataX[prevIdx], scaleX, xDim, xOff));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tprevIdx = i;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn colWid;\n}\n\nfunction bars(opts) {\n\topts = opts || EMPTY_OBJ;\n\tconst size = ifNull(opts.size, [0.6, inf, 1]);\n\tconst align = opts.align || 0;\n\tconst _extraGap = (opts.gap || 0);\n\n\tlet ro = opts.radius;\n\n\tro =\n\t\t// [valueRadius, baselineRadius]\n\t\tro == null ? [0, 0] :\n\t\ttypeof ro == 'number' ? [ro, 0] : ro;\n\n\tconst radiusFn = fnOrSelf(ro);\n\n\tconst gapFactor = 1 - size[0];\n\tconst _maxWidth  = ifNull(size[1], inf);\n\tconst _minWidth  = ifNull(size[2], 1);\n\n\tconst disp = ifNull(opts.disp, EMPTY_OBJ);\n\tconst _each = ifNull(opts.each, _ => {});\n\n\tconst { fill: dispFills, stroke: dispStrokes } = disp;\n\n\treturn (u, seriesIdx, idx0, idx1) => {\n\t\treturn orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n\t\t\tlet pxRound = series.pxRound;\n\t\t\tlet _align = align;\n\n\t\t\tlet extraGap = _extraGap * pxRatio;\n\t\t\tlet maxWidth = _maxWidth * pxRatio;\n\t\t\tlet minWidth = _minWidth * pxRatio;\n\n\t\t\tlet valRadius, baseRadius;\n\n\t\t\tif (scaleX.ori == 0)\n\t\t\t\t[valRadius, baseRadius] = radiusFn(u, seriesIdx);\n\t\t\telse\n\t\t\t\t[baseRadius, valRadius] = radiusFn(u, seriesIdx);\n\n\t\t\tconst _dirX = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n\t\t//\tconst _dirY = scaleY.dir * (scaleY.ori == 1 ? 1 : -1);\n\n\t\t\tlet rect = scaleX.ori == 0 ? rectH : rectV;\n\n\t\t\tlet each = scaleX.ori == 0 ? _each : (u, seriesIdx, i, top, lft, hgt, wid) => {\n\t\t\t\t_each(u, seriesIdx, i, lft, top, wid, hgt);\n\t\t\t};\n\n\t\t\t// band where this series is the \"from\" edge\n\t\t\tlet band = ifNull(u.bands, EMPTY_ARR).find(b => b.series[0] == seriesIdx);\n\n\t\t\tlet fillDir = band != null ? band.dir : 0;\n\t\t\tlet fillTo = series.fillTo(u, seriesIdx, series.min, series.max, fillDir);\n\t\t\tlet fillToY = pxRound(valToPosY(fillTo, scaleY, yDim, yOff));\n\n\t\t\t// barWid is to center of stroke\n\t\t\tlet xShift, barWid, fullGap, colWid = xDim;\n\n\t\t\tlet strokeWidth = pxRound(series.width * pxRatio);\n\n\t\t\tlet multiPath = false;\n\n\t\t\tlet fillColors = null;\n\t\t\tlet fillPaths = null;\n\t\t\tlet strokeColors = null;\n\t\t\tlet strokePaths = null;\n\n\t\t\tif (dispFills != null && (strokeWidth == 0 || dispStrokes != null)) {\n\t\t\t\tmultiPath = true;\n\n\t\t\t\tfillColors = dispFills.values(u, seriesIdx, idx0, idx1);\n\t\t\t\tfillPaths = new Map();\n\t\t\t\t(new Set(fillColors)).forEach(color => {\n\t\t\t\t\tif (color != null)\n\t\t\t\t\t\tfillPaths.set(color, new Path2D());\n\t\t\t\t});\n\n\t\t\t\tif (strokeWidth > 0) {\n\t\t\t\t\tstrokeColors = dispStrokes.values(u, seriesIdx, idx0, idx1);\n\t\t\t\t\tstrokePaths = new Map();\n\t\t\t\t\t(new Set(strokeColors)).forEach(color => {\n\t\t\t\t\t\tif (color != null)\n\t\t\t\t\t\t\tstrokePaths.set(color, new Path2D());\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet { x0, size } = disp;\n\n\t\t\tif (x0 != null && size != null) {\n\t\t\t\t_align = 1;\n\t\t\t\tdataX = x0.values(u, seriesIdx, idx0, idx1);\n\n\t\t\t\tif (x0.unit == 2)\n\t\t\t\t\tdataX = dataX.map(pct => u.posToVal(xOff + pct * xDim, scaleX.key, true));\n\n\t\t\t\t// assumes uniform sizes, for now\n\t\t\t\tlet sizes = size.values(u, seriesIdx, idx0, idx1);\n\n\t\t\t\tif (size.unit == 2)\n\t\t\t\t\tbarWid = sizes[0] * xDim;\n\t\t\t\telse\n\t\t\t\t\tbarWid = valToPosX(sizes[0], scaleX, xDim, xOff) - valToPosX(0, scaleX, xDim, xOff); // assumes linear scale (delta from 0)\n\n\t\t\t\tcolWid = findColWidth(dataX, dataY, valToPosX, scaleX, xDim, xOff, colWid);\n\n\t\t\t\tlet gapWid = colWid - barWid;\n\t\t\t\tfullGap = gapWid + extraGap;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcolWid = findColWidth(dataX, dataY, valToPosX, scaleX, xDim, xOff, colWid);\n\n\t\t\t\tlet gapWid = colWid * gapFactor;\n\n\t\t\t\tfullGap = gapWid + extraGap;\n\t\t\t\tbarWid = colWid - fullGap;\n\t\t\t}\n\n\t\t\tif (fullGap < 1)\n\t\t\t\tfullGap = 0;\n\n\t\t\tif (strokeWidth >= barWid / 2)\n\t\t\t\tstrokeWidth = 0;\n\n\t\t\t// for small gaps, disable pixel snapping since gap inconsistencies become noticible and annoying\n\t\t\tif (fullGap < 5)\n\t\t\t\tpxRound = retArg0;\n\n\t\t\tlet insetStroke = fullGap > 0;\n\n\t\t\tlet rawBarWid = colWid - fullGap - (insetStroke ? strokeWidth : 0);\n\n\t\t\tbarWid = pxRound(clamp(rawBarWid, minWidth, maxWidth));\n\n\t\t\txShift = (_align == 0 ? barWid / 2 : _align == _dirX ? 0 : barWid) - _align * _dirX * ((_align == 0 ? extraGap / 2 : 0) + (insetStroke ? strokeWidth / 2 : 0));\n\n\n\t\t\tconst _paths = {stroke: null, fill: null, clip: null, band: null, gaps: null, flags: 0};  // disp, geom\n\n\t\t\tconst stroke = multiPath ? null : new Path2D();\n\n\t\t\tlet dataY0 = null;\n\n\t\t\tif (band != null)\n\t\t\t\tdataY0 = u.data[band.series[1]];\n\t\t\telse {\n\t\t\t\tlet { y0, y1 } = disp;\n\n\t\t\t\tif (y0 != null && y1 != null) {\n\t\t\t\t\tdataY = y1.values(u, seriesIdx, idx0, idx1);\n\t\t\t\t\tdataY0 = y0.values(u, seriesIdx, idx0, idx1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet radVal = valRadius * barWid;\n\t\t\tlet radBase = baseRadius * barWid;\n\n\t\t\tfor (let i = _dirX == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += _dirX) {\n\t\t\t\tlet yVal = dataY[i];\n\n\t\t\t\tif (yVal == null)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tif (dataY0 != null) {\n\t\t\t\t\tlet yVal0 = dataY0[i] ?? 0;\n\n\t\t\t\t\tif (yVal - yVal0 == 0)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tfillToY = valToPosY(yVal0, scaleY, yDim, yOff);\n\t\t\t\t}\n\n\t\t\t\tlet xVal = scaleX.distr != 2 || disp != null ? dataX[i] : i;\n\n\t\t\t\t// TODO: all xPos can be pre-computed once for all series in aligned set\n\t\t\t\tlet xPos = valToPosX(xVal, scaleX, xDim, xOff);\n\t\t\t\tlet yPos = valToPosY(ifNull(yVal, fillTo), scaleY, yDim, yOff);\n\n\t\t\t\tlet lft = pxRound(xPos - xShift);\n\t\t\t\tlet btm = pxRound(max(yPos, fillToY));\n\t\t\t\tlet top = pxRound(min(yPos, fillToY));\n\t\t\t\t// this includes the stroke\n\t\t\t\tlet barHgt = btm - top;\n\n\t\t\t\tif (yVal != null) {  // && yVal != fillTo (0 height bar)\n\t\t\t\t\tlet rv = yVal < 0 ? radBase : radVal;\n\t\t\t\t\tlet rb = yVal < 0 ? radVal : radBase;\n\n\t\t\t\t\tif (multiPath) {\n\t\t\t\t\t\tif (strokeWidth > 0 && strokeColors[i] != null)\n\t\t\t\t\t\t\trect(strokePaths.get(strokeColors[i]), lft, top + floor(strokeWidth / 2), barWid, max(0, barHgt - strokeWidth), rv, rb);\n\n\t\t\t\t\t\tif (fillColors[i] != null)\n\t\t\t\t\t\t\trect(fillPaths.get(fillColors[i]), lft, top + floor(strokeWidth / 2), barWid, max(0, barHgt - strokeWidth), rv, rb);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\trect(stroke, lft, top + floor(strokeWidth / 2), barWid, max(0, barHgt - strokeWidth), rv, rb);\n\n\t\t\t\t\teach(u, seriesIdx, i,\n\t\t\t\t\t\tlft    - strokeWidth / 2,\n\t\t\t\t\t\ttop,\n\t\t\t\t\t\tbarWid + strokeWidth,\n\t\t\t\t\t\tbarHgt,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (strokeWidth > 0)\n\t\t\t\t_paths.stroke = multiPath ? strokePaths : stroke;\n\t\t\telse if (!multiPath) {\n\t\t\t\t_paths._fill = series.width == 0 ? series._fill : series._stroke ?? series._fill;\n\t\t\t\t_paths.width = 0;\n\t\t\t}\n\n\t\t\t_paths.fill = multiPath ? fillPaths : stroke;\n\n\t\t\treturn _paths;\n\t\t});\n\t};\n}\n\nfunction splineInterp(interp, opts) {\n\tconst alignGaps = ifNull(opts?.alignGaps, 0);\n\n\treturn (u, seriesIdx, idx0, idx1) => {\n\t\treturn orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n\t\t\t[idx0, idx1] = nonNullIdxs(dataY, idx0, idx1);\n\n\t\t\tlet pxRound = series.pxRound;\n\n\t\t\tlet pixelForX = val => pxRound(valToPosX(val, scaleX, xDim, xOff));\n\t\t\tlet pixelForY = val => pxRound(valToPosY(val, scaleY, yDim, yOff));\n\n\t\t\tlet moveTo, bezierCurveTo, lineTo;\n\n\t\t\tif (scaleX.ori == 0) {\n\t\t\t\tmoveTo = moveToH;\n\t\t\t\tlineTo = lineToH;\n\t\t\t\tbezierCurveTo = bezierCurveToH;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmoveTo = moveToV;\n\t\t\t\tlineTo = lineToV;\n\t\t\t\tbezierCurveTo = bezierCurveToV;\n\t\t\t}\n\n\t\t\tconst dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n\n\t\t\tlet firstXPos = pixelForX(dataX[dir == 1 ? idx0 : idx1]);\n\t\t\tlet prevXPos = firstXPos;\n\n\t\t\tlet xCoords = [];\n\t\t\tlet yCoords = [];\n\n\t\t\tfor (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n\t\t\t\tlet yVal = dataY[i];\n\n\t\t\t\tif (yVal != null) {\n\t\t\t\t\tlet xVal = dataX[i];\n\t\t\t\t\tlet xPos = pixelForX(xVal);\n\n\t\t\t\t\txCoords.push(prevXPos = xPos);\n\t\t\t\t\tyCoords.push(pixelForY(dataY[i]));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst _paths = {stroke: interp(xCoords, yCoords, moveTo, lineTo, bezierCurveTo, pxRound), fill: null, clip: null, band: null, gaps: null, flags: BAND_CLIP_FILL};\n\t\t\tconst stroke = _paths.stroke;\n\n\t\t\tlet [ bandFillDir, bandClipDir ] = bandFillClipDirs(u, seriesIdx);\n\n\t\t\tif (series.fill != null || bandFillDir != 0) {\n\t\t\t\tlet fill = _paths.fill = new Path2D(stroke);\n\n\t\t\t\tlet fillTo = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n\t\t\t\tlet fillToY = pixelForY(fillTo);\n\n\t\t\t\tlineTo(fill, prevXPos, fillToY);\n\t\t\t\tlineTo(fill, firstXPos, fillToY);\n\t\t\t}\n\n\t\t\tif (!series.spanGaps) {\n\t\t\t//\tconsole.time('gaps');\n\t\t\t\tlet gaps = [];\n\n\t\t\t\tgaps.push(...findGaps(dataX, dataY, idx0, idx1, dir, pixelForX, alignGaps));\n\n\t\t\t//\tconsole.timeEnd('gaps');\n\n\t\t\t//\tconsole.log('gaps', JSON.stringify(gaps));\n\n\t\t\t\t_paths.gaps = gaps = series.gaps(u, seriesIdx, idx0, idx1, gaps);\n\n\t\t\t\t_paths.clip = clipGaps(gaps, scaleX.ori, xOff, yOff, xDim, yDim);\n\t\t\t}\n\n\t\t\tif (bandClipDir != 0) {\n\t\t\t\t_paths.band = bandClipDir == 2 ? [\n\t\t\t\t\tclipBandLine(u, seriesIdx, idx0, idx1, stroke, -1),\n\t\t\t\t\tclipBandLine(u, seriesIdx, idx0, idx1, stroke,  1),\n\t\t\t\t] : clipBandLine(u, seriesIdx, idx0, idx1, stroke, bandClipDir);\n\t\t\t}\n\n\t\t\treturn _paths;\n\n\t\t\t//  if FEAT_PATHS: false in rollup.config.js\n\t\t\t//\tu.ctx.save();\n\t\t\t//\tu.ctx.beginPath();\n\t\t\t//\tu.ctx.rect(u.bbox.left, u.bbox.top, u.bbox.width, u.bbox.height);\n\t\t\t//\tu.ctx.clip();\n\t\t\t//\tu.ctx.strokeStyle = u.series[sidx].stroke;\n\t\t\t//\tu.ctx.stroke(stroke);\n\t\t\t//\tu.ctx.fillStyle = u.series[sidx].fill;\n\t\t\t//\tu.ctx.fill(fill);\n\t\t\t//\tu.ctx.restore();\n\t\t\t//\treturn null;\n\t\t});\n\t};\n}\n\nfunction monotoneCubic(opts) {\n\treturn splineInterp(_monotoneCubic, opts);\n}\n\n// Monotone Cubic Spline interpolation, adapted from the Chartist.js implementation:\n// https://github.com/gionkunz/chartist-js/blob/e7e78201bffe9609915e5e53cfafa29a5d6c49f9/src/scripts/interpolation.js#L240-L369\nfunction _monotoneCubic(xs, ys, moveTo, lineTo, bezierCurveTo, pxRound) {\n\tconst n = xs.length;\n\n\tif (n < 2)\n\t\treturn null;\n\n\tconst path = new Path2D();\n\n\tmoveTo(path, xs[0], ys[0]);\n\n\tif (n == 2)\n\t\tlineTo(path, xs[1], ys[1]);\n\telse {\n\t\tlet ms  = Array(n),\n\t\t\tds  = Array(n - 1),\n\t\t\tdys = Array(n - 1),\n\t\t\tdxs = Array(n - 1);\n\n\t\t// calc deltas and derivative\n\t\tfor (let i = 0; i < n - 1; i++) {\n\t\t\tdys[i] = ys[i + 1] - ys[i];\n\t\t\tdxs[i] = xs[i + 1] - xs[i];\n\t\t\tds[i]  = dys[i] / dxs[i];\n\t\t}\n\n\t\t// determine desired slope (m) at each point using Fritsch-Carlson method\n\t\t// http://math.stackexchange.com/questions/45218/implementation-of-monotone-cubic-interpolation\n\t\tms[0] = ds[0];\n\n\t\tfor (let i = 1; i < n - 1; i++) {\n\t\t\tif (ds[i] === 0 || ds[i - 1] === 0 || (ds[i - 1] > 0) !== (ds[i] > 0))\n\t\t\t\tms[i] = 0;\n\t\t\telse {\n\t\t\t\tms[i] = 3 * (dxs[i - 1] + dxs[i]) / (\n\t\t\t\t\t(2 * dxs[i] + dxs[i - 1]) / ds[i - 1] +\n\t\t\t\t\t(dxs[i] + 2 * dxs[i - 1]) / ds[i]\n\t\t\t\t);\n\n\t\t\t\tif (!isFinite(ms[i]))\n\t\t\t\t\tms[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\tms[n - 1] = ds[n - 2];\n\n\t\tfor (let i = 0; i < n - 1; i++) {\n\t\t\tbezierCurveTo(\n\t\t\t\tpath,\n\t\t\t\txs[i] + dxs[i] / 3,\n\t\t\t\tys[i] + ms[i] * dxs[i] / 3,\n\t\t\t\txs[i + 1] - dxs[i] / 3,\n\t\t\t\tys[i + 1] - ms[i + 1] * dxs[i] / 3,\n\t\t\t\txs[i + 1],\n\t\t\t\tys[i + 1],\n\t\t\t);\n\t\t}\n\t}\n\n\treturn path;\n}\n\nconst cursorPlots = new Set();\n\nfunction invalidateRects() {\n\tfor (let u of cursorPlots)\n\t\tu.syncRect(true);\n}\n\nif (domEnv) {\n\ton(resize, win, invalidateRects);\n\ton(scroll, win, invalidateRects, true);\n\ton(dppxchange, win, () => { uPlot.pxRatio = pxRatio; });\n}\n\nconst linearPath = linear() ;\nconst pointsPath = points() ;\n\nfunction setDefaults(d, xo, yo, initY) {\n\tlet d2 = initY ? [d[0], d[1]].concat(d.slice(2)) : [d[0]].concat(d.slice(1));\n\treturn d2.map((o, i) => setDefault(o, i, xo, yo));\n}\n\nfunction setDefaults2(d, xyo) {\n\treturn d.map((o, i) => i == 0 ? {} : assign({}, xyo, o));  // todo: assign() will not merge facet arrays\n}\n\nfunction setDefault(o, i, xo, yo) {\n\treturn assign({}, (i == 0 ? xo : yo), o);\n}\n\nfunction snapNumX(self, dataMin, dataMax) {\n\treturn dataMin == null ? nullNullTuple : [dataMin, dataMax];\n}\n\nconst snapTimeX = snapNumX;\n\n// this ensures that non-temporal/numeric y-axes get multiple-snapped padding added above/below\n// TODO: also account for incrs when snapping to ensure top of axis gets a tick & value\nfunction snapNumY(self, dataMin, dataMax) {\n\treturn dataMin == null ? nullNullTuple : rangeNum(dataMin, dataMax, rangePad, true);\n}\n\nfunction snapLogY(self, dataMin, dataMax, scale) {\n\treturn dataMin == null ? nullNullTuple : rangeLog(dataMin, dataMax, self.scales[scale].log, false);\n}\n\nconst snapLogX = snapLogY;\n\nfunction snapAsinhY(self, dataMin, dataMax, scale) {\n\treturn dataMin == null ? nullNullTuple : rangeAsinh(dataMin, dataMax, self.scales[scale].log, false);\n}\n\nconst snapAsinhX = snapAsinhY;\n\n// dim is logical (getClientBoundingRect) pixels, not canvas pixels\nfunction findIncr(minVal, maxVal, incrs, dim, minSpace) {\n\tlet intDigits = max(numIntDigits(minVal), numIntDigits(maxVal));\n\n\tlet delta = maxVal - minVal;\n\n\tlet incrIdx = closestIdx((minSpace / dim) * delta, incrs);\n\n\tdo {\n\t\tlet foundIncr = incrs[incrIdx];\n\t\tlet foundSpace = dim * foundIncr / delta;\n\n\t\tif (foundSpace >= minSpace && intDigits + (foundIncr < 5 ? fixedDec.get(foundIncr) : 0) <= 17)\n\t\t\treturn [foundIncr, foundSpace];\n\t} while (++incrIdx < incrs.length);\n\n\treturn [0, 0];\n}\n\nfunction pxRatioFont(font) {\n\tlet fontSize, fontSizeCss;\n\tfont = font.replace(/(\\d+)px/, (m, p1) => (fontSize = round((fontSizeCss = +p1) * pxRatio)) + 'px');\n\treturn [font, fontSize, fontSizeCss];\n}\n\nfunction syncFontSize(axis) {\n\tif (axis.show) {\n\t\t[axis.font, axis.labelFont].forEach(f => {\n\t\t\tlet size = roundDec(f[2] * pxRatio, 1);\n\t\t\tf[0] = f[0].replace(/[0-9.]+px/, size + 'px');\n\t\t\tf[1] = size;\n\t\t});\n\t}\n}\n\nfunction uPlot(opts, data, then) {\n\tconst self = {\n\t\tmode: ifNull(opts.mode, 1),\n\t};\n\n\tconst mode = self.mode;\n\n\tfunction getHPos(val, scale, dim, off) {\n\t\tlet pct = scale.valToPct(val);\n\t\treturn off + dim * (scale.dir == -1 ? (1 - pct) : pct);\n\t}\n\n\tfunction getVPos(val, scale, dim, off) {\n\t\tlet pct = scale.valToPct(val);\n\t\treturn off + dim * (scale.dir == -1 ? pct : (1 - pct));\n\t}\n\n\tfunction getPos(val, scale, dim, off) {\n\t\treturn scale.ori == 0 ? getHPos(val, scale, dim, off) : getVPos(val, scale, dim, off);\n\t}\n\n\tself.valToPosH = getHPos;\n\tself.valToPosV = getVPos;\n\n\tlet ready = false;\n\tself.status = 0;\n\n\tconst root = self.root = placeDiv(UPLOT);\n\n\tif (opts.id != null)\n\t\troot.id = opts.id;\n\n\taddClass(root, opts.class);\n\n\tif (opts.title) {\n\t\tlet title = placeDiv(TITLE, root);\n\t\ttitle.textContent = opts.title;\n\t}\n\n\tconst can = placeTag(\"canvas\");\n\tconst ctx = self.ctx = can.getContext(\"2d\");\n\n\tconst wrap = placeDiv(WRAP, root);\n\n\ton(\"click\", wrap, e => {\n\t\tif (e.target === over) {\n\t\t\tlet didDrag = mouseLeft1 != mouseLeft0 || mouseTop1 != mouseTop0;\n\t\t\tdidDrag && drag.click(self, e);\n\t\t}\n\t}, true);\n\n\tconst under = self.under = placeDiv(UNDER, wrap);\n\twrap.appendChild(can);\n\tconst over = self.over = placeDiv(OVER, wrap);\n\n\topts = copy(opts);\n\n\tconst pxAlign = +ifNull(opts.pxAlign, 1);\n\n\tconst pxRound = pxRoundGen(pxAlign);\n\n\t(opts.plugins || []).forEach(p => {\n\t\tif (p.opts)\n\t\t\topts = p.opts(self, opts) || opts;\n\t});\n\n\tconst ms = opts.ms || 1e-3;\n\n\tconst series  = self.series = mode == 1 ?\n\t\tsetDefaults(opts.series || [], xSeriesOpts, ySeriesOpts, false) :\n\t\tsetDefaults2(opts.series || [null], xySeriesOpts);\n\tconst axes    = self.axes   = setDefaults(opts.axes   || [], xAxisOpts,   yAxisOpts,    true);\n\tconst scales  = self.scales = {};\n\tconst bands   = self.bands  = opts.bands || [];\n\n\tbands.forEach(b => {\n\t\tb.fill = fnOrSelf(b.fill || null);\n\t\tb.dir = ifNull(b.dir, -1);\n\t});\n\n\tconst xScaleKey = mode == 2 ? series[1].facets[0].scale : series[0].scale;\n\n\tconst drawOrderMap = {\n\t\taxes: drawAxesGrid,\n\t\tseries: drawSeries,\n\t};\n\n\tconst drawOrder = (opts.drawOrder || [\"axes\", \"series\"]).map(key => drawOrderMap[key]);\n\n\tfunction initScale(scaleKey) {\n\t\tlet sc = scales[scaleKey];\n\n\t\tif (sc == null) {\n\t\t\tlet scaleOpts = (opts.scales || EMPTY_OBJ)[scaleKey] || EMPTY_OBJ;\n\n\t\t\tif (scaleOpts.from != null) {\n\t\t\t\t// ensure parent is initialized\n\t\t\t\tinitScale(scaleOpts.from);\n\t\t\t\t// dependent scales inherit\n\t\t\t\tscales[scaleKey] = assign({}, scales[scaleOpts.from], scaleOpts, {key: scaleKey});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsc = scales[scaleKey] = assign({}, (scaleKey == xScaleKey ? xScaleOpts : yScaleOpts), scaleOpts);\n\n\t\t\t\tsc.key = scaleKey;\n\n\t\t\t\tlet isTime = sc.time;\n\n\t\t\t\tlet rn = sc.range;\n\n\t\t\t\tlet rangeIsArr = isArr(rn);\n\n\t\t\t\tif (scaleKey != xScaleKey || (mode == 2 && !isTime)) {\n\t\t\t\t\t// if range array has null limits, it should be auto\n\t\t\t\t\tif (rangeIsArr && (rn[0] == null || rn[1] == null)) {\n\t\t\t\t\t\trn = {\n\t\t\t\t\t\t\tmin: rn[0] == null ? autoRangePart : {\n\t\t\t\t\t\t\t\tmode: 1,\n\t\t\t\t\t\t\t\thard: rn[0],\n\t\t\t\t\t\t\t\tsoft: rn[0],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmax: rn[1] == null ? autoRangePart : {\n\t\t\t\t\t\t\t\tmode: 1,\n\t\t\t\t\t\t\t\thard: rn[1],\n\t\t\t\t\t\t\t\tsoft: rn[1],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t\trangeIsArr = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!rangeIsArr && isObj(rn)) {\n\t\t\t\t\t\tlet cfg = rn;\n\t\t\t\t\t\t// this is similar to snapNumY\n\t\t\t\t\t\trn = (self, dataMin, dataMax) => dataMin == null ? nullNullTuple : rangeNum(dataMin, dataMax, cfg);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsc.range = fnOrSelf(rn || (isTime ? snapTimeX : scaleKey == xScaleKey ?\n\t\t\t\t\t(sc.distr == 3 ? snapLogX : sc.distr == 4 ? snapAsinhX : snapNumX) :\n\t\t\t\t\t(sc.distr == 3 ? snapLogY : sc.distr == 4 ? snapAsinhY : snapNumY)\n\t\t\t\t));\n\n\t\t\t\tsc.auto = fnOrSelf(rangeIsArr ? false : sc.auto);\n\n\t\t\t\tsc.clamp = fnOrSelf(sc.clamp || clampScale);\n\n\t\t\t\t// caches for expensive ops like asinh() & log()\n\t\t\t\tsc._min = sc._max = null;\n\n\t\t\t\tconst getVal = (\n\t\t\t\t\tsc.distr == 3   ? val => log10(val > 0 ? val : sc.clamp(self, val, sc.min, sc.max, sc.key)) :\n\t\t\t\t\tsc.distr == 4   ? val => asinh(val, sc.asinh) :\n\t\t\t\t\tsc.distr == 100 ? val => sc.fwd(val) :\n\t\t\t\t\tval => val\n\t\t\t\t);\n\n\t\t\t\tsc.valToPct = val => {\n\t\t\t\t\tlet _val = getVal(val);\n\t\t\t\t\tlet { _min, _max } = sc;\n\t\t\t\t\tlet delta = _max - _min;\n\t\t\t\t\treturn (_val - _min) / delta;\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\tinitScale(\"x\");\n\tinitScale(\"y\");\n\n\t// TODO: init scales from facets in mode: 2\n\tif (mode == 1) {\n\t\tseries.forEach(s => {\n\t\t\tinitScale(s.scale);\n\t\t});\n\t}\n\n\taxes.forEach(a => {\n\t\tinitScale(a.scale);\n\t});\n\n\tfor (let k in opts.scales)\n\t\tinitScale(k);\n\n\tconst scaleX = scales[xScaleKey];\n\n\tconst xScaleDistr = scaleX.distr;\n\n\tlet valToPosX, valToPosY;\n\n\tif (scaleX.ori == 0) {\n\t\taddClass(root, ORI_HZ);\n\t\tvalToPosX = getHPos;\n\t\tvalToPosY = getVPos;\n\t\t/*\n\t\tupdOriDims = () => {\n\t\t\txDimCan = plotWid;\n\t\t\txOffCan = plotLft;\n\t\t\tyDimCan = plotHgt;\n\t\t\tyOffCan = plotTop;\n\n\t\t\txDimCss = plotWidCss;\n\t\t\txOffCss = plotLftCss;\n\t\t\tyDimCss = plotHgtCss;\n\t\t\tyOffCss = plotTopCss;\n\t\t};\n\t\t*/\n\t}\n\telse {\n\t\taddClass(root, ORI_VT);\n\t\tvalToPosX = getVPos;\n\t\tvalToPosY = getHPos;\n\t\t/*\n\t\tupdOriDims = () => {\n\t\t\txDimCan = plotHgt;\n\t\t\txOffCan = plotTop;\n\t\t\tyDimCan = plotWid;\n\t\t\tyOffCan = plotLft;\n\n\t\t\txDimCss = plotHgtCss;\n\t\t\txOffCss = plotTopCss;\n\t\t\tyDimCss = plotWidCss;\n\t\t\tyOffCss = plotLftCss;\n\t\t};\n\t\t*/\n\t}\n\n\tconst pendScales = {};\n\n\t// explicitly-set initial scales\n\tfor (let k in scales) {\n\t\tlet sc = scales[k];\n\n\t\tif (sc.min != null || sc.max != null) {\n\t\t\tpendScales[k] = {min: sc.min, max: sc.max};\n\t\t\tsc.min = sc.max = null;\n\t\t}\n\t}\n\n//\tself.tz = opts.tz || Intl.DateTimeFormat().resolvedOptions().timeZone;\n\tconst _tzDate  = (opts.tzDate || (ts => new Date(round(ts / ms))));\n\tconst _fmtDate = (opts.fmtDate || fmtDate);\n\n\tconst _timeAxisSplits = (ms == 1 ? timeAxisSplitsMs(_tzDate) : timeAxisSplitsS(_tzDate));\n\tconst _timeAxisVals   = timeAxisVals(_tzDate, timeAxisStamps((ms == 1 ? _timeAxisStampsMs : _timeAxisStampsS), _fmtDate));\n\tconst _timeSeriesVal  = timeSeriesVal(_tzDate, timeSeriesStamp(_timeSeriesStamp, _fmtDate));\n\n\tconst activeIdxs = [];\n\n\tconst legend     = (self.legend = assign({}, legendOpts, opts.legend));\n\tconst cursor     =                (self.cursor = assign({}, cursorOpts, {drag: {y: mode == 2}}, opts.cursor));\n\tconst showLegend = legend.show;\n\tconst showCursor =                cursor.show;\n\tconst markers    = legend.markers;\n\n\t{\n\t\tlegend.idxs = activeIdxs;\n\n\t\tmarkers.width  = fnOrSelf(markers.width);\n\t\tmarkers.dash   = fnOrSelf(markers.dash);\n\t\tmarkers.stroke = fnOrSelf(markers.stroke);\n\t\tmarkers.fill   = fnOrSelf(markers.fill);\n\t}\n\n\tlet legendTable;\n\tlet legendHead;\n\tlet legendBody;\n\tlet legendRows = [];\n\tlet legendCells = [];\n\tlet legendCols;\n\tlet multiValLegend = false;\n\tlet NULL_LEGEND_VALUES = {};\n\n\tif (legend.live) {\n\t\tconst getMultiVals = series[1] ? series[1].values : null;\n\t\tmultiValLegend = getMultiVals != null;\n\t\tlegendCols = multiValLegend ? getMultiVals(self, 1, 0) : {_: 0};\n\n\t\tfor (let k in legendCols)\n\t\t\tNULL_LEGEND_VALUES[k] = LEGEND_DISP;\n\t}\n\n\tif (showLegend) {\n\t\tlegendTable = placeTag(\"table\", LEGEND, root);\n\t\tlegendBody = placeTag(\"tbody\", null, legendTable);\n\n\t\t// allows legend to be moved out of root\n\t\tlegend.mount(self, legendTable);\n\n\t\tif (multiValLegend) {\n\t\t\tlegendHead = placeTag(\"thead\", null, legendTable, legendBody);\n\n\t\t\tlet head = placeTag(\"tr\", null, legendHead);\n\t\t\tplaceTag(\"th\", null, head);\n\n\t\t\tfor (var key in legendCols)\n\t\t\t\tplaceTag(\"th\", LEGEND_LABEL, head).textContent = key;\n\t\t}\n\t\telse {\n\t\t\taddClass(legendTable, LEGEND_INLINE);\n\t\t\tlegend.live && addClass(legendTable, LEGEND_LIVE);\n\t\t}\n\t}\n\n\tconst son  = {show: true};\n\tconst soff = {show: false};\n\n\tfunction initLegendRow(s, i) {\n\t\tif (i == 0 && (multiValLegend || !legend.live || mode == 2))\n\t\t\treturn nullNullTuple;\n\n\t\tlet cells = [];\n\n\t\tlet row = placeTag(\"tr\", LEGEND_SERIES, legendBody, legendBody.childNodes[i]);\n\n\t\taddClass(row, s.class);\n\n\t\tif (!s.show)\n\t\t\taddClass(row, OFF);\n\n\t\tlet label = placeTag(\"th\", null, row);\n\n\t\tif (markers.show) {\n\t\t\tlet indic = placeDiv(LEGEND_MARKER, label);\n\n\t\t\tif (i > 0) {\n\t\t\t\tlet width  = markers.width(self, i);\n\n\t\t\t\tif (width)\n\t\t\t\t\tindic.style.border = width + \"px \" + markers.dash(self, i) + \" \" + markers.stroke(self, i);\n\n\t\t\t\tindic.style.background = markers.fill(self, i);\n\t\t\t}\n\t\t}\n\n\t\tlet text = placeDiv(LEGEND_LABEL, label);\n\t\ttext.textContent = s.label;\n\n\t\tif (i > 0) {\n\t\t\tif (!markers.show)\n\t\t\t\ttext.style.color = s.width > 0 ? markers.stroke(self, i) : markers.fill(self, i);\n\n\t\t\tonMouse(\"click\", label, e => {\n\t\t\t\tif (cursor._lock)\n\t\t\t\t\treturn;\n\n\t\t\t\tsetCursorEvent(e);\n\n\t\t\t\tlet seriesIdx = series.indexOf(s);\n\n\t\t\t\tif ((e.ctrlKey || e.metaKey) != legend.isolate) {\n\t\t\t\t\t// if any other series is shown, isolate this one. else show all\n\t\t\t\t\tlet isolate = series.some((s, i) => i > 0 && i != seriesIdx && s.show);\n\n\t\t\t\t\tseries.forEach((s, i) => {\n\t\t\t\t\t\ti > 0 && setSeries(i, isolate ? (i == seriesIdx ? son : soff) : son, true, syncOpts.setSeries);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tsetSeries(seriesIdx, {show: !s.show}, true, syncOpts.setSeries);\n\t\t\t}, false);\n\n\t\t\tif (cursorFocus) {\n\t\t\t\tonMouse(mouseenter, label, e => {\n\t\t\t\t\tif (cursor._lock)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tsetCursorEvent(e);\n\n\t\t\t\t\tsetSeries(series.indexOf(s), FOCUS_TRUE, true, syncOpts.setSeries);\n\t\t\t\t}, false);\n\t\t\t}\n\t\t}\n\n\t\tfor (var key in legendCols) {\n\t\t\tlet v = placeTag(\"td\", LEGEND_VALUE, row);\n\t\t\tv.textContent = \"--\";\n\t\t\tcells.push(v);\n\t\t}\n\n\t\treturn [row, cells];\n\t}\n\n\tconst mouseListeners = new Map();\n\n\tfunction onMouse(ev, targ, fn, onlyTarg = true) {\n\t\tconst targListeners = mouseListeners.get(targ) || {};\n\t\tconst listener = cursor.bind[ev](self, targ, fn, onlyTarg);\n\n\t\tif (listener) {\n\t\t\ton(ev, targ, targListeners[ev] = listener);\n\t\t\tmouseListeners.set(targ, targListeners);\n\t\t}\n\t}\n\n\tfunction offMouse(ev, targ, fn) {\n\t\tconst targListeners = mouseListeners.get(targ) || {};\n\n\t\tfor (let k in targListeners) {\n\t\t\tif (ev == null || k == ev) {\n\t\t\t\toff(k, targ, targListeners[k]);\n\t\t\t\tdelete targListeners[k];\n\t\t\t}\n\t\t}\n\n\t\tif (ev == null)\n\t\t\tmouseListeners.delete(targ);\n\t}\n\n\tlet fullWidCss = 0;\n\tlet fullHgtCss = 0;\n\n\tlet plotWidCss = 0;\n\tlet plotHgtCss = 0;\n\n\t// plot margins to account for axes\n\tlet plotLftCss = 0;\n\tlet plotTopCss = 0;\n\n\t// previous values for diffing\n\tlet _plotLftCss = plotLftCss;\n\tlet _plotTopCss = plotTopCss;\n\tlet _plotWidCss = plotWidCss;\n\tlet _plotHgtCss = plotHgtCss;\n\n\n\tlet plotLft = 0;\n\tlet plotTop = 0;\n\tlet plotWid = 0;\n\tlet plotHgt = 0;\n\n\tself.bbox = {};\n\n\tlet shouldSetScales = false;\n\tlet shouldSetSize = false;\n\tlet shouldConvergeSize = false;\n\tlet shouldSetCursor = false;\n\tlet shouldSetSelect = false;\n\tlet shouldSetLegend = false;\n\n\tfunction _setSize(width, height, force) {\n\t\tif (force || (width != self.width || height != self.height))\n\t\t\tcalcSize(width, height);\n\n\t\tresetYSeries(false);\n\n\t\tshouldConvergeSize = true;\n\t\tshouldSetSize = true;\n\n\t\tcommit();\n\t}\n\n\tfunction calcSize(width, height) {\n\t//\tlog(\"calcSize()\", arguments);\n\n\t\tself.width  = fullWidCss = plotWidCss = width;\n\t\tself.height = fullHgtCss = plotHgtCss = height;\n\t\tplotLftCss  = plotTopCss = 0;\n\n\t\tcalcPlotRect();\n\t\tcalcAxesRects();\n\n\t\tlet bb = self.bbox;\n\n\t\tplotLft = bb.left   = incrRound(plotLftCss * pxRatio, 0.5);\n\t\tplotTop = bb.top    = incrRound(plotTopCss * pxRatio, 0.5);\n\t\tplotWid = bb.width  = incrRound(plotWidCss * pxRatio, 0.5);\n\t\tplotHgt = bb.height = incrRound(plotHgtCss * pxRatio, 0.5);\n\n\t//\tupdOriDims();\n\t}\n\n\t// ensures size calc convergence\n\tconst CYCLE_LIMIT = 3;\n\n\tfunction convergeSize() {\n\t\tlet converged = false;\n\n\t\tlet cycleNum = 0;\n\n\t\twhile (!converged) {\n\t\t\tcycleNum++;\n\n\t\t\tlet axesConverged = axesCalc(cycleNum);\n\t\t\tlet paddingConverged = paddingCalc(cycleNum);\n\n\t\t\tconverged = cycleNum == CYCLE_LIMIT || (axesConverged && paddingConverged);\n\n\t\t\tif (!converged) {\n\t\t\t\tcalcSize(self.width, self.height);\n\t\t\t\tshouldSetSize = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction setSize({width, height}) {\n\t\t_setSize(width, height);\n\t}\n\n\tself.setSize = setSize;\n\n\t// accumulate axis offsets, reduce canvas width\n\tfunction calcPlotRect() {\n\t\t// easements for edge labels\n\t\tlet hasTopAxis = false;\n\t\tlet hasBtmAxis = false;\n\t\tlet hasRgtAxis = false;\n\t\tlet hasLftAxis = false;\n\n\t\taxes.forEach((axis, i) => {\n\t\t\tif (axis.show && axis._show) {\n\t\t\t\tlet {side, _size} = axis;\n\t\t\t\tlet isVt = side % 2;\n\t\t\t\tlet labelSize = axis.label != null ? axis.labelSize : 0;\n\n\t\t\t\tlet fullSize = _size + labelSize;\n\n\t\t\t\tif (fullSize > 0) {\n\t\t\t\t\tif (isVt) {\n\t\t\t\t\t\tplotWidCss -= fullSize;\n\n\t\t\t\t\t\tif (side == 3) {\n\t\t\t\t\t\t\tplotLftCss += fullSize;\n\t\t\t\t\t\t\thasLftAxis = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\thasRgtAxis = true;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tplotHgtCss -= fullSize;\n\n\t\t\t\t\t\tif (side == 0) {\n\t\t\t\t\t\t\tplotTopCss += fullSize;\n\t\t\t\t\t\t\thasTopAxis = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\thasBtmAxis = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tsidesWithAxes[0] = hasTopAxis;\n\t\tsidesWithAxes[1] = hasRgtAxis;\n\t\tsidesWithAxes[2] = hasBtmAxis;\n\t\tsidesWithAxes[3] = hasLftAxis;\n\n\t\t// hz padding\n\t\tplotWidCss -= _padding[1] + _padding[3];\n\t\tplotLftCss += _padding[3];\n\n\t\t// vt padding\n\t\tplotHgtCss -= _padding[2] + _padding[0];\n\t\tplotTopCss += _padding[0];\n\t}\n\n\tfunction calcAxesRects() {\n\t\t// will accum +\n\t\tlet off1 = plotLftCss + plotWidCss;\n\t\tlet off2 = plotTopCss + plotHgtCss;\n\t\t// will accum -\n\t\tlet off3 = plotLftCss;\n\t\tlet off0 = plotTopCss;\n\n\t\tfunction incrOffset(side, size) {\n\t\t\tswitch (side) {\n\t\t\t\tcase 1: off1 += size; return off1 - size;\n\t\t\t\tcase 2: off2 += size; return off2 - size;\n\t\t\t\tcase 3: off3 -= size; return off3 + size;\n\t\t\t\tcase 0: off0 -= size; return off0 + size;\n\t\t\t}\n\t\t}\n\n\t\taxes.forEach((axis, i) => {\n\t\t\tif (axis.show && axis._show) {\n\t\t\t\tlet side = axis.side;\n\n\t\t\t\taxis._pos = incrOffset(side, axis._size);\n\n\t\t\t\tif (axis.label != null)\n\t\t\t\t\taxis._lpos = incrOffset(side, axis.labelSize);\n\t\t\t}\n\t\t});\n\t}\n\n\tif (cursor.dataIdx == null) {\n\t\tlet hov = cursor.hover;\n\n\t\tlet skip = hov.skip = new Set(hov.skip ?? []);\n\t\tskip.add(void 0); // alignment artifacts\n\t\tlet prox = hov.prox = fnOrSelf(hov.prox);\n\t\tlet bias = hov.bias ??= 0;\n\n\t\t// TODO: only scan between in-view idxs (i0, i1)\n\t\tcursor.dataIdx = (self, seriesIdx, cursorIdx, valAtPosX) => {\n\t\t\tif (seriesIdx == 0)\n\t\t\t\treturn cursorIdx;\n\n\t\t\tlet idx2 = cursorIdx;\n\n\t\t\tlet _prox = prox(self, seriesIdx, cursorIdx, valAtPosX) ?? inf;\n\t\t\tlet withProx = _prox >= 0 && _prox < inf;\n\t\t\tlet xDim = scaleX.ori == 0 ? plotWidCss : plotHgtCss;\n\t\t\tlet cursorLft = cursor.left;\n\n\t\t\tlet xValues = data[0];\n\t\t\tlet yValues = data[seriesIdx];\n\n\t\t\tif (skip.has(yValues[cursorIdx])) {\n\t\t\t\tidx2 = null;\n\n\t\t\t\tlet nonNullLft = null,\n\t\t\t\t\tnonNullRgt = null,\n\t\t\t\t\tj;\n\n\t\t\t\tif (bias == 0 || bias == -1) {\n\t\t\t\t\tj = cursorIdx;\n\t\t\t\t\twhile (nonNullLft == null && j-- > 0) {\n\t\t\t\t\t\tif (!skip.has(yValues[j]))\n\t\t\t\t\t\t\tnonNullLft = j;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (bias == 0 || bias == 1) {\n\t\t\t\t\tj = cursorIdx;\n\t\t\t\t\twhile (nonNullRgt == null && j++ < yValues.length) {\n\t\t\t\t\t\tif (!skip.has(yValues[j]))\n\t\t\t\t\t\t\tnonNullRgt = j;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (nonNullLft != null || nonNullRgt != null) {\n\t\t\t\t\tif (withProx) {\n\t\t\t\t\t\tlet lftPos = nonNullLft == null ? -Infinity : valToPosX(xValues[nonNullLft], scaleX, xDim, 0);\n\t\t\t\t\t\tlet rgtPos = nonNullRgt == null ?  Infinity : valToPosX(xValues[nonNullRgt], scaleX, xDim, 0);\n\n\t\t\t\t\t\tlet lftDelta = cursorLft - lftPos;\n\t\t\t\t\t\tlet rgtDelta = rgtPos - cursorLft;\n\n\t\t\t\t\t\tif (lftDelta <= rgtDelta) {\n\t\t\t\t\t\t\tif (lftDelta <= _prox)\n\t\t\t\t\t\t\t\tidx2 = nonNullLft;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (rgtDelta <= _prox)\n\t\t\t\t\t\t\t\tidx2 = nonNullRgt;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tidx2 =\n\t\t\t\t\t\t\tnonNullRgt == null ? nonNullLft :\n\t\t\t\t\t\t\tnonNullLft == null ? nonNullRgt :\n\t\t\t\t\t\t\tcursorIdx - nonNullLft <= nonNullRgt - cursorIdx ? nonNullLft : nonNullRgt;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (withProx) {\n\t\t\t\tlet dist = abs(cursorLft - valToPosX(xValues[cursorIdx], scaleX, xDim, 0));\n\n\t\t\t\tif (dist > _prox)\n\t\t\t\t\tidx2 = null;\n\t\t\t}\n\n\t\t\treturn idx2;\n\t\t};\n\t}\n\n\tconst setCursorEvent = e => { cursor.event = e; };\n\n\tcursor.idxs = activeIdxs;\n\n\tcursor._lock = false;\n\n\tlet points = cursor.points;\n\n\tpoints.show   = fnOrSelf(points.show);\n\tpoints.size   = fnOrSelf(points.size);\n\tpoints.stroke = fnOrSelf(points.stroke);\n\tpoints.width  = fnOrSelf(points.width);\n\tpoints.fill   = fnOrSelf(points.fill);\n\n\tconst focus = self.focus = assign({}, opts.focus || {alpha: 0.3}, cursor.focus);\n\n\tconst cursorFocus = focus.prox >= 0;\n\tconst cursorOnePt = cursorFocus && points.one;\n\n\t// series-intersection markers\n\tlet cursorPts = [];\n\t// position caches in CSS pixels\n\tlet cursorPtsLft = [];\n\tlet cursorPtsTop = [];\n\n\tfunction initCursorPt(s, si) {\n\t\tlet pt = points.show(self, si);\n\n\t\tif (pt) {\n\t\t\taddClass(pt, CURSOR_PT);\n\t\t\taddClass(pt, s.class);\n\t\t\telTrans(pt, -10, -10, plotWidCss, plotHgtCss);\n\t\t\tover.insertBefore(pt, cursorPts[si]);\n\n\t\t\treturn pt;\n\t\t}\n\t}\n\n\tfunction initSeries(s, i) {\n\t\tif (mode == 1 || i > 0) {\n\t\t\tlet isTime = mode == 1 && scales[s.scale].time;\n\n\t\t\tlet sv = s.value;\n\t\t\ts.value = isTime ? (isStr(sv) ? timeSeriesVal(_tzDate, timeSeriesStamp(sv, _fmtDate)) : sv || _timeSeriesVal) : sv || numSeriesVal;\n\t\t\ts.label = s.label || (isTime ? timeSeriesLabel : numSeriesLabel);\n\t\t}\n\n\t\tif (cursorOnePt || i > 0) {\n\t\t\ts.width  = s.width == null ? 1 : s.width;\n\t\t\ts.paths  = s.paths || linearPath;\n\t\t\ts.fillTo = fnOrSelf(s.fillTo || seriesFillTo);\n\t\t\ts.pxAlign = +ifNull(s.pxAlign, pxAlign);\n\t\t\ts.pxRound = pxRoundGen(s.pxAlign);\n\n\t\t\ts.stroke = fnOrSelf(s.stroke || null);\n\t\t\ts.fill   = fnOrSelf(s.fill || null);\n\t\t\ts._stroke = s._fill = s._paths = s._focus = null;\n\n\t\t\tlet _ptDia = ptDia(max(1, s.width), 1);\n\t\t\tlet points = s.points = assign({}, {\n\t\t\t\tsize: _ptDia,\n\t\t\t\twidth: max(1, _ptDia * .2),\n\t\t\t\tstroke: s.stroke,\n\t\t\t\tspace: _ptDia * 2,\n\t\t\t\tpaths: pointsPath,\n\t\t\t\t_stroke: null,\n\t\t\t\t_fill: null,\n\t\t\t}, s.points);\n\t\t\tpoints.show   = fnOrSelf(points.show);\n\t\t\tpoints.filter = fnOrSelf(points.filter);\n\t\t\tpoints.fill   = fnOrSelf(points.fill);\n\t\t\tpoints.stroke = fnOrSelf(points.stroke);\n\t\t\tpoints.paths  = fnOrSelf(points.paths);\n\t\t\tpoints.pxAlign = s.pxAlign;\n\t\t}\n\n\t\tif (showLegend) {\n\t\t\tlet rowCells = initLegendRow(s, i);\n\t\t\tlegendRows.splice(i, 0, rowCells[0]);\n\t\t\tlegendCells.splice(i, 0, rowCells[1]);\n\t\t\tlegend.values.push(null);\t// NULL_LEGEND_VALS not yet avil here :(\n\t\t}\n\n\t\tif (showCursor) {\n\t\t\tactiveIdxs.splice(i, 0, null);\n\n\t\t\tlet pt = null;\n\n\t\t\tif (cursorOnePt) {\n\t\t\t\tif (i == 0)\n\t\t\t\t\tpt = initCursorPt(s, i);\n\t\t\t}\n\t\t\telse if (i > 0)\n\t\t\t\tpt = initCursorPt(s, i);\n\n\t\t\tcursorPts.splice(i, 0, pt);\n\t\t\tcursorPtsLft.splice(i, 0, 0);\n\t\t\tcursorPtsTop.splice(i, 0, 0);\n\t\t}\n\n\t\tfire(\"addSeries\", i);\n\t}\n\n\tfunction addSeries(opts, si) {\n\t\tsi = si == null ? series.length : si;\n\n\t\topts = mode == 1 ? setDefault(opts, si, xSeriesOpts, ySeriesOpts) : setDefault(opts, si, {}, xySeriesOpts);\n\n\t\tseries.splice(si, 0, opts);\n\t\tinitSeries(series[si], si);\n\t}\n\n\tself.addSeries = addSeries;\n\n\tfunction delSeries(i) {\n\t\tseries.splice(i, 1);\n\n\t\tif (showLegend) {\n\t\t\tlegend.values.splice(i, 1);\n\n\t\t\tlegendCells.splice(i, 1);\n\t\t\tlet tr = legendRows.splice(i, 1)[0];\n\t\t\toffMouse(null, tr.firstChild);\n\t\t\ttr.remove();\n\t\t}\n\n\t\tif (showCursor) {\n\t\t\tactiveIdxs.splice(i, 1);\n\t\t\tcursorPts.splice(i, 1)[0].remove();\n\t\t\tcursorPtsLft.splice(i, 1);\n\t\t\tcursorPtsTop.splice(i, 1);\n\t\t}\n\n\t\t// TODO: de-init no-longer-needed scales?\n\n\t\tfire(\"delSeries\", i);\n\t}\n\n\tself.delSeries = delSeries;\n\n\tconst sidesWithAxes = [false, false, false, false];\n\n\tfunction initAxis(axis, i) {\n\t\taxis._show = axis.show;\n\n\t\tif (axis.show) {\n\t\t\tlet isVt = axis.side % 2;\n\n\t\t\tlet sc = scales[axis.scale];\n\n\t\t\t// this can occur if all series specify non-default scales\n\t\t\tif (sc == null) {\n\t\t\t\taxis.scale = isVt ? series[1].scale : xScaleKey;\n\t\t\t\tsc = scales[axis.scale];\n\t\t\t}\n\n\t\t\t// also set defaults for incrs & values based on axis distr\n\t\t\tlet isTime = sc.time;\n\n\t\t\taxis.size   = fnOrSelf(axis.size);\n\t\t\taxis.space  = fnOrSelf(axis.space);\n\t\t\taxis.rotate = fnOrSelf(axis.rotate);\n\n\t\t\tif (isArr(axis.incrs)) {\n\t\t\t\taxis.incrs.forEach(incr => {\n\t\t\t\t\t!fixedDec.has(incr) && fixedDec.set(incr, guessDec(incr));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\taxis.incrs  = fnOrSelf(axis.incrs  || (          sc.distr == 2 ? wholeIncrs : (isTime ? (ms == 1 ? timeIncrsMs : timeIncrsS) : numIncrs)));\n\t\t\taxis.splits = fnOrSelf(axis.splits || (isTime && sc.distr == 1 ? _timeAxisSplits : sc.distr == 3 ? logAxisSplits : sc.distr == 4 ? asinhAxisSplits : numAxisSplits));\n\n\t\t\taxis.stroke        = fnOrSelf(axis.stroke);\n\t\t\taxis.grid.stroke   = fnOrSelf(axis.grid.stroke);\n\t\t\taxis.ticks.stroke  = fnOrSelf(axis.ticks.stroke);\n\t\t\taxis.border.stroke = fnOrSelf(axis.border.stroke);\n\n\t\t\tlet av = axis.values;\n\n\t\t\taxis.values = (\n\t\t\t\t// static array of tick values\n\t\t\t\tisArr(av) && !isArr(av[0]) ? fnOrSelf(av) :\n\t\t\t\t// temporal\n\t\t\t\tisTime ? (\n\t\t\t\t\t// config array of fmtDate string tpls\n\t\t\t\t\tisArr(av) ?\n\t\t\t\t\t\ttimeAxisVals(_tzDate, timeAxisStamps(av, _fmtDate)) :\n\t\t\t\t\t// fmtDate string tpl\n\t\t\t\t\tisStr(av) ?\n\t\t\t\t\t\ttimeAxisVal(_tzDate, av) :\n\t\t\t\t\tav || _timeAxisVals\n\t\t\t\t) : av || numAxisVals\n\t\t\t);\n\n\t\t\taxis.filter = fnOrSelf(axis.filter || (          sc.distr >= 3 && sc.log == 10 ? log10AxisValsFilt : sc.distr == 3 && sc.log == 2 ? log2AxisValsFilt : retArg1));\n\n\t\t\taxis.font      = pxRatioFont(axis.font);\n\t\t\taxis.labelFont = pxRatioFont(axis.labelFont);\n\n\t\t\taxis._size   = axis.size(self, null, i, 0);\n\n\t\t\taxis._space  =\n\t\t\taxis._rotate =\n\t\t\taxis._incrs  =\n\t\t\taxis._found  =\t// foundIncrSpace\n\t\t\taxis._splits =\n\t\t\taxis._values = null;\n\n\t\t\tif (axis._size > 0) {\n\t\t\t\tsidesWithAxes[i] = true;\n\t\t\t\taxis._el = placeDiv(AXIS, wrap);\n\t\t\t}\n\n\t\t\t// debug\n\t\t//\taxis._el.style.background = \"#\"  + Math.floor(Math.random()*16777215).toString(16) + '80';\n\t\t}\n\t}\n\n\tfunction autoPadSide(self, side, sidesWithAxes, cycleNum) {\n\t\tlet [hasTopAxis, hasRgtAxis, hasBtmAxis, hasLftAxis] = sidesWithAxes;\n\n\t\tlet ori = side % 2;\n\t\tlet size = 0;\n\n\t\tif (ori == 0 && (hasLftAxis || hasRgtAxis))\n\t\t\tsize = (side == 0 && !hasTopAxis || side == 2 && !hasBtmAxis ? round(xAxisOpts.size / 3) : 0);\n\t\tif (ori == 1 && (hasTopAxis || hasBtmAxis))\n\t\t\tsize = (side == 1 && !hasRgtAxis || side == 3 && !hasLftAxis ? round(yAxisOpts.size / 2) : 0);\n\n\t\treturn size;\n\t}\n\n\tconst padding = self.padding = (opts.padding || [autoPadSide,autoPadSide,autoPadSide,autoPadSide]).map(p => fnOrSelf(ifNull(p, autoPadSide)));\n\tconst _padding = self._padding = padding.map((p, i) => p(self, i, sidesWithAxes, 0));\n\n\tlet dataLen;\n\n\t// rendered data window\n\tlet i0 = null;\n\tlet i1 = null;\n\tconst idxs = mode == 1 ? series[0].idxs : null;\n\n\tlet data0 = null;\n\n\tlet viaAutoScaleX = false;\n\n\tfunction setData(_data, _resetScales) {\n\t\tdata = _data == null ? [] : _data;\n\n\t\tself.data = self._data = data;\n\n\t\tif (mode == 2) {\n\t\t\tdataLen = 0;\n\t\t\tfor (let i = 1; i < series.length; i++)\n\t\t\t\tdataLen += data[i][0].length;\n\t\t}\n\t\telse {\n\t\t\tif (data.length == 0)\n\t\t\t\tself.data = self._data = data = [[]];\n\n\t\t\tdata0 = data[0];\n\t\t\tdataLen = data0.length;\n\n\t\t\tlet scaleData = data;\n\n\t\t\tif (xScaleDistr == 2) {\n\t\t\t\tscaleData = data.slice();\n\n\t\t\t\tlet _data0 = scaleData[0] = Array(dataLen);\n\t\t\t\tfor (let i = 0; i < dataLen; i++)\n\t\t\t\t\t_data0[i] = i;\n\t\t\t}\n\n\t\t\tself._data = data = scaleData;\n\t\t}\n\n\t\tresetYSeries(true);\n\n\t\tfire(\"setData\");\n\n\t\t// forces x axis tick values to re-generate when neither x scale nor y scale changes\n\t\t// in ordinal mode, scale range is by index, so will not change if new data has same length, but tick values are from data\n\t\tif (xScaleDistr == 2) {\n\t\t\tshouldConvergeSize = true;\n\n\t\t\t/* or somewhat cheaper, and uglier:\n\t\t\tif (ready) {\n\t\t\t\t// logic extracted from axesCalc()\n\t\t\t\tlet i = 0;\n\t\t\t\tlet axis = axes[i];\n\t\t\t\tlet _splits = axis._splits.map(i => data0[i]);\n\t\t\t\tlet [_incr, _space] = axis._found;\n\t\t\t\tlet incr = data0[_splits[1]] - data0[_splits[0]];\n\t\t\t\taxis._values = axis.values(self, axis.filter(self, _splits, i, _space, incr), i, _space, incr);\n\t\t\t}\n\t\t\t*/\n\t\t}\n\n\t\tif (_resetScales !== false) {\n\t\t\tlet xsc = scaleX;\n\n\t\t\tif (xsc.auto(self, viaAutoScaleX))\n\t\t\t\tautoScaleX();\n\t\t\telse\n\t\t\t\t_setScale(xScaleKey, xsc.min, xsc.max);\n\n\t\t\tshouldSetCursor = shouldSetCursor || cursor.left >= 0;\n\t\t\tshouldSetLegend = true;\n\t\t\tcommit();\n\t\t}\n\t}\n\n\tself.setData = setData;\n\n\tfunction autoScaleX() {\n\t\tviaAutoScaleX = true;\n\n\t\tlet _min, _max;\n\n\t\tif (mode == 1) {\n\t\t\tif (dataLen > 0) {\n\t\t\t\ti0 = idxs[0] = 0;\n\t\t\t\ti1 = idxs[1] = dataLen - 1;\n\n\t\t\t\t_min = data[0][i0];\n\t\t\t\t_max = data[0][i1];\n\n\t\t\t\tif (xScaleDistr == 2) {\n\t\t\t\t\t_min = i0;\n\t\t\t\t\t_max = i1;\n\t\t\t\t}\n\t\t\t\telse if (_min == _max) {\n\t\t\t\t\tif (xScaleDistr == 3)\n\t\t\t\t\t\t[_min, _max] = rangeLog(_min, _min, scaleX.log, false);\n\t\t\t\t\telse if (xScaleDistr == 4)\n\t\t\t\t\t\t[_min, _max] = rangeAsinh(_min, _min, scaleX.log, false);\n\t\t\t\t\telse if (scaleX.time)\n\t\t\t\t\t\t_max = _min + round(86400 / ms);\n\t\t\t\t\telse\n\t\t\t\t\t\t[_min, _max] = rangeNum(_min, _max, rangePad, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\ti0 = idxs[0] = _min = null;\n\t\t\t\ti1 = idxs[1] = _max = null;\n\t\t\t}\n\t\t}\n\n\t\t_setScale(xScaleKey, _min, _max);\n\t}\n\n\tlet ctxStroke, ctxFill, ctxWidth, ctxDash, ctxJoin, ctxCap, ctxFont, ctxAlign, ctxBaseline;\n\tlet ctxAlpha;\n\n\tfunction setCtxStyle(stroke, width, dash, cap, fill, join) {\n\t\tstroke ??= transparent;\n\t\tdash   ??= EMPTY_ARR;\n\t\tcap    ??= \"butt\"; // (\u203F|\u203F)\n\t\tfill   ??= transparent;\n\t\tjoin   ??= \"round\";\n\n\t\tif (stroke != ctxStroke)\n\t\t\tctx.strokeStyle = ctxStroke = stroke;\n\t\tif (fill != ctxFill)\n\t\t\tctx.fillStyle = ctxFill = fill;\n\t\tif (width != ctxWidth)\n\t\t\tctx.lineWidth = ctxWidth = width;\n\t\tif (join != ctxJoin)\n\t\t\tctx.lineJoin = ctxJoin = join;\n\t\tif (cap != ctxCap)\n\t\t\tctx.lineCap = ctxCap = cap;\n\t\tif (dash != ctxDash)\n\t\t\tctx.setLineDash(ctxDash = dash);\n\t}\n\n\tfunction setFontStyle(font, fill, align, baseline) {\n\t\tif (fill != ctxFill)\n\t\t\tctx.fillStyle = ctxFill = fill;\n\t\tif (font != ctxFont)\n\t\t\tctx.font = ctxFont = font;\n\t\tif (align != ctxAlign)\n\t\t\tctx.textAlign = ctxAlign = align;\n\t\tif (baseline != ctxBaseline)\n\t\t\tctx.textBaseline = ctxBaseline = baseline;\n\t}\n\n\tfunction accScale(wsc, psc, facet, data, sorted = 0) {\n\t\tif (data.length > 0 && wsc.auto(self, viaAutoScaleX) && (psc == null || psc.min == null)) {\n\t\t\tlet _i0 = ifNull(i0, 0);\n\t\t\tlet _i1 = ifNull(i1, data.length - 1);\n\n\t\t\t// only run getMinMax() for invalidated series data, else reuse\n\t\t\tlet minMax = facet.min == null ? getMinMax(data, _i0, _i1, sorted, wsc.distr == 3) : [facet.min, facet.max];\n\n\t\t\t// initial min/max\n\t\t\twsc.min = min(wsc.min, facet.min = minMax[0]);\n\t\t\twsc.max = max(wsc.max, facet.max = minMax[1]);\n\t\t}\n\t}\n\n\tconst AUTOSCALE = {min: null, max: null};\n\n\tfunction setScales() {\n\t//\tlog(\"setScales()\", arguments);\n\n\t\t// implicitly add auto scales, and unranged scales\n\t\tfor (let k in scales) {\n\t\t\tlet sc = scales[k];\n\n\t\t\tif (pendScales[k] == null &&\n\t\t\t\t(\n\t\t\t\t\t// scales that have never been set (on init)\n\t\t\t\t\tsc.min == null ||\n\t\t\t\t\t// or auto scales when the x scale was explicitly set\n\t\t\t\t\tpendScales[xScaleKey] != null && sc.auto(self, viaAutoScaleX)\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tpendScales[k] = AUTOSCALE;\n\t\t\t}\n\t\t}\n\n\t\t// implicitly add dependent scales\n\t\tfor (let k in scales) {\n\t\t\tlet sc = scales[k];\n\n\t\t\tif (pendScales[k] == null && sc.from != null && pendScales[sc.from] != null)\n\t\t\t\tpendScales[k] = AUTOSCALE;\n\t\t}\n\n\t\t// explicitly setting the x-scale invalidates everything (acts as redraw)\n\t\tif (pendScales[xScaleKey] != null)\n\t\t\tresetYSeries(true); // TODO: only reset series on auto scales?\n\n\t\tlet wipScales = {};\n\n\t\tfor (let k in pendScales) {\n\t\t\tlet psc = pendScales[k];\n\n\t\t\tif (psc != null) {\n\t\t\t\tlet wsc = wipScales[k] = copy(scales[k], fastIsObj);\n\n\t\t\t\tif (psc.min != null)\n\t\t\t\t\tassign(wsc, psc);\n\t\t\t\telse if (k != xScaleKey || mode == 2) {\n\t\t\t\t\tif (dataLen == 0 && wsc.from == null) {\n\t\t\t\t\t\tlet minMax = wsc.range(self, null, null, k);\n\t\t\t\t\t\twsc.min = minMax[0];\n\t\t\t\t\t\twsc.max = minMax[1];\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\twsc.min = inf;\n\t\t\t\t\t\twsc.max = -inf;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (dataLen > 0) {\n\t\t\t// pre-range y-scales from y series' data values\n\t\t\tseries.forEach((s, i) => {\n\t\t\t\tif (mode == 1) {\n\t\t\t\t\tlet k = s.scale;\n\t\t\t\t\tlet psc = pendScales[k];\n\n\t\t\t\t\tif (psc == null)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tlet wsc = wipScales[k];\n\n\t\t\t\t\tif (i == 0) {\n\t\t\t\t\t\tlet minMax = wsc.range(self, wsc.min, wsc.max, k);\n\n\t\t\t\t\t\twsc.min = minMax[0];\n\t\t\t\t\t\twsc.max = minMax[1];\n\n\t\t\t\t\t\ti0 = closestIdx(wsc.min, data[0]);\n\t\t\t\t\t\ti1 = closestIdx(wsc.max, data[0]);\n\n\t\t\t\t\t\t// don't try to contract same or adjacent idxs\n\t\t\t\t\t\tif (i1 - i0 > 1) {\n\t\t\t\t\t\t\t// closest indices can be outside of view\n\t\t\t\t\t\t\tif (data[0][i0] < wsc.min)\n\t\t\t\t\t\t\t\ti0++;\n\t\t\t\t\t\t\tif (data[0][i1] > wsc.max)\n\t\t\t\t\t\t\t\ti1--;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ts.min = data0[i0];\n\t\t\t\t\t\ts.max = data0[i1];\n\t\t\t\t\t}\n\t\t\t\t\telse if (s.show && s.auto)\n\t\t\t\t\t\taccScale(wsc, psc, s, data[i], s.sorted);\n\n\t\t\t\t\ts.idxs[0] = i0;\n\t\t\t\t\ts.idxs[1] = i1;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (i > 0) {\n\t\t\t\t\t\tif (s.show && s.auto) {\n\t\t\t\t\t\t\t// TODO: only handles, assumes and requires facets[0] / 'x' scale, and facets[1] / 'y' scale\n\t\t\t\t\t\t\tlet [ xFacet, yFacet ] = s.facets;\n\t\t\t\t\t\t\tlet xScaleKey = xFacet.scale;\n\t\t\t\t\t\t\tlet yScaleKey = yFacet.scale;\n\t\t\t\t\t\t\tlet [ xData, yData ] = data[i];\n\n\t\t\t\t\t\t\tlet wscx = wipScales[xScaleKey];\n\t\t\t\t\t\t\tlet wscy = wipScales[yScaleKey];\n\n\t\t\t\t\t\t\t// null can happen when only x is zoomed, but y has static range and doesnt get auto-added to pending\n\t\t\t\t\t\t\twscx != null && accScale(wscx, pendScales[xScaleKey], xFacet, xData, xFacet.sorted);\n\t\t\t\t\t\t\twscy != null && accScale(wscy, pendScales[yScaleKey], yFacet, yData, yFacet.sorted);\n\n\t\t\t\t\t\t\t// temp\n\t\t\t\t\t\t\ts.min = yFacet.min;\n\t\t\t\t\t\t\ts.max = yFacet.max;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// range independent scales\n\t\t\tfor (let k in wipScales) {\n\t\t\t\tlet wsc = wipScales[k];\n\t\t\t\tlet psc = pendScales[k];\n\n\t\t\t\tif (wsc.from == null && (psc == null || psc.min == null)) {\n\t\t\t\t\tlet minMax = wsc.range(\n\t\t\t\t\t\tself,\n\t\t\t\t\t\twsc.min ==  inf ? null : wsc.min,\n\t\t\t\t\t\twsc.max == -inf ? null : wsc.max,\n\t\t\t\t\t\tk\n\t\t\t\t\t);\n\t\t\t\t\twsc.min = minMax[0];\n\t\t\t\t\twsc.max = minMax[1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// range dependent scales\n\t\tfor (let k in wipScales) {\n\t\t\tlet wsc = wipScales[k];\n\n\t\t\tif (wsc.from != null) {\n\t\t\t\tlet base = wipScales[wsc.from];\n\n\t\t\t\tif (base.min == null)\n\t\t\t\t\twsc.min = wsc.max = null;\n\t\t\t\telse {\n\t\t\t\t\tlet minMax = wsc.range(self, base.min, base.max, k);\n\t\t\t\t\twsc.min = minMax[0];\n\t\t\t\t\twsc.max = minMax[1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet changed = {};\n\t\tlet anyChanged = false;\n\n\t\tfor (let k in wipScales) {\n\t\t\tlet wsc = wipScales[k];\n\t\t\tlet sc = scales[k];\n\n\t\t\tif (sc.min != wsc.min || sc.max != wsc.max) {\n\t\t\t\tsc.min = wsc.min;\n\t\t\t\tsc.max = wsc.max;\n\n\t\t\t\tlet distr = sc.distr;\n\n\t\t\t\tsc._min = distr == 3 ? log10(sc.min) : distr == 4 ? asinh(sc.min, sc.asinh) : distr == 100 ? sc.fwd(sc.min) : sc.min;\n\t\t\t\tsc._max = distr == 3 ? log10(sc.max) : distr == 4 ? asinh(sc.max, sc.asinh) : distr == 100 ? sc.fwd(sc.max) : sc.max;\n\n\t\t\t\tchanged[k] = anyChanged = true;\n\t\t\t}\n\t\t}\n\n\t\tif (anyChanged) {\n\t\t\t// invalidate paths of all series on changed scales\n\t\t\tseries.forEach((s, i) => {\n\t\t\t\tif (mode == 2) {\n\t\t\t\t\tif (i > 0 && changed.y)\n\t\t\t\t\t\ts._paths = null;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (changed[s.scale])\n\t\t\t\t\t\ts._paths = null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfor (let k in changed) {\n\t\t\t\tshouldConvergeSize = true;\n\t\t\t\tfire(\"setScale\", k);\n\t\t\t}\n\n\t\t\tif (showCursor && cursor.left >= 0)\n\t\t\t\tshouldSetCursor = shouldSetLegend = true;\n\t\t}\n\n\t\tfor (let k in pendScales)\n\t\t\tpendScales[k] = null;\n\t}\n\n\t// grabs the nearest indices with y data outside of x-scale limits\n\tfunction getOuterIdxs(ydata) {\n\t\tlet _i0 = clamp(i0 - 1, 0, dataLen - 1);\n\t\tlet _i1 = clamp(i1 + 1, 0, dataLen - 1);\n\n\t\twhile (ydata[_i0] == null && _i0 > 0)\n\t\t\t_i0--;\n\n\t\twhile (ydata[_i1] == null && _i1 < dataLen - 1)\n\t\t\t_i1++;\n\n\t\treturn [_i0, _i1];\n\t}\n\n\tfunction drawSeries() {\n\t\tif (dataLen > 0) {\n\t\t\tseries.forEach((s, i) => {\n\t\t\t\tif (i > 0 && s.show) {\n\t\t\t\t\tcacheStrokeFill(i, false);\n\t\t\t\t\tcacheStrokeFill(i, true);\n\n\t\t\t\t\tif (s._paths == null) {\n\t\t\t\t\t\tif (ctxAlpha != s.alpha)\n\t\t\t\t\t\t\tctx.globalAlpha = ctxAlpha = s.alpha;\n\n\t\t\t\t\t\tlet _idxs = mode == 2 ? [0, data[i][0].length - 1] : getOuterIdxs(data[i]);\n\t\t\t\t\t\ts._paths = s.paths(self, i, _idxs[0], _idxs[1]);\n\n\t\t\t\t\t\tif (ctxAlpha != 1)\n\t\t\t\t\t\t\tctx.globalAlpha = ctxAlpha = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tseries.forEach((s, i) => {\n\t\t\t\tif (i > 0 && s.show) {\n\t\t\t\t\tif (ctxAlpha != s.alpha)\n\t\t\t\t\t\tctx.globalAlpha = ctxAlpha = s.alpha;\n\n\t\t\t\t\ts._paths != null && drawPath(i, false);\n\n\t\t\t\t\t{\n\t\t\t\t\t\tlet _gaps = s._paths != null ? s._paths.gaps : null;\n\n\t\t\t\t\t\tlet show = s.points.show(self, i, i0, i1, _gaps);\n\t\t\t\t\t\tlet idxs = s.points.filter(self, i, show, _gaps);\n\n\t\t\t\t\t\tif (show || idxs) {\n\t\t\t\t\t\t\ts.points._paths = s.points.paths(self, i, i0, i1, idxs);\n\t\t\t\t\t\t\tdrawPath(i, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ctxAlpha != 1)\n\t\t\t\t\t\tctx.globalAlpha = ctxAlpha = 1;\n\n\t\t\t\t\tfire(\"drawSeries\", i);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction cacheStrokeFill(si, _points) {\n\t\tlet s = _points ? series[si].points : series[si];\n\n\t\ts._stroke = s.stroke(self, si);\n\t\ts._fill   = s.fill(self, si);\n\t}\n\n\tfunction drawPath(si, _points) {\n\t\tlet s = _points ? series[si].points : series[si];\n\n\t\tlet {\n\t\t\tstroke,\n\t\t\tfill,\n\t\t\tclip: gapsClip,\n\t\t\tflags,\n\n\t\t\t_stroke: strokeStyle = s._stroke,\n\t\t\t_fill:   fillStyle   = s._fill,\n\t\t\t_width:  width       = s.width,\n\t\t} = s._paths;\n\n\t\twidth = roundDec(width * pxRatio, 3);\n\n\t\tlet boundsClip = null;\n\t\tlet offset = (width % 2) / 2;\n\n\t\tif (_points && fillStyle == null)\n\t\t\tfillStyle = width > 0 ? \"#fff\" : strokeStyle;\n\n\t\tlet _pxAlign = s.pxAlign == 1 && offset > 0;\n\n\t\t_pxAlign && ctx.translate(offset, offset);\n\n\t\tif (!_points) {\n\t\t\tlet lft = plotLft - width / 2,\n\t\t\t\ttop = plotTop - width / 2,\n\t\t\t\twid = plotWid + width,\n\t\t\t\thgt = plotHgt + width;\n\n\t\t\tboundsClip = new Path2D();\n\t\t\tboundsClip.rect(lft, top, wid, hgt);\n\t\t}\n\n\t\t// the points pathbuilder's gapsClip is its boundsClip, since points dont need gaps clipping, and bounds depend on point size\n\t\tif (_points)\n\t\t\tstrokeFill(strokeStyle, width, s.dash, s.cap, fillStyle, stroke, fill, flags, gapsClip);\n\t\telse\n\t\t\tfillStroke(si, strokeStyle, width, s.dash, s.cap, fillStyle, stroke, fill, flags, boundsClip, gapsClip);\n\n\t\t_pxAlign && ctx.translate(-offset, -offset);\n\t}\n\n\tfunction fillStroke(si, strokeStyle, lineWidth, lineDash, lineCap, fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip) {\n\t\tlet didStrokeFill = false;\n\n\t\t// for all bands where this series is the top edge, create upwards clips using the bottom edges\n\t\t// and apply clips + fill with band fill or dfltFill\n\t\tflags != 0 && bands.forEach((b, bi) => {\n\t\t\t// isUpperEdge?\n\t\t\tif (b.series[0] == si) {\n\t\t\t\tlet lowerEdge = series[b.series[1]];\n\t\t\t\tlet lowerData = data[b.series[1]];\n\n\t\t\t\tlet bandClip = (lowerEdge._paths || EMPTY_OBJ).band;\n\n\t\t\t\tif (isArr(bandClip))\n\t\t\t\t\tbandClip = b.dir == 1 ? bandClip[0] : bandClip[1];\n\n\t\t\t\tlet gapsClip2;\n\n\t\t\t\tlet _fillStyle = null;\n\n\t\t\t\t// hasLowerEdge?\n\t\t\t\tif (lowerEdge.show && bandClip && hasData(lowerData, i0, i1)) {\n\t\t\t\t\t_fillStyle = b.fill(self, bi) || fillStyle;\n\t\t\t\t\tgapsClip2 = lowerEdge._paths.clip;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tbandClip = null;\n\n\t\t\t\tstrokeFill(strokeStyle, lineWidth, lineDash, lineCap, _fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip, gapsClip2, bandClip);\n\n\t\t\t\tdidStrokeFill = true;\n\t\t\t}\n\t\t});\n\n\t\tif (!didStrokeFill)\n\t\t\tstrokeFill(strokeStyle, lineWidth, lineDash, lineCap, fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip);\n\t}\n\n\tconst CLIP_FILL_STROKE = BAND_CLIP_FILL | BAND_CLIP_STROKE;\n\n\tfunction strokeFill(strokeStyle, lineWidth, lineDash, lineCap, fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip, gapsClip2, bandClip) {\n\t\tsetCtxStyle(strokeStyle, lineWidth, lineDash, lineCap, fillStyle);\n\n\t\tif (boundsClip || gapsClip || bandClip) {\n\t\t\tctx.save();\n\t\t\tboundsClip && ctx.clip(boundsClip);\n\t\t\tgapsClip && ctx.clip(gapsClip);\n\t\t}\n\n\t\tif (bandClip) {\n\t\t\tif ((flags & CLIP_FILL_STROKE) == CLIP_FILL_STROKE) {\n\t\t\t\tctx.clip(bandClip);\n\t\t\t\tgapsClip2 && ctx.clip(gapsClip2);\n\t\t\t\tdoFill(fillStyle, fillPath);\n\t\t\t\tdoStroke(strokeStyle, strokePath, lineWidth);\n\t\t\t}\n\t\t\telse if (flags & BAND_CLIP_STROKE) {\n\t\t\t\tdoFill(fillStyle, fillPath);\n\t\t\t\tctx.clip(bandClip);\n\t\t\t\tdoStroke(strokeStyle, strokePath, lineWidth);\n\t\t\t}\n\t\t\telse if (flags & BAND_CLIP_FILL) {\n\t\t\t\tctx.save();\n\t\t\t\tctx.clip(bandClip);\n\t\t\t\tgapsClip2 && ctx.clip(gapsClip2);\n\t\t\t\tdoFill(fillStyle, fillPath);\n\t\t\t\tctx.restore();\n\t\t\t\tdoStroke(strokeStyle, strokePath, lineWidth);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tdoFill(fillStyle, fillPath);\n\t\t\tdoStroke(strokeStyle, strokePath, lineWidth);\n\t\t}\n\n\t\tif (boundsClip || gapsClip || bandClip)\n\t\t\tctx.restore();\n\t}\n\n\tfunction doStroke(strokeStyle, strokePath, lineWidth) {\n\t\tif (lineWidth > 0) {\n\t\t\tif (strokePath instanceof Map) {\n\t\t\t\tstrokePath.forEach((strokePath, strokeStyle) => {\n\t\t\t\t\tctx.strokeStyle = ctxStroke = strokeStyle;\n\t\t\t\t\tctx.stroke(strokePath);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t\tstrokePath != null && strokeStyle && ctx.stroke(strokePath);\n\t\t}\n\t}\n\n\tfunction doFill(fillStyle, fillPath) {\n\t\tif (fillPath instanceof Map) {\n\t\t\tfillPath.forEach((fillPath, fillStyle) => {\n\t\t\t\tctx.fillStyle = ctxFill = fillStyle;\n\t\t\t\tctx.fill(fillPath);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t\tfillPath != null && fillStyle && ctx.fill(fillPath);\n\t}\n\n\tfunction getIncrSpace(axisIdx, min, max, fullDim) {\n\t\tlet axis = axes[axisIdx];\n\n\t\tlet incrSpace;\n\n\t\tif (fullDim <= 0)\n\t\t\tincrSpace = [0, 0];\n\t\telse {\n\t\t\tlet minSpace = axis._space = axis.space(self, axisIdx, min, max, fullDim);\n\t\t\tlet incrs    = axis._incrs = axis.incrs(self, axisIdx, min, max, fullDim, minSpace);\n\t\t\tincrSpace    = findIncr(min, max, incrs, fullDim, minSpace);\n\t\t}\n\n\t\treturn (axis._found = incrSpace);\n\t}\n\n\tfunction drawOrthoLines(offs, filts, ori, side, pos0, len, width, stroke, dash, cap) {\n\t\tlet offset = (width % 2) / 2;\n\n\t\tpxAlign == 1 && ctx.translate(offset, offset);\n\n\t\tsetCtxStyle(stroke, width, dash, cap, stroke);\n\n\t\tctx.beginPath();\n\n\t\tlet x0, y0, x1, y1, pos1 = pos0 + (side == 0 || side == 3 ? -len : len);\n\n\t\tif (ori == 0) {\n\t\t\ty0 = pos0;\n\t\t\ty1 = pos1;\n\t\t}\n\t\telse {\n\t\t\tx0 = pos0;\n\t\t\tx1 = pos1;\n\t\t}\n\n\t\tfor (let i = 0; i < offs.length; i++) {\n\t\t\tif (filts[i] != null) {\n\t\t\t\tif (ori == 0)\n\t\t\t\t\tx0 = x1 = offs[i];\n\t\t\t\telse\n\t\t\t\t\ty0 = y1 = offs[i];\n\n\t\t\t\tctx.moveTo(x0, y0);\n\t\t\t\tctx.lineTo(x1, y1);\n\t\t\t}\n\t\t}\n\n\t\tctx.stroke();\n\n\t\tpxAlign == 1 && ctx.translate(-offset, -offset);\n\t}\n\n\tfunction axesCalc(cycleNum) {\n\t//\tlog(\"axesCalc()\", arguments);\n\n\t\tlet converged = true;\n\n\t\taxes.forEach((axis, i) => {\n\t\t\tif (!axis.show)\n\t\t\t\treturn;\n\n\t\t\tlet scale = scales[axis.scale];\n\n\t\t\tif (scale.min == null) {\n\t\t\t\tif (axis._show) {\n\t\t\t\t\tconverged = false;\n\t\t\t\t\taxis._show = false;\n\t\t\t\t\tresetYSeries(false);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!axis._show) {\n\t\t\t\t\tconverged = false;\n\t\t\t\t\taxis._show = true;\n\t\t\t\t\tresetYSeries(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet side = axis.side;\n\t\t\tlet ori = side % 2;\n\n\t\t\tlet {min, max} = scale;\t\t// \t\t// should this toggle them ._show = false\n\n\t\t\tlet [_incr, _space] = getIncrSpace(i, min, max, ori == 0 ? plotWidCss : plotHgtCss);\n\n\t\t\tif (_space == 0)\n\t\t\t\treturn;\n\n\t\t\t// if we're using index positions, force first tick to match passed index\n\t\t\tlet forceMin = scale.distr == 2;\n\n\t\t\tlet _splits = axis._splits = axis.splits(self, i, min, max, _incr, _space, forceMin);\n\n\t\t\t// tick labels\n\t\t\t// BOO this assumes a specific data/series\n\t\t\tlet splits = scale.distr == 2 ? _splits.map(i => data0[i]) : _splits;\n\t\t\tlet incr   = scale.distr == 2 ? data0[_splits[1]] - data0[_splits[0]] : _incr;\n\n\t\t\tlet values = axis._values = axis.values(self, axis.filter(self, splits, i, _space, incr), i, _space, incr);\n\n\t\t\t// rotating of labels only supported on bottom x axis\n\t\t\taxis._rotate = side == 2 ? axis.rotate(self, values, i, _space) : 0;\n\n\t\t\tlet oldSize = axis._size;\n\n\t\t\taxis._size = ceil(axis.size(self, values, i, cycleNum));\n\n\t\t\tif (oldSize != null && axis._size != oldSize)\t\t\t// ready && ?\n\t\t\t\tconverged = false;\n\t\t});\n\n\t\treturn converged;\n\t}\n\n\tfunction paddingCalc(cycleNum) {\n\t\tlet converged = true;\n\n\t\tpadding.forEach((p, i) => {\n\t\t\tlet _p = p(self, i, sidesWithAxes, cycleNum);\n\n\t\t\tif (_p != _padding[i])\n\t\t\t\tconverged = false;\n\n\t\t\t_padding[i] = _p;\n\t\t});\n\n\t\treturn converged;\n\t}\n\n\tfunction drawAxesGrid() {\n\t\tfor (let i = 0; i < axes.length; i++) {\n\t\t\tlet axis = axes[i];\n\n\t\t\tif (!axis.show || !axis._show)\n\t\t\t\tcontinue;\n\n\t\t\tlet side = axis.side;\n\t\t\tlet ori = side % 2;\n\n\t\t\tlet x, y;\n\n\t\t\tlet fillStyle = axis.stroke(self, i);\n\n\t\t\tlet shiftDir = side == 0 || side == 3 ? -1 : 1;\n\n\t\t\t// axis label\n\t\t\tif (axis.label) {\n\t\t\t\tlet shiftAmt = axis.labelGap * shiftDir;\n\t\t\t\tlet baseLpos = round((axis._lpos + shiftAmt) * pxRatio);\n\n\t\t\t\tsetFontStyle(axis.labelFont[0], fillStyle, \"center\", side == 2 ? TOP : BOTTOM);\n\n\t\t\t\tctx.save();\n\n\t\t\t\tif (ori == 1) {\n\t\t\t\t\tx = y = 0;\n\n\t\t\t\t\tctx.translate(\n\t\t\t\t\t\tbaseLpos,\n\t\t\t\t\t\tround(plotTop + plotHgt / 2),\n\t\t\t\t\t);\n\t\t\t\t\tctx.rotate((side == 3 ? -PI : PI) / 2);\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tx = round(plotLft + plotWid / 2);\n\t\t\t\t\ty = baseLpos;\n\t\t\t\t}\n\n\t\t\t\tctx.fillText(axis.label, x, y);\n\n\t\t\t\tctx.restore();\n\t\t\t}\n\n\t\t\tlet [_incr, _space] = axis._found;\n\n\t\t\tif (_space == 0)\n\t\t\t\tcontinue;\n\n\t\t\tlet scale = scales[axis.scale];\n\n\t\t\tlet plotDim = ori == 0 ? plotWid : plotHgt;\n\t\t\tlet plotOff = ori == 0 ? plotLft : plotTop;\n\n\t\t\tlet axisGap = round(axis.gap * pxRatio);\n\n\t\t\tlet _splits = axis._splits;\n\n\t\t\t// tick labels\n\t\t\t// BOO this assumes a specific data/series\n\t\t\tlet splits = scale.distr == 2 ? _splits.map(i => data0[i]) : _splits;\n\t\t\tlet incr   = scale.distr == 2 ? data0[_splits[1]] - data0[_splits[0]] : _incr;\n\n\t\t\tlet ticks = axis.ticks;\n\t\t\tlet border = axis.border;\n\t\t\tlet tickSize = ticks.show ? round(ticks.size * pxRatio) : 0;\n\n\t\t\t// rotating of labels only supported on bottom x axis\n\t\t\tlet angle = axis._rotate * -PI/180;\n\n\t\t\tlet basePos  = pxRound(axis._pos * pxRatio);\n\t\t\tlet shiftAmt = (tickSize + axisGap) * shiftDir;\n\t\t\tlet finalPos = basePos + shiftAmt;\n\t\t\t    y        = ori == 0 ? finalPos : 0;\n\t\t\t    x        = ori == 1 ? finalPos : 0;\n\n\t\t\tlet font         = axis.font[0];\n\t\t\tlet textAlign    = axis.align == 1 ? LEFT :\n\t\t\t                   axis.align == 2 ? RIGHT :\n\t\t\t                   angle > 0 ? LEFT :\n\t\t\t                   angle < 0 ? RIGHT :\n\t\t\t                   ori == 0 ? \"center\" : side == 3 ? RIGHT : LEFT;\n\t\t\tlet textBaseline = angle ||\n\t\t\t                   ori == 1 ? \"middle\" : side == 2 ? TOP   : BOTTOM;\n\n\t\t\tsetFontStyle(font, fillStyle, textAlign, textBaseline);\n\n\t\t\tlet lineHeight = axis.font[1] * axis.lineGap;\n\n\t\t\tlet canOffs = _splits.map(val => pxRound(getPos(val, scale, plotDim, plotOff)));\n\n\t\t\tlet _values = axis._values;\n\n\t\t\tfor (let i = 0; i < _values.length; i++) {\n\t\t\t\tlet val = _values[i];\n\n\t\t\t\tif (val != null) {\n\t\t\t\t\tif (ori == 0)\n\t\t\t\t\t\tx = canOffs[i];\n\t\t\t\t\telse\n\t\t\t\t\t\ty = canOffs[i];\n\n\t\t\t\t\tval = \"\" + val;\n\n\t\t\t\t\tlet _parts = val.indexOf(\"\\n\") == -1 ? [val] : val.split(/\\n/gm);\n\n\t\t\t\t\tfor (let j = 0; j < _parts.length; j++) {\n\t\t\t\t\t\tlet text = _parts[j];\n\n\t\t\t\t\t\tif (angle) {\n\t\t\t\t\t\t\tctx.save();\n\t\t\t\t\t\t\tctx.translate(x, y + j * lineHeight); // can this be replaced with position math?\n\t\t\t\t\t\t\tctx.rotate(angle); // can this be done once?\n\t\t\t\t\t\t\tctx.fillText(text, 0, 0);\n\t\t\t\t\t\t\tctx.restore();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tctx.fillText(text, x, y + j * lineHeight);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// ticks\n\t\t\tif (ticks.show) {\n\t\t\t\tdrawOrthoLines(\n\t\t\t\t\tcanOffs,\n\t\t\t\t\tticks.filter(self, splits, i, _space, incr),\n\t\t\t\t\tori,\n\t\t\t\t\tside,\n\t\t\t\t\tbasePos,\n\t\t\t\t\ttickSize,\n\t\t\t\t\troundDec(ticks.width * pxRatio, 3),\n\t\t\t\t\tticks.stroke(self, i),\n\t\t\t\t\tticks.dash,\n\t\t\t\t\tticks.cap,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// grid\n\t\t\tlet grid = axis.grid;\n\n\t\t\tif (grid.show) {\n\t\t\t\tdrawOrthoLines(\n\t\t\t\t\tcanOffs,\n\t\t\t\t\tgrid.filter(self, splits, i, _space, incr),\n\t\t\t\t\tori,\n\t\t\t\t\tori == 0 ? 2 : 1,\n\t\t\t\t\tori == 0 ? plotTop : plotLft,\n\t\t\t\t\tori == 0 ? plotHgt : plotWid,\n\t\t\t\t\troundDec(grid.width * pxRatio, 3),\n\t\t\t\t\tgrid.stroke(self, i),\n\t\t\t\t\tgrid.dash,\n\t\t\t\t\tgrid.cap,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (border.show) {\n\t\t\t\tdrawOrthoLines(\n\t\t\t\t\t[basePos],\n\t\t\t\t\t[1],\n\t\t\t\t\tori == 0 ? 1 : 0,\n\t\t\t\t\tori == 0 ? 1 : 2,\n\t\t\t\t\tori == 1 ? plotTop : plotLft,\n\t\t\t\t\tori == 1 ? plotHgt : plotWid,\n\t\t\t\t\troundDec(border.width * pxRatio, 3),\n\t\t\t\t\tborder.stroke(self, i),\n\t\t\t\t\tborder.dash,\n\t\t\t\t\tborder.cap,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tfire(\"drawAxes\");\n\t}\n\n\tfunction resetYSeries(minMax) {\n\t//\tlog(\"resetYSeries()\", arguments);\n\n\t\tseries.forEach((s, i) => {\n\t\t\tif (i > 0) {\n\t\t\t\ts._paths = null;\n\n\t\t\t\tif (minMax) {\n\t\t\t\t\tif (mode == 1) {\n\t\t\t\t\t\ts.min = null;\n\t\t\t\t\t\ts.max = null;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ts.facets.forEach(f => {\n\t\t\t\t\t\t\tf.min = null;\n\t\t\t\t\t\t\tf.max = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tlet queuedCommit = false;\n\tlet deferHooks = false;\n\tlet hooksQueue = [];\n\n\tfunction flushHooks() {\n\t\tdeferHooks = false;\n\n\t\tfor (let i = 0; i < hooksQueue.length; i++)\n\t\t\tfire(...hooksQueue[i]);\n\n\t\thooksQueue.length = 0;\n\t}\n\n\tfunction commit() {\n\t\tif (!queuedCommit) {\n\t\t\tmicroTask(_commit);\n\t\t\tqueuedCommit = true;\n\t\t}\n\t}\n\n\t// manual batching (aka immediate mode), skips microtask queue\n\tfunction batch(fn, _deferHooks = false) {\n\t\tqueuedCommit = true;\n\t\tdeferHooks = _deferHooks;\n\n\t\tfn(self);\n\t\t_commit();\n\n\t\tif (_deferHooks && hooksQueue.length > 0)\n\t\t\tqueueMicrotask(flushHooks);\n\t}\n\n\tself.batch = batch;\n\n\tfunction _commit() {\n\t//\tlog(\"_commit()\", arguments);\n\n\t\tif (shouldSetScales) {\n\t\t\tsetScales();\n\t\t\tshouldSetScales = false;\n\t\t}\n\n\t\tif (shouldConvergeSize) {\n\t\t\tconvergeSize();\n\t\t\tshouldConvergeSize = false;\n\t\t}\n\n\t\tif (shouldSetSize) {\n\t\t\tsetStylePx(under, LEFT,   plotLftCss);\n\t\t\tsetStylePx(under, TOP,    plotTopCss);\n\t\t\tsetStylePx(under, WIDTH,  plotWidCss);\n\t\t\tsetStylePx(under, HEIGHT, plotHgtCss);\n\n\t\t\tsetStylePx(over, LEFT,    plotLftCss);\n\t\t\tsetStylePx(over, TOP,     plotTopCss);\n\t\t\tsetStylePx(over, WIDTH,   plotWidCss);\n\t\t\tsetStylePx(over, HEIGHT,  plotHgtCss);\n\n\t\t\tsetStylePx(wrap, WIDTH,   fullWidCss);\n\t\t\tsetStylePx(wrap, HEIGHT,  fullHgtCss);\n\n\t\t\t// NOTE: mutating this during print preview in Chrome forces transparent\n\t\t\t// canvas pixels to white, even when followed up with clearRect() below\n\t\t\tcan.width  = round(fullWidCss * pxRatio);\n\t\t\tcan.height = round(fullHgtCss * pxRatio);\n\n\t\t\taxes.forEach(({ _el, _show, _size, _pos, side }) => {\n\t\t\t\tif (_el != null) {\n\t\t\t\t\tif (_show) {\n\t\t\t\t\t\tlet posOffset = (side === 3 || side === 0 ? _size : 0);\n\t\t\t\t\t\tlet isVt = side % 2 == 1;\n\n\t\t\t\t\t\tsetStylePx(_el, isVt ? \"left\"   : \"top\",    _pos - posOffset);\n\t\t\t\t\t\tsetStylePx(_el, isVt ? \"width\"  : \"height\", _size);\n\t\t\t\t\t\tsetStylePx(_el, isVt ? \"top\"    : \"left\",   isVt ? plotTopCss : plotLftCss);\n\t\t\t\t\t\tsetStylePx(_el, isVt ? \"height\" : \"width\",  isVt ? plotHgtCss : plotWidCss);\n\n\t\t\t\t\t\tremClass(_el, OFF);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\taddClass(_el, OFF);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// invalidate ctx style cache\n\t\t\tctxStroke = ctxFill = ctxWidth = ctxJoin = ctxCap = ctxFont = ctxAlign = ctxBaseline = ctxDash = null;\n\t\t\tctxAlpha = 1;\n\n\t\t\tsyncRect(true);\n\n\t\t\tif (\n\t\t\t\tplotLftCss != _plotLftCss ||\n\t\t\t\tplotTopCss != _plotTopCss ||\n\t\t\t\tplotWidCss != _plotWidCss ||\n\t\t\t\tplotHgtCss != _plotHgtCss\n\t\t\t) {\n\t\t\t\tresetYSeries(false);\n\n\t\t\t\tlet pctWid = plotWidCss / _plotWidCss;\n\t\t\t\tlet pctHgt = plotHgtCss / _plotHgtCss;\n\n\t\t\t\tif (showCursor && !shouldSetCursor && cursor.left >= 0) {\n\t\t\t\t\tcursor.left *= pctWid;\n\t\t\t\t\tcursor.top  *= pctHgt;\n\n\t\t\t\t\tvCursor && elTrans(vCursor, round(cursor.left), 0, plotWidCss, plotHgtCss);\n\t\t\t\t\thCursor && elTrans(hCursor, 0, round(cursor.top), plotWidCss, plotHgtCss);\n\n\t\t\t\t\tfor (let i = 0; i < cursorPts.length; i++) {\n\t\t\t\t\t\tlet pt = cursorPts[i];\n\n\t\t\t\t\t\tif (pt != null) {\n\t\t\t\t\t\t\tcursorPtsLft[i] *= pctWid;\n\t\t\t\t\t\t\tcursorPtsTop[i] *= pctHgt;\n\t\t\t\t\t\t\telTrans(pt, ceil(cursorPtsLft[i]), ceil(cursorPtsTop[i]), plotWidCss, plotHgtCss);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (select.show && !shouldSetSelect && select.left >= 0 && select.width > 0) {\n\t\t\t\t\tselect.left   *= pctWid;\n\t\t\t\t\tselect.width  *= pctWid;\n\t\t\t\t\tselect.top    *= pctHgt;\n\t\t\t\t\tselect.height *= pctHgt;\n\n\t\t\t\t\tfor (let prop in _hideProps)\n\t\t\t\t\t\tsetStylePx(selectDiv, prop, select[prop]);\n\t\t\t\t}\n\n\t\t\t\t_plotLftCss = plotLftCss;\n\t\t\t\t_plotTopCss = plotTopCss;\n\t\t\t\t_plotWidCss = plotWidCss;\n\t\t\t\t_plotHgtCss = plotHgtCss;\n\t\t\t}\n\n\t\t\tfire(\"setSize\");\n\n\t\t\tshouldSetSize = false;\n\t\t}\n\n\t\tif (fullWidCss > 0 && fullHgtCss > 0) {\n\t\t\tctx.clearRect(0, 0, can.width, can.height);\n\t\t\tfire(\"drawClear\");\n\t\t\tdrawOrder.forEach(fn => fn());\n\t\t\tfire(\"draw\");\n\t\t}\n\n\t\tif (select.show && shouldSetSelect) {\n\t\t\tsetSelect(select);\n\t\t\tshouldSetSelect = false;\n\t\t}\n\n\t\tif (showCursor && shouldSetCursor) {\n\t\t\tupdateCursor(null, true, false);\n\t\t\tshouldSetCursor = false;\n\t\t}\n\n\t\tif (legend.show && legend.live && shouldSetLegend) {\n\t\t\tsetLegend();\n\t\t\tshouldSetLegend = false; // redundant currently\n\t\t}\n\n\t\tif (!ready) {\n\t\t\tready = true;\n\t\t\tself.status = 1;\n\n\t\t\tfire(\"ready\");\n\t\t}\n\n\t\tviaAutoScaleX = false;\n\n\t\tqueuedCommit = false;\n\t}\n\n\tself.redraw = (rebuildPaths, recalcAxes) => {\n\t\tshouldConvergeSize = recalcAxes || false;\n\n\t\tif (rebuildPaths !== false)\n\t\t\t_setScale(xScaleKey, scaleX.min, scaleX.max);\n\t\telse\n\t\t\tcommit();\n\t};\n\n\t// redraw() => setScale('x', scales.x.min, scales.x.max);\n\n\t// explicit, never re-ranged (is this actually true? for x and y)\n\tfunction setScale(key, opts) {\n\t\tlet sc = scales[key];\n\n\t\tif (sc.from == null) {\n\t\t\tif (dataLen == 0) {\n\t\t\t\tlet minMax = sc.range(self, opts.min, opts.max, key);\n\t\t\t\topts.min = minMax[0];\n\t\t\t\topts.max = minMax[1];\n\t\t\t}\n\n\t\t\tif (opts.min > opts.max) {\n\t\t\t\tlet _min = opts.min;\n\t\t\t\topts.min = opts.max;\n\t\t\t\topts.max = _min;\n\t\t\t}\n\n\t\t\tif (dataLen > 1 && opts.min != null && opts.max != null && opts.max - opts.min < 1e-16)\n\t\t\t\treturn;\n\n\t\t\tif (key == xScaleKey) {\n\t\t\t\tif (sc.distr == 2 && dataLen > 0) {\n\t\t\t\t\topts.min = closestIdx(opts.min, data[0]);\n\t\t\t\t\topts.max = closestIdx(opts.max, data[0]);\n\n\t\t\t\t\tif (opts.min == opts.max)\n\t\t\t\t\t\topts.max++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t//\tlog(\"setScale()\", arguments);\n\n\t\t\tpendScales[key] = opts;\n\n\t\t\tshouldSetScales = true;\n\t\t\tcommit();\n\t\t}\n\t}\n\n\tself.setScale = setScale;\n\n//\tINTERACTION\n\n\tlet xCursor;\n\tlet yCursor;\n\tlet vCursor;\n\tlet hCursor;\n\n\t// starting position before cursor.move\n\tlet rawMouseLeft0;\n\tlet rawMouseTop0;\n\n\t// starting position\n\tlet mouseLeft0;\n\tlet mouseTop0;\n\n\t// current position before cursor.move\n\tlet rawMouseLeft1;\n\tlet rawMouseTop1;\n\n\t// current position\n\tlet mouseLeft1;\n\tlet mouseTop1;\n\n\tlet dragging = false;\n\n\tconst drag = cursor.drag;\n\n\tlet dragX = drag.x;\n\tlet dragY = drag.y;\n\n\tif (showCursor) {\n\t\tif (cursor.x)\n\t\t\txCursor = placeDiv(CURSOR_X, over);\n\t\tif (cursor.y)\n\t\t\tyCursor = placeDiv(CURSOR_Y, over);\n\n\t\tif (scaleX.ori == 0) {\n\t\t\tvCursor = xCursor;\n\t\t\thCursor = yCursor;\n\t\t}\n\t\telse {\n\t\t\tvCursor = yCursor;\n\t\t\thCursor = xCursor;\n\t\t}\n\n\t\tmouseLeft1 = cursor.left;\n\t\tmouseTop1 = cursor.top;\n\t}\n\n\tconst select = self.select = assign({\n\t\tshow:   true,\n\t\tover:   true,\n\t\tleft:   0,\n\t\twidth:  0,\n\t\ttop:    0,\n\t\theight: 0,\n\t}, opts.select);\n\n\tconst selectDiv = select.show ? placeDiv(SELECT, select.over ? over : under) : null;\n\n\tfunction setSelect(opts, _fire) {\n\t\tif (select.show) {\n\t\t\tfor (let prop in opts) {\n\t\t\t\tselect[prop] = opts[prop];\n\n\t\t\t\tif (prop in _hideProps)\n\t\t\t\t\tsetStylePx(selectDiv, prop, opts[prop]);\n\t\t\t}\n\n\t\t\t_fire !== false && fire(\"setSelect\");\n\t\t}\n\t}\n\n\tself.setSelect = setSelect;\n\n\tfunction toggleDOM(i) {\n\t\tlet s = series[i];\n\n\t\tif (s.show)\n\t\t\tshowLegend && remClass(legendRows[i], OFF);\n\t\telse {\n\t\t\tshowLegend && addClass(legendRows[i], OFF);\n\n\t\t\tif (showCursor) {\n\t\t\t\tlet pt = cursorOnePt ? cursorPts[0] : cursorPts[i];\n\t\t\t\telTrans(pt, -10, -10, plotWidCss, plotHgtCss);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _setScale(key, min, max) {\n\t\tsetScale(key, {min, max});\n\t}\n\n\tfunction setSeries(i, opts, _fire, _pub) {\n\t//\tlog(\"setSeries()\", arguments);\n\n\t\tif (opts.focus != null)\n\t\t\tsetFocus(i);\n\n\t\tif (opts.show != null) {\n\t\t\tseries.forEach((s, si) => {\n\t\t\t\tif (si > 0 && (i == si || i == null)) {\n\t\t\t\t\ts.show = opts.show;\n\t\t\t\t\ttoggleDOM(si);\n\n\t\t\t\t\tif (mode == 2) {\n\t\t\t\t\t\t_setScale(s.facets[0].scale, null, null);\n\t\t\t\t\t\t_setScale(s.facets[1].scale, null, null);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\t_setScale(s.scale, null, null);\n\n\t\t\t\t\tcommit();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t_fire !== false && fire(\"setSeries\", i, opts);\n\n\t\t_pub && pubSync(\"setSeries\", self, i, opts);\n\t}\n\n\tself.setSeries = setSeries;\n\n\tfunction setBand(bi, opts) {\n\t\tassign(bands[bi], opts);\n\t}\n\n\tfunction addBand(opts, bi) {\n\t\topts.fill = fnOrSelf(opts.fill || null);\n\t\topts.dir = ifNull(opts.dir, -1);\n\t\tbi = bi == null ? bands.length : bi;\n\t\tbands.splice(bi, 0, opts);\n\t}\n\n\tfunction delBand(bi) {\n\t\tif (bi == null)\n\t\t\tbands.length = 0;\n\t\telse\n\t\t\tbands.splice(bi, 1);\n\t}\n\n\tself.addBand = addBand;\n\tself.setBand = setBand;\n\tself.delBand = delBand;\n\n\tfunction setAlpha(i, value) {\n\t\tseries[i].alpha = value;\n\n\t\tif (showCursor && cursorPts[i])\n\t\t\tcursorPts[i].style.opacity = value;\n\n\t\tif (showLegend && legendRows[i])\n\t\t\tlegendRows[i].style.opacity = value;\n\t}\n\n\t// y-distance\n\tlet closestDist;\n\tlet closestSeries;\n\tlet focusedSeries;\n\tconst FOCUS_TRUE  = {focus: true};\n\n\tfunction setFocus(i) {\n\t\tif (i != focusedSeries) {\n\t\t//\tlog(\"setFocus()\", arguments);\n\n\t\t\tlet allFocused = i == null;\n\n\t\t\tlet _setAlpha = focus.alpha != 1;\n\n\t\t\tseries.forEach((s, i2) => {\n\t\t\t\tif (mode == 1 || i2 > 0) {\n\t\t\t\t\tlet isFocused = allFocused || i2 == 0 || i2 == i;\n\t\t\t\t\ts._focus = allFocused ? null : isFocused;\n\t\t\t\t\t_setAlpha && setAlpha(i2, isFocused ? 1 : focus.alpha);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfocusedSeries = i;\n\t\t\t_setAlpha && commit();\n\t\t}\n\t}\n\n\tif (showLegend && cursorFocus) {\n\t\tonMouse(mouseleave, legendTable, e => {\n\t\t\tif (cursor._lock)\n\t\t\t\treturn;\n\n\t\t\tsetCursorEvent(e);\n\n\t\t\tif (focusedSeries != null)\n\t\t\t\tsetSeries(null, FOCUS_TRUE, true, syncOpts.setSeries);\n\t\t});\n\t}\n\n\tfunction posToVal(pos, scale, can) {\n\t\tlet sc = scales[scale];\n\n\t\tif (can)\n\t\t\tpos = pos / pxRatio - (sc.ori == 1 ? plotTopCss : plotLftCss);\n\n\t\tlet dim = plotWidCss;\n\n\t\tif (sc.ori == 1) {\n\t\t\tdim = plotHgtCss;\n\t\t\tpos = dim - pos;\n\t\t}\n\n\t\tif (sc.dir == -1)\n\t\t\tpos = dim - pos;\n\n\t\tlet _min = sc._min,\n\t\t\t_max = sc._max,\n\t\t\tpct = pos / dim;\n\n\t\tlet sv = _min + (_max - _min) * pct;\n\n\t\tlet distr = sc.distr;\n\n\t\treturn (\n\t\t\tdistr == 3 ? pow(10, sv) :\n\t\t\tdistr == 4 ? sinh(sv, sc.asinh) :\n\t\t\tdistr == 100 ? sc.bwd(sv) :\n\t\t\tsv\n\t\t);\n\t}\n\n\tfunction closestIdxFromXpos(pos, can) {\n\t\tlet v = posToVal(pos, xScaleKey, can);\n\t\treturn closestIdx(v, data[0], i0, i1);\n\t}\n\n\tself.valToIdx = val => closestIdx(val, data[0]);\n\tself.posToIdx = closestIdxFromXpos;\n\tself.posToVal = posToVal;\n\tself.valToPos = (val, scale, can) => (\n\t\tscales[scale].ori == 0 ?\n\t\tgetHPos(val, scales[scale],\n\t\t\tcan ? plotWid : plotWidCss,\n\t\t\tcan ? plotLft : 0,\n\t\t) :\n\t\tgetVPos(val, scales[scale],\n\t\t\tcan ? plotHgt : plotHgtCss,\n\t\t\tcan ? plotTop : 0,\n\t\t)\n\t);\n\n\tself.setCursor = (opts, _fire, _pub) => {\n\t\tmouseLeft1 = opts.left;\n\t\tmouseTop1 = opts.top;\n\t//\tassign(cursor, opts);\n\t\tupdateCursor(null, _fire, _pub);\n\t};\n\n\tfunction setSelH(off, dim) {\n\t\tsetStylePx(selectDiv, LEFT,  select.left = off);\n\t\tsetStylePx(selectDiv, WIDTH, select.width = dim);\n\t}\n\n\tfunction setSelV(off, dim) {\n\t\tsetStylePx(selectDiv, TOP,    select.top = off);\n\t\tsetStylePx(selectDiv, HEIGHT, select.height = dim);\n\t}\n\n\tlet setSelX = scaleX.ori == 0 ? setSelH : setSelV;\n\tlet setSelY = scaleX.ori == 1 ? setSelH : setSelV;\n\n\tfunction syncLegend() {\n\t\tif (showLegend && legend.live) {\n\t\t\tfor (let i = mode == 2 ? 1 : 0; i < series.length; i++) {\n\t\t\t\tif (i == 0 && multiValLegend)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tlet vals = legend.values[i];\n\n\t\t\t\tlet j = 0;\n\n\t\t\t\tfor (let k in vals)\n\t\t\t\t\tlegendCells[i][j++].firstChild.nodeValue = vals[k];\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction setLegend(opts, _fire) {\n\t\tif (opts != null) {\n\t\t\tif (opts.idxs) {\n\t\t\t\topts.idxs.forEach((didx, sidx) => {\n\t\t\t\t\tactiveIdxs[sidx] = didx;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (!isUndef(opts.idx))\n\t\t\t\tactiveIdxs.fill(opts.idx);\n\n\t\t\tlegend.idx = activeIdxs[0];\n\t\t}\n\n\t\tif (showLegend && legend.live) {\n\t\t\tfor (let sidx = 0; sidx < series.length; sidx++) {\n\t\t\t\tif (sidx > 0 || mode == 1 && !multiValLegend)\n\t\t\t\t\tsetLegendValues(sidx, activeIdxs[sidx]);\n\t\t\t}\n\n\t\t\tsyncLegend();\n\t\t}\n\n\t\tshouldSetLegend = false;\n\n\t\t_fire !== false && fire(\"setLegend\");\n\t}\n\n\tself.setLegend = setLegend;\n\n\tfunction setLegendValues(sidx, idx) {\n\t\tlet s = series[sidx];\n\t\tlet src = sidx == 0 && xScaleDistr == 2 ? data0 : data[sidx];\n\t\tlet val;\n\n\t\tif (multiValLegend)\n\t\t\tval = s.values(self, sidx, idx) ?? NULL_LEGEND_VALUES;\n\t\telse {\n\t\t\tval = s.value(self, idx == null ? null : src[idx], sidx, idx);\n\t\t\tval = val == null ? NULL_LEGEND_VALUES : {_: val};\n\t\t}\n\n\t\tlegend.values[sidx] = val;\n\t}\n\n\tfunction updateCursor(src, _fire, _pub) {\n\t//\tts == null && log(\"updateCursor()\", arguments);\n\n\t\trawMouseLeft1 = mouseLeft1;\n\t\trawMouseTop1 = mouseTop1;\n\n\t\t[mouseLeft1, mouseTop1] = cursor.move(self, mouseLeft1, mouseTop1);\n\n\t\tcursor.left = mouseLeft1;\n\t\tcursor.top = mouseTop1;\n\n\t\tif (showCursor) {\n\t\t\tvCursor && elTrans(vCursor, round(mouseLeft1), 0, plotWidCss, plotHgtCss);\n\t\t\thCursor && elTrans(hCursor, 0, round(mouseTop1), plotWidCss, plotHgtCss);\n\t\t}\n\n\t\tlet idx;\n\n\t\t// when zooming to an x scale range between datapoints the binary search\n\t\t// for nearest min/max indices results in this condition. cheap hack :D\n\t\tlet noDataInRange = i0 > i1; // works for mode 1 only\n\n\t\tclosestDist = inf;\n\t\tclosestSeries = null;\n\n\t\t// TODO: extract\n\t\tlet xDim = scaleX.ori == 0 ? plotWidCss : plotHgtCss;\n\t\tlet yDim = scaleX.ori == 1 ? plotWidCss : plotHgtCss;\n\n\t\t// if cursor hidden, hide points & clear legend vals\n\t\tif (mouseLeft1 < 0 || dataLen == 0 || noDataInRange) {\n\t\t\tidx = cursor.idx = null;\n\n\t\t\tfor (let i = 0; i < series.length; i++) {\n\t\t\t\tlet pt = cursorPts[i];\n\t\t\t\tpt != null && elTrans(pt, -10, -10, plotWidCss, plotHgtCss);\n\t\t\t}\n\n\t\t\tif (cursorFocus)\n\t\t\t\tsetSeries(null, FOCUS_TRUE, true, src == null && syncOpts.setSeries);\n\n\t\t\tif (legend.live) {\n\t\t\t\tactiveIdxs.fill(idx);\n\t\t\t\tshouldSetLegend = true;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t//\tlet pctY = 1 - (y / rect.height);\n\n\t\t\tlet mouseXPos, valAtPosX, xPos;\n\n\t\t\tif (mode == 1) {\n\t\t\t\tmouseXPos = scaleX.ori == 0 ? mouseLeft1 : mouseTop1;\n\t\t\t\tvalAtPosX = posToVal(mouseXPos, xScaleKey);\n\t\t\t\tidx = cursor.idx = closestIdx(valAtPosX, data[0], i0, i1);\n\t\t\t\txPos = valToPosX(data[0][idx], scaleX, xDim, 0);\n\t\t\t}\n\n\t\t\t// closest pt values\n\t\t\tlet _ptLft = -10;\n\t\t\tlet _ptTop = -10;\n\t\t\tlet _ptWid = 0;\n\t\t\tlet _ptHgt = 0;\n\t\t\tlet _centered = true;\n\t\t\tlet _ptFill = '';\n\t\t\tlet _ptStroke = '';\n\n\t\t\tfor (let i = mode == 2 ? 1 : 0; i < series.length; i++) {\n\t\t\t\tlet s = series[i];\n\n\t\t\t\tlet idx1  = activeIdxs[i];\n\t\t\t\tlet yVal1 = idx1 == null ? null : (mode == 1 ? data[i][idx1] : data[i][1][idx1]);\n\n\t\t\t\tlet idx2  = cursor.dataIdx(self, i, idx, valAtPosX);\n\t\t\t\tlet yVal2 = idx2 == null ? null : (mode == 1 ? data[i][idx2] : data[i][1][idx2]);\n\n\t\t\t\tshouldSetLegend = shouldSetLegend || yVal2 != yVal1 || idx2 != idx1;\n\n\t\t\t\tactiveIdxs[i] = idx2;\n\n\t\t\t\tlet xPos2 = idx2 == idx ? xPos : valToPosX(mode == 1 ? data[0][idx2] : data[i][0][idx2], scaleX, xDim, 0);\n\n\t\t\t\tif (i > 0 && s.show) {\n\t\t\t\t\t// this doesnt really work for state timeline, heatmap, status history (where the value maps to color, not y coords)\n\t\t\t\t\tlet yPos = yVal2 == null ? -10 : valToPosY(yVal2, mode == 1 ? scales[s.scale] : scales[s.facets[1].scale], yDim, 0);\n\n\t\t\t\t\tif (cursorFocus && yVal2 != null) {\n\t\t\t\t\t\tlet mouseYPos = scaleX.ori == 1 ? mouseLeft1 : mouseTop1;\n\t\t\t\t\t\tlet dist = abs(focus.dist(self, i, idx2, yPos, mouseYPos));\n\n\t\t\t\t\t\tif (dist < closestDist) {\n\t\t\t\t\t\t\tlet bias = focus.bias;\n\n\t\t\t\t\t\t\tif (bias != 0) {\n\t\t\t\t\t\t\t\tlet mouseYVal = posToVal(mouseYPos, s.scale);\n\n\t\t\t\t\t\t\t\tlet seriesYValSign = yVal2     >= 0 ? 1 : -1;\n\t\t\t\t\t\t\t\tlet mouseYValSign  = mouseYVal >= 0 ? 1 : -1;\n\n\t\t\t\t\t\t\t\t// with a focus bias, we will never cross zero when prox testing\n\t\t\t\t\t\t\t\t// it's either closest towards zero, or closest away from zero\n\t\t\t\t\t\t\t\tif (mouseYValSign == seriesYValSign && (\n\t\t\t\t\t\t\t\t\tmouseYValSign == 1 ?\n\t\t\t\t\t\t\t\t\t\t(bias == 1 ? yVal2 >= mouseYVal : yVal2 <= mouseYVal) :  // >= 0\n\t\t\t\t\t\t\t\t\t\t(bias == 1 ? yVal2 <= mouseYVal : yVal2 >= mouseYVal)    //  < 0\n\t\t\t\t\t\t\t\t)) {\n\t\t\t\t\t\t\t\t\tclosestDist = dist;\n\t\t\t\t\t\t\t\t\tclosestSeries = i;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tclosestDist = dist;\n\t\t\t\t\t\t\t\tclosestSeries = i;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (shouldSetLegend || cursorOnePt) {\n\t\t\t\t\t\tlet hPos, vPos;\n\n\t\t\t\t\t\tif (scaleX.ori == 0) {\n\t\t\t\t\t\t\thPos = xPos2;\n\t\t\t\t\t\t\tvPos = yPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\thPos = yPos;\n\t\t\t\t\t\t\tvPos = xPos2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet ptWid, ptHgt, ptLft, ptTop,\n\t\t\t\t\t\t\tptStroke, ptFill,\n\t\t\t\t\t\t\tcentered = true,\n\t\t\t\t\t\t\tgetBBox = points.bbox;\n\n\t\t\t\t\t\tif (getBBox != null) {\n\t\t\t\t\t\t\tcentered = false;\n\n\t\t\t\t\t\t\tlet bbox = getBBox(self, i);\n\n\t\t\t\t\t\t\tptLft = bbox.left;\n\t\t\t\t\t\t\tptTop = bbox.top;\n\t\t\t\t\t\t\tptWid = bbox.width;\n\t\t\t\t\t\t\tptHgt = bbox.height;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tptLft = hPos;\n\t\t\t\t\t\t\tptTop = vPos;\n\t\t\t\t\t\t\tptWid = ptHgt = points.size(self, i);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tptFill = points.fill(self, i);\n\t\t\t\t\t\tptStroke = points.stroke(self, i);\n\n\t\t\t\t\t\tif (cursorOnePt) {\n\t\t\t\t\t\t\tif (i == closestSeries && closestDist <= focus.prox) {\n\t\t\t\t\t\t\t\t_ptLft = ptLft;\n\t\t\t\t\t\t\t\t_ptTop = ptTop;\n\t\t\t\t\t\t\t\t_ptWid = ptWid;\n\t\t\t\t\t\t\t\t_ptHgt = ptHgt;\n\t\t\t\t\t\t\t\t_centered = centered;\n\t\t\t\t\t\t\t\t_ptFill = ptFill;\n\t\t\t\t\t\t\t\t_ptStroke = ptStroke;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tlet pt = cursorPts[i];\n\n\t\t\t\t\t\t\tif (pt != null) {\n\t\t\t\t\t\t\t\tcursorPtsLft[i] = ptLft;\n\t\t\t\t\t\t\t\tcursorPtsTop[i] = ptTop;\n\n\t\t\t\t\t\t\t\telSize(pt, ptWid, ptHgt, centered);\n\t\t\t\t\t\t\t\telColor(pt, ptFill, ptStroke);\n\t\t\t\t\t\t\t\telTrans(pt, ceil(ptLft), ceil(ptTop), plotWidCss, plotHgtCss);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// if only using single hover point (at cursorPts[0])\n\t\t\t// we have trigger styling at last visible series (once closestSeries is settled)\n\t\t\tif (cursorOnePt) {\n\t\t\t\t// some of this logic is similar to series focus below, since it matches the behavior by design\n\n\t\t\t\tlet p = focus.prox;\n\n\t\t\t\tlet focusChanged = focusedSeries == null ? closestDist <= p : (closestDist > p || closestSeries != focusedSeries);\n\n\t\t\t\tif (shouldSetLegend || focusChanged) {\n\t\t\t\t\tlet pt = cursorPts[0];\n\n\t\t\t\t\tcursorPtsLft[0] = _ptLft;\n\t\t\t\t\tcursorPtsTop[0] = _ptTop;\n\n\t\t\t\t\telSize(pt, _ptWid, _ptHgt, _centered);\n\t\t\t\t\telColor(pt, _ptFill, _ptStroke);\n\t\t\t\t\telTrans(pt, ceil(_ptLft), ceil(_ptTop), plotWidCss, plotHgtCss);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// nit: cursor.drag.setSelect is assumed always true\n\t\tif (select.show && dragging) {\n\t\t\tif (src != null) {\n\t\t\t\tlet [xKey, yKey] = syncOpts.scales;\n\t\t\t\tlet [matchXKeys, matchYKeys] = syncOpts.match;\n\t\t\t\tlet [xKeySrc, yKeySrc] = src.cursor.sync.scales;\n\n\t\t\t\t// match the dragX/dragY implicitness/explicitness of src\n\t\t\t\tlet sdrag = src.cursor.drag;\n\t\t\t\tdragX = sdrag._x;\n\t\t\t\tdragY = sdrag._y;\n\n\t\t\t\tif (dragX || dragY) {\n\t\t\t\t\tlet { left, top, width, height } = src.select;\n\n\t\t\t\t\tlet sori = src.scales[xKeySrc].ori;\n\t\t\t\t\tlet sPosToVal = src.posToVal;\n\n\t\t\t\t\tlet sOff, sDim, sc, a, b;\n\n\t\t\t\t\tlet matchingX = xKey != null && matchXKeys(xKey, xKeySrc);\n\t\t\t\t\tlet matchingY = yKey != null && matchYKeys(yKey, yKeySrc);\n\n\t\t\t\t\tif (matchingX && dragX) {\n\t\t\t\t\t\tif (sori == 0) {\n\t\t\t\t\t\t\tsOff = left;\n\t\t\t\t\t\t\tsDim = width;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tsOff = top;\n\t\t\t\t\t\t\tsDim = height;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsc = scales[xKey];\n\n\t\t\t\t\t\ta = valToPosX(sPosToVal(sOff, xKeySrc),        sc, xDim, 0);\n\t\t\t\t\t\tb = valToPosX(sPosToVal(sOff + sDim, xKeySrc), sc, xDim, 0);\n\n\t\t\t\t\t\tsetSelX(min(a,b), abs(b-a));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tsetSelX(0, xDim);\n\n\t\t\t\t\tif (matchingY && dragY) {\n\t\t\t\t\t\tif (sori == 1) {\n\t\t\t\t\t\t\tsOff = left;\n\t\t\t\t\t\t\tsDim = width;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tsOff = top;\n\t\t\t\t\t\t\tsDim = height;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsc = scales[yKey];\n\n\t\t\t\t\t\ta = valToPosY(sPosToVal(sOff, yKeySrc),        sc, yDim, 0);\n\t\t\t\t\t\tb = valToPosY(sPosToVal(sOff + sDim, yKeySrc), sc, yDim, 0);\n\n\t\t\t\t\t\tsetSelY(min(a,b), abs(b-a));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tsetSelY(0, yDim);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\thideSelect();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet rawDX = abs(rawMouseLeft1 - rawMouseLeft0);\n\t\t\t\tlet rawDY = abs(rawMouseTop1 - rawMouseTop0);\n\n\t\t\t\tif (scaleX.ori == 1) {\n\t\t\t\t\tlet _rawDX = rawDX;\n\t\t\t\t\trawDX = rawDY;\n\t\t\t\t\trawDY = _rawDX;\n\t\t\t\t}\n\n\t\t\t\tdragX = drag.x && rawDX >= drag.dist;\n\t\t\t\tdragY = drag.y && rawDY >= drag.dist;\n\n\t\t\t\tlet uni = drag.uni;\n\n\t\t\t\tif (uni != null) {\n\t\t\t\t\t// only calc drag status if they pass the dist thresh\n\t\t\t\t\tif (dragX && dragY) {\n\t\t\t\t\t\tdragX = rawDX >= uni;\n\t\t\t\t\t\tdragY = rawDY >= uni;\n\n\t\t\t\t\t\t// force unidirectionality when both are under uni limit\n\t\t\t\t\t\tif (!dragX && !dragY) {\n\t\t\t\t\t\t\tif (rawDY > rawDX)\n\t\t\t\t\t\t\t\tdragY = true;\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tdragX = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (drag.x && drag.y && (dragX || dragY))\n\t\t\t\t\t// if omni with no uni then both dragX / dragY should be true if either is true\n\t\t\t\t\tdragX = dragY = true;\n\n\t\t\t\tlet p0, p1;\n\n\t\t\t\tif (dragX) {\n\t\t\t\t\tif (scaleX.ori == 0) {\n\t\t\t\t\t\tp0 = mouseLeft0;\n\t\t\t\t\t\tp1 = mouseLeft1;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp0 = mouseTop0;\n\t\t\t\t\t\tp1 = mouseTop1;\n\t\t\t\t\t}\n\n\t\t\t\t\tsetSelX(min(p0, p1), abs(p1 - p0));\n\n\t\t\t\t\tif (!dragY)\n\t\t\t\t\t\tsetSelY(0, yDim);\n\t\t\t\t}\n\n\t\t\t\tif (dragY) {\n\t\t\t\t\tif (scaleX.ori == 1) {\n\t\t\t\t\t\tp0 = mouseLeft0;\n\t\t\t\t\t\tp1 = mouseLeft1;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp0 = mouseTop0;\n\t\t\t\t\t\tp1 = mouseTop1;\n\t\t\t\t\t}\n\n\t\t\t\t\tsetSelY(min(p0, p1), abs(p1 - p0));\n\n\t\t\t\t\tif (!dragX)\n\t\t\t\t\t\tsetSelX(0, xDim);\n\t\t\t\t}\n\n\t\t\t\t// the drag didn't pass the dist requirement\n\t\t\t\tif (!dragX && !dragY) {\n\t\t\t\t\tsetSelX(0, 0);\n\t\t\t\t\tsetSelY(0, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdrag._x = dragX;\n\t\tdrag._y = dragY;\n\n\t\tif (src == null) {\n\t\t\tif (_pub) {\n\t\t\t\tif (syncKey != null) {\n\t\t\t\t\tlet [xSyncKey, ySyncKey] = syncOpts.scales;\n\n\t\t\t\t\tsyncOpts.values[0] = xSyncKey != null ? posToVal(scaleX.ori == 0 ? mouseLeft1 : mouseTop1, xSyncKey) : null;\n\t\t\t\t\tsyncOpts.values[1] = ySyncKey != null ? posToVal(scaleX.ori == 1 ? mouseLeft1 : mouseTop1, ySyncKey) : null;\n\t\t\t\t}\n\n\t\t\t\tpubSync(mousemove, self, mouseLeft1, mouseTop1, plotWidCss, plotHgtCss, idx);\n\t\t\t}\n\n\t\t\tif (cursorFocus) {\n\t\t\t\tlet shouldPub = _pub && syncOpts.setSeries;\n\t\t\t\tlet p = focus.prox;\n\n\t\t\t\tif (focusedSeries == null) {\n\t\t\t\t\tif (closestDist <= p)\n\t\t\t\t\t\tsetSeries(closestSeries, FOCUS_TRUE, true, shouldPub);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (closestDist > p)\n\t\t\t\t\t\tsetSeries(null, FOCUS_TRUE, true, shouldPub);\n\t\t\t\t\telse if (closestSeries != focusedSeries)\n\t\t\t\t\t\tsetSeries(closestSeries, FOCUS_TRUE, true, shouldPub);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (shouldSetLegend) {\n\t\t\tlegend.idx = idx;\n\t\t\tsetLegend();\n\t\t}\n\n\t\t_fire !== false && fire(\"setCursor\");\n\t}\n\n\tlet rect = null;\n\n\tObject.defineProperty(self, 'rect', {\n\t\tget() {\n\t\t\tif (rect == null)\n\t\t\t\tsyncRect(false);\n\n\t\t\treturn rect;\n\t\t},\n\t});\n\n\tfunction syncRect(defer = false) {\n\t\tif (defer)\n\t\t\trect = null;\n\t\telse {\n\t\t\trect = over.getBoundingClientRect();\n\t\t\tfire(\"syncRect\", rect);\n\t\t}\n\t}\n\n\tfunction mouseMove(e, src, _l, _t, _w, _h, _i) {\n\t\tif (cursor._lock)\n\t\t\treturn;\n\n\t\t// Chrome on Windows has a bug which triggers a stray mousemove event after an initial mousedown event\n\t\t// when clicking into a plot as part of re-focusing the browser window.\n\t\t// we gotta ignore it to avoid triggering a phantom drag / setSelect\n\t\t// However, on touch-only devices Chrome-based browsers trigger a 0-distance mousemove before mousedown\n\t\t// so we don't ignore it when mousedown has set the dragging flag\n\t\tif (dragging && e != null && e.movementX == 0 && e.movementY == 0)\n\t\t\treturn;\n\n\t\tcacheMouse(e, src, _l, _t, _w, _h, _i, false, e != null);\n\n\t\tif (e != null)\n\t\t\tupdateCursor(null, true, true);\n\t\telse\n\t\t\tupdateCursor(src, true, false);\n\t}\n\n\tfunction cacheMouse(e, src, _l, _t, _w, _h, _i, initial, snap) {\n\t\tif (rect == null)\n\t\t\tsyncRect(false);\n\n\t\tsetCursorEvent(e);\n\n\t\tif (e != null) {\n\t\t\t_l = e.clientX - rect.left;\n\t\t\t_t = e.clientY - rect.top;\n\t\t}\n\t\telse {\n\t\t\tif (_l < 0 || _t < 0) {\n\t\t\t\tmouseLeft1 = -10;\n\t\t\t\tmouseTop1 = -10;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet [xKey, yKey] = syncOpts.scales;\n\n\t\t\tlet syncOptsSrc = src.cursor.sync;\n\t\t\tlet [xValSrc, yValSrc] = syncOptsSrc.values;\n\t\t\tlet [xKeySrc, yKeySrc] = syncOptsSrc.scales;\n\t\t\tlet [matchXKeys, matchYKeys] = syncOpts.match;\n\n\t\t\tlet rotSrc = src.axes[0].side % 2 == 1;\n\n\t\t\tlet xDim = scaleX.ori == 0 ? plotWidCss : plotHgtCss,\n\t\t\t\tyDim = scaleX.ori == 1 ? plotWidCss : plotHgtCss,\n\t\t\t\t_xDim = rotSrc ? _h : _w,\n\t\t\t\t_yDim = rotSrc ? _w : _h,\n\t\t\t\t_xPos = rotSrc ? _t : _l,\n\t\t\t\t_yPos = rotSrc ? _l : _t;\n\n\t\t\tif (xKeySrc != null)\n\t\t\t\t_l = matchXKeys(xKey, xKeySrc) ? getPos(xValSrc, scales[xKey], xDim, 0) : -10;\n\t\t\telse\n\t\t\t\t_l = xDim * (_xPos/_xDim);\n\n\t\t\tif (yKeySrc != null)\n\t\t\t\t_t = matchYKeys(yKey, yKeySrc) ? getPos(yValSrc, scales[yKey], yDim, 0) : -10;\n\t\t\telse\n\t\t\t\t_t = yDim * (_yPos/_yDim);\n\n\t\t\tif (scaleX.ori == 1) {\n\t\t\t\tlet __l = _l;\n\t\t\t\t_l = _t;\n\t\t\t\t_t = __l;\n\t\t\t}\n\t\t}\n\n\t\tif (snap) {\n\t\t\tif (_l <= 1 || _l >= plotWidCss - 1)\n\t\t\t\t_l = incrRound(_l, plotWidCss);\n\n\t\t\tif (_t <= 1 || _t >= plotHgtCss - 1)\n\t\t\t\t_t = incrRound(_t, plotHgtCss);\n\t\t}\n\n\t\tif (initial) {\n\t\t\trawMouseLeft0 = _l;\n\t\t\trawMouseTop0 = _t;\n\n\t\t\t[mouseLeft0, mouseTop0] = cursor.move(self, _l, _t);\n\t\t}\n\t\telse {\n\t\t\tmouseLeft1 = _l;\n\t\t\tmouseTop1 = _t;\n\t\t}\n\t}\n\n\tconst _hideProps = {\n\t\twidth: 0,\n\t\theight: 0,\n\t\tleft: 0,\n\t\ttop: 0,\n\t};\n\n\tfunction hideSelect() {\n\t\tsetSelect(_hideProps, false);\n\t}\n\n\tlet downSelectLeft;\n\tlet downSelectTop;\n\tlet downSelectWidth;\n\tlet downSelectHeight;\n\n\tfunction mouseDown(e, src, _l, _t, _w, _h, _i) {\n\t\tdragging = true;\n\t\tdragX = dragY = drag._x = drag._y = false;\n\n\t\tcacheMouse(e, src, _l, _t, _w, _h, _i, true, false);\n\n\t\tif (e != null) {\n\t\t\tonMouse(mouseup, doc, mouseUp, false);\n\t\t\tpubSync(mousedown, self, mouseLeft0, mouseTop0, plotWidCss, plotHgtCss, null);\n\t\t}\n\n\t\tlet { left, top, width, height } = select;\n\n\t\tdownSelectLeft   = left;\n\t\tdownSelectTop    = top;\n\t\tdownSelectWidth  = width;\n\t\tdownSelectHeight = height;\n\n\t//\thideSelect();\n\t}\n\n\tfunction mouseUp(e, src, _l, _t, _w, _h, _i) {\n\t\tdragging = drag._x = drag._y = false;\n\n\t\tcacheMouse(e, src, _l, _t, _w, _h, _i, false, true);\n\n\t\tlet { left, top, width, height } = select;\n\n\t\tlet hasSelect = width > 0 || height > 0;\n\t\tlet chgSelect = (\n\t\t\tdownSelectLeft   != left   ||\n\t\t\tdownSelectTop    != top    ||\n\t\t\tdownSelectWidth  != width  ||\n\t\t\tdownSelectHeight != height\n\t\t);\n\n\t\thasSelect && chgSelect && setSelect(select);\n\n\t\tif (drag.setScale && hasSelect && chgSelect) {\n\t\t//\tif (syncKey != null) {\n\t\t//\t\tdragX = drag.x;\n\t\t//\t\tdragY = drag.y;\n\t\t//\t}\n\n\t\t\tlet xOff = left,\n\t\t\t\txDim = width,\n\t\t\t\tyOff = top,\n\t\t\t\tyDim = height;\n\n\t\t\tif (scaleX.ori == 1) {\n\t\t\t\txOff = top,\n\t\t\t\txDim = height,\n\t\t\t\tyOff = left,\n\t\t\t\tyDim = width;\n\t\t\t}\n\n\t\t\tif (dragX) {\n\t\t\t\t_setScale(xScaleKey,\n\t\t\t\t\tposToVal(xOff, xScaleKey),\n\t\t\t\t\tposToVal(xOff + xDim, xScaleKey)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (dragY) {\n\t\t\t\tfor (let k in scales) {\n\t\t\t\t\tlet sc = scales[k];\n\n\t\t\t\t\tif (k != xScaleKey && sc.from == null && sc.min != inf) {\n\t\t\t\t\t\t_setScale(k,\n\t\t\t\t\t\t\tposToVal(yOff + yDim, k),\n\t\t\t\t\t\t\tposToVal(yOff, k)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thideSelect();\n\t\t}\n\t\telse if (cursor.lock) {\n\t\t\tcursor._lock = !cursor._lock;\n\t\t\tupdateCursor(null, true, false);\n\t\t}\n\n\t\tif (e != null) {\n\t\t\toffMouse(mouseup, doc);\n\t\t\tpubSync(mouseup, self, mouseLeft1, mouseTop1, plotWidCss, plotHgtCss, null);\n\t\t}\n\t}\n\n\tfunction mouseLeave(e, src, _l, _t, _w, _h, _i) {\n\t\tif (cursor._lock)\n\t\t\treturn;\n\n\t\tsetCursorEvent(e);\n\n\t\tlet _dragging = dragging;\n\n\t\tif (dragging) {\n\t\t\t// handle case when mousemove aren't fired all the way to edges by browser\n\t\t\tlet snapH = true;\n\t\t\tlet snapV = true;\n\t\t\tlet snapProx = 10;\n\n\t\t\tlet dragH, dragV;\n\n\t\t\tif (scaleX.ori == 0) {\n\t\t\t\tdragH = dragX;\n\t\t\t\tdragV = dragY;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdragH = dragY;\n\t\t\t\tdragV = dragX;\n\t\t\t}\n\n\t\t\tif (dragH && dragV) {\n\t\t\t\t// maybe omni corner snap\n\t\t\t\tsnapH = mouseLeft1 <= snapProx || mouseLeft1 >= plotWidCss - snapProx;\n\t\t\t\tsnapV = mouseTop1  <= snapProx || mouseTop1  >= plotHgtCss - snapProx;\n\t\t\t}\n\n\t\t\tif (dragH && snapH)\n\t\t\t\tmouseLeft1 = mouseLeft1 < mouseLeft0 ? 0 : plotWidCss;\n\n\t\t\tif (dragV && snapV)\n\t\t\t\tmouseTop1 = mouseTop1 < mouseTop0 ? 0 : plotHgtCss;\n\n\t\t\tupdateCursor(null, true, true);\n\n\t\t\tdragging = false;\n\t\t}\n\n\t\tmouseLeft1 = -10;\n\t\tmouseTop1 = -10;\n\n\t\t// passing a non-null timestamp to force sync/mousemove event\n\t\tupdateCursor(null, true, true);\n\n\t\tif (_dragging)\n\t\t\tdragging = _dragging;\n\t}\n\n\tfunction dblClick(e, src, _l, _t, _w, _h, _i) {\n\t\tif (cursor._lock)\n\t\t\treturn;\n\n\t\tsetCursorEvent(e);\n\n\t\tautoScaleX();\n\n\t\thideSelect();\n\n\t\tif (e != null)\n\t\t\tpubSync(dblclick, self, mouseLeft1, mouseTop1, plotWidCss, plotHgtCss, null);\n\t}\n\n\tfunction syncPxRatio() {\n\t\taxes.forEach(syncFontSize);\n\t\t_setSize(self.width, self.height, true);\n\t}\n\n\ton(dppxchange, win, syncPxRatio);\n\n\t// internal pub/sub\n\tconst events = {};\n\n\tevents.mousedown = mouseDown;\n\tevents.mousemove = mouseMove;\n\tevents.mouseup = mouseUp;\n\tevents.dblclick = dblClick;\n\tevents[\"setSeries\"] = (e, src, idx, opts) => {\n\t\tlet seriesIdxMatcher = syncOpts.match[2];\n\t\tidx = seriesIdxMatcher(self, src, idx);\n\t\tidx != -1 && setSeries(idx, opts, true, false);\n\t};\n\n\tif (showCursor) {\n\t\tonMouse(mousedown,  over, mouseDown);\n\t\tonMouse(mousemove,  over, mouseMove);\n\t\tonMouse(mouseenter, over, e => {\n\t\t\tsetCursorEvent(e);\n\t\t\tsyncRect(false);\n\t\t});\n\t\tonMouse(mouseleave, over, mouseLeave);\n\n\t\tonMouse(dblclick, over, dblClick);\n\n\t\tcursorPlots.add(self);\n\n\t\tself.syncRect = syncRect;\n\t}\n\n\t// external on/off\n\tconst hooks = self.hooks = opts.hooks || {};\n\n\tfunction fire(evName, a1, a2) {\n\t\tif (deferHooks)\n\t\t\thooksQueue.push([evName, a1, a2]);\n\t\telse {\n\t\t\tif (evName in hooks) {\n\t\t\t\thooks[evName].forEach(fn => {\n\t\t\t\t\tfn.call(null, self, a1, a2);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t(opts.plugins || []).forEach(p => {\n\t\tfor (let evName in p.hooks)\n\t\t\thooks[evName] = (hooks[evName] || []).concat(p.hooks[evName]);\n\t});\n\n\tconst seriesIdxMatcher = (self, src, srcSeriesIdx) => srcSeriesIdx;\n\n\tconst syncOpts = assign({\n\t\tkey: null,\n\t\tsetSeries: false,\n\t\tfilters: {\n\t\t\tpub: retTrue,\n\t\t\tsub: retTrue,\n\t\t},\n\t\tscales: [xScaleKey, series[1] ? series[1].scale : null],\n\t\tmatch: [retEq, retEq, seriesIdxMatcher],\n\t\tvalues: [null, null],\n\t}, cursor.sync);\n\n\tif (syncOpts.match.length == 2)\n\t\tsyncOpts.match.push(seriesIdxMatcher);\n\n\tcursor.sync = syncOpts;\n\n\tconst syncKey = syncOpts.key;\n\n\tconst sync = _sync(syncKey);\n\n\tfunction pubSync(type, src, x, y, w, h, i) {\n\t\tif (syncOpts.filters.pub(type, src, x, y, w, h, i))\n\t\t\tsync.pub(type, src, x, y, w, h, i);\n\t}\n\n\tsync.sub(self);\n\n\tfunction pub(type, src, x, y, w, h, i) {\n\t\tif (syncOpts.filters.sub(type, src, x, y, w, h, i))\n\t\t\tevents[type](null, src, x, y, w, h, i);\n\t}\n\n\tself.pub = pub;\n\n\tfunction destroy() {\n\t\tsync.unsub(self);\n\t\tcursorPlots.delete(self);\n\t\tmouseListeners.clear();\n\t\toff(dppxchange, win, syncPxRatio);\n\t\troot.remove();\n\t\tlegendTable?.remove(); // in case mounted outside of root\n\t\tfire(\"destroy\");\n\t}\n\n\tself.destroy = destroy;\n\n\tfunction _init() {\n\t\tfire(\"init\", opts, data);\n\n\t\tsetData(data || opts.data, false);\n\n\t\tif (pendScales[xScaleKey])\n\t\t\tsetScale(xScaleKey, pendScales[xScaleKey]);\n\t\telse\n\t\t\tautoScaleX();\n\n\t\tshouldSetSelect = select.show && (select.width > 0 || select.height > 0);\n\t\tshouldSetCursor = shouldSetLegend = true;\n\n\t\t_setSize(opts.width, opts.height);\n\t}\n\n\tseries.forEach(initSeries);\n\n\taxes.forEach(initAxis);\n\n\tif (then) {\n\t\tif (then instanceof HTMLElement) {\n\t\t\tthen.appendChild(root);\n\t\t\t_init();\n\t\t}\n\t\telse\n\t\t\tthen(self, _init);\n\t}\n\telse\n\t\t_init();\n\n\treturn self;\n}\n\nuPlot.assign = assign;\nuPlot.fmtNum = fmtNum;\nuPlot.rangeNum = rangeNum;\nuPlot.rangeLog = rangeLog;\nuPlot.rangeAsinh = rangeAsinh;\nuPlot.orient   = orient;\nuPlot.pxRatio = pxRatio;\n\n{\n\tuPlot.join = join;\n}\n\n{\n\tuPlot.fmtDate = fmtDate;\n\tuPlot.tzDate  = tzDate;\n}\n\nuPlot.sync = _sync;\n\n{\n\tuPlot.addGap = addGap;\n\tuPlot.clipGaps = clipGaps;\n\n\tlet paths = uPlot.paths = {\n\t\tpoints,\n\t};\n\n\t(paths.linear  = linear);\n\t(paths.stepped = stepped);\n\t(paths.bars    = bars);\n\t(paths.spline  = monotoneCubic);\n}\n\nexport { uPlot as default };\n", "import uPlot, { Options, Axis, AlignedData } from \"../../lib/uPlot.js\";\nimport van from \"../../lib/van-1.5.2.js\"\nimport { Config, Lap, Page, Player, RssiData, RssiEvent } from \"../../SimpleFpvTimer.js\";\nimport { $, enumToMap, format_ms } from \"../../utils.js\";\n//import uPlot  from \"../../lib/uPlot.js\"\n\nconst {button, div, pre, select, option} = van.tags\n\nclass RssiQ {\n    freq: number;\n    data: Array<RssiData>;\n\n    uplot_index: number;\n\n    constructor(freq: number, data?: RssiData) {\n        this.freq = freq;\n        this.data = new Array();\n        if (data)\n            this.data.push(data);\n    }\n\n    public addData(data: RssiData) {\n        this.data.push(data);\n    }\n\n    static fromJSON(json: any) {\n        if (json.freq) {\n            var rssiQ = new RssiQ(json.freq);\n            if (json.data){\n                for (let i = 0; i < json.data.length; i++) {\n                    rssiQ.addData(json.data[i]);\n               }\n            }\n            return rssiQ;\n        }\n        return null;\n    }\n\n    public expire(time: number) {\n        while(this.data.length > 0 && this.data[0].t < time) {\n            this.data.shift();\n        }\n    }\n\n    public expireOlderThen(seconds: number) {\n        const time = Date.now() - (seconds * 1000);\n        this.expire(time);\n    }\n}\n\n\nfunction svg(svg_path: string) {\n    const svg = document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");\n    svg.setAttribute(\"width\", \"16\");\n    svg.setAttribute(\"height\", \"16\");\n    svg.setAttribute(\"viewBox\", \"0 0 16 16\");\n    svg.classList.add(\"bi\");\n    svg.classList.add(\"bi-pause\");\n    const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    path.setAttribute(\"d\", svg_path);\n    svg.appendChild(path);\n    return svg;\n}\n\nfunction svg_pause() {\n    return svg(\"M6 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5m4 0a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5\");\n}\n\nfunction svg_play() {\n    return svg(\"M10.804 8 5 4.633v6.734zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696z\");\n}\n\nexport class SignalPage extends Page {\n    root: HTMLElement;\n    uplot: uPlot;\n    dataq: Array<RssiQ>;\n    max_seconds: number; /* Number of seconds to display */\n    show_raw_rssi: boolean;\n    max_storage_seconds: number; /* number of seconds in dataq */\n    date_offset: number;\n    cfg: Config;\n    update_uplot: boolean;\n    players: Player[];\n\n\n    getSeriesColor(i: number) {\n        switch(i%8) {\n            case 0: return \"#03fce3\";\n            case 1: return \"#fcba03\";\n            case 2: return \"#fc037b\";\n            case 3: return \"#fc3103\";\n            case 4: return \"#00ff00\";\n            case 5: return \"#0000ff\";\n            case 6: return \"#ff00ff\";\n            case 7: return \"#124511\";\n            default:\n            return \"red\";\n        }\n    }\n\n    updateGraph(data): uPlot {\n        if (this.uplot) {\n            this.uplot.setData(data);\n            this.uplot.setSize({width: this.getDom().offsetWidth, height: 600});\n            return this.uplot;\n        }\n    }\n\n    getGraph(): uPlot {\n        if (this.uplot)\n            return this.uplot;\n\n        const opts: Options = {\n            title: \"\",\n            width: 1048,\n            height: 600,\n            scales: {\n                x: {\n                    //time: false,\n                    time: true,\n                },\n                y: {\n                    auto: false,\n                    range: [0, 1300],\n                },\n            },\n            series: [\n                {\n                    label: \"time:\",\n                },\n            {\n                stroke: \"#70dba4\",\n                label: \"peak\",\n            },\n            {\n                stroke: \"#dbc270\",\n                label: \"enter\",\n            },\n            {\n                stroke: \"#3af51d\",\n                label: \"leave\",\n            }\n            ],\n            axes: [\n                {\n                    label: \"X Axis Label\",\n                    labelSize: 20,\n                },\n                {\n                    space: 50,\n                    side: 1,\n                    label: \"RSSI\",\n                    labelGap: 8,\n                    labelSize: 8 + 12 + 8,\n                    stroke: \"grey\",\n                }\n            ],\n        };\n\n        //for (let i = 0; i < this.dataq.length; i++) {\n        //    const element = this.dataq[i];\n        //    opts.series[i+1] = {\n        //        label: `freq: ${element.freq}`,\n        //        stroke: this.getSeriesColor(i)\n        //    }\n        //}\n\n        this.uplot = new uPlot(opts, [\n            [0,1,3],\n            [1,1,1],\n            [1,1,1],\n            [1,1,1],\n        ] , this.getDom());\n\n        return this.uplot;\n    }\n\n    getDom(): HTMLElement {\n        if (!this.root) {\n            this.root = div(\n                div({class: \"input-group flex-nowrap\"},\n                    button({class: \"btn btn-secondary\",\n                        id: \"btn_signal_pause\",\n                        type: \"button\",\n                        onclick: () => {\n                            this.update_uplot = ! this.update_uplot;\n                            if (this.update_uplot) {\n                                this.onNextValues();\n                                $(\"btn_signal_pause\").replaceChildren(svg_pause());\n                            } else {\n                                $(\"btn_signal_pause\").replaceChildren(svg_play());\n                            }\n                        }},\n                        svg_pause()\n                    ),\n                    select({class: \"form-select\", id: \"select_signal_duration\",\n                        onchange: () => {\n                            var i = $(\"select_signal_duration\") as HTMLSelectElement;\n                            this.max_seconds = Number(i.value);\n                            this.onNextValues();\n                        }},\n                        option({value: 30}, \"30s\"),\n                        option({value: 60, selected: true}, \"60s\"),\n                        option({value: 60 * 2}, \"2min\"),\n                        option({value: 60 * 3}, \"3min\"),\n                        option({value: 60 * 5}, \"5min\"),\n                        option({value: 60 * 10}, \"10min\"),\n                        option({value: 60 * 30}, \"30min\"),\n                    ),\n                    select({class: \"form-select\", id: \"select_signal_raw\",\n                        onchange: () => {\n                            var i = $(\"select_signal_raw\") as HTMLSelectElement;\n                            this.show_raw_rssi = !!Number(i.value);\n                            this.onNextValues();\n                        }},\n                        option({value: 0, selected: true}, \"filtered RSSI\"),\n                        option({value: 1}, \"raw RSSI\"),\n                    )\n                )\n            );\n        }\n        return this.root;\n    }\n\n    needSeriesUpdate(): boolean {\n        if (!this.uplot)\n            return false;\n\n\n        return this.uplot.series.length !=\n            this.dataq.length\n            + 1 /* X-axis */\n            + 3 /* peak,enter,leave*/;\n    }\n\n    updateSeries() {\n        if (!this.uplot)\n            return ;\n\n        for (let i = 4; i < this.uplot.series.length; i++) {\n            this.uplot.delSeries(i);\n        }\n\n        this.dataq.forEach((e,i) => {\n            e.uplot_index = i + 4;\n            this.uplot.addSeries({\n                        label: `freq:${e.freq}`,\n                        stroke: this.getSeriesColor(i)\n                    }, e.uplot_index);\n        });\n    }\n\n    data2uplot(start_sec: number, end_sec:number) {\n\n        var peak = 0;\n        var enter = 0;\n        var leave = 0;\n        if (this.cfg) {\n            peak = this.cfg.rssi[0].peak;\n            enter = this.cfg.rssi[0].offset_enter/ 100 * peak;\n            leave = this.cfg.rssi[0].offset_leave/100 * peak;\n        }\n\n        var data = Array.from(\n            [\n                [\n                    [start_sec, end_sec],\n                    [peak,peak]\n                ],\n                [\n                    [start_sec, end_sec],\n                    [enter,enter]\n                ],\n                [\n                    [start_sec, end_sec],\n                    [leave,leave]\n                ],\n            ]);\n\n        var max_time = 0;\n        var min_time = Number.MAX_VALUE;\n        this.dataq.forEach((q) => {\n            const time = new Array<number>();\n            const rssi = new Array<number>();\n            q.data.forEach((d) => {\n                const t = d.t / 1000;\n                if (t >= start_sec && t <= end_sec) {\n                    max_time = max_time < t ? t : max_time;\n                    min_time = min_time > t ? t : min_time;\n                    time.push(t);\n                    rssi.push( this.show_raw_rssi ? d.r : d.s);\n                }\n            });\n            data.push(Array.from([time, rssi]));\n        });\n\n        for (let i = 0; i < 3; i++) {\n            data[i][0][0] = min_time;\n            data[i][0][1] = max_time;\n        }\n        return data;\n    }\n\n    onNextValues() {\n        if (!this.uplot)\n            return;\n\n\n        if (this.needSeriesUpdate()) {\n            this.updateSeries();\n        }\n\n        const now = Date.now()/1000;\n        const data = this.data2uplot(now - this.max_seconds, now);\n        this.updateGraph(uPlot.join(data));\n    }\n\n    onRssiUpdate(ev: RssiEvent) {\n        for(const r of ev.data) {\n            if (!this.date_offset) {\n                this.date_offset = Date.now() - r.t;\n            }\n\n            var q = this.dataq.find((e) => e.freq == ev.freq);\n            if (!q){\n                q = new RssiQ(ev.freq, r);\n                this.dataq.push(q);\n            } else {\n                q.addData(r);\n            }\n            q.expire(this.max_storage_seconds)\n        }\n\n        this.saveStorage();\n        if (this.update_uplot)\n            this.onNextValues();\n    }\n\n    saveStorage() {\n        try {\n            localStorage.setItem(\"SignalStorage\", JSON.stringify(this.dataq));\n        } catch(e) {\n            if (this.max_storage_seconds > 30) {\n                console.info(`Storage to small, change history to max ${this.max_storage_seconds}s`)\n                this.max_storage_seconds -= 5;\n                for(const d of this.dataq) {\n                    d.expireOlderThen(this.max_storage_seconds);\n                }\n            }\n        }\n    }\n\n    loadStorage() {\n        this.dataq = new Array<RssiQ>();\n        try {\n            var str =  localStorage.getItem(\"SignalStorage\");\n            if (str)  {\n                const q = JSON.parse(str);\n                for (let i = 0; i < q.length; i++) {\n                    const rssi = RssiQ.fromJSON(q[i]);\n                    if (rssi){\n                        this.dataq.push(rssi);\n                    }\n                }\n\n            }\n        }catch(e) {\n            this.dataq = new Array<RssiQ>();\n        }\n    }\n\n    onPlayersUpdate(players: Player[]) {\n\n        this.players = players;\n    }\n\n    constructor() {\n        super(\"RSSI\");\n        this.max_storage_seconds = 60 * 60;\n        this.max_seconds = 100;\n        this.update_uplot = true;\n        this.show_raw_rssi = false;\n        this.getDom();\n        this.getGraph();\n        this.loadStorage();\n\n        document.addEventListener(\"SFT_RSSI\", (e: CustomEventInit<RssiEvent>) => {\n            if (e.detail)\n                this.onRssiUpdate(e.detail);\n        });\n\n        document.addEventListener(\"SFT_CONFIG_UPDATE\", (e: CustomEventInit<Config>) => {\n            if (e.detail)\n                this.cfg = e.detail;\n        });\n\n        document.addEventListener(\"SFT_PLAYERS_UPDATE\", (e: CustomEventInit<Player[]>) => {\n            if (e.detail)\n                this.onPlayersUpdate(e.detail);\n        })\n    }\n}\n", "import { Mode } from \"../SimpleFpvTimer.js\";\nimport { RaceConfigPage } from \"./tabs/Config.js\";\nimport { LapsPage } from \"./tabs/Laps.js\";\nimport { PlayersPage } from \"./tabs/Players.js\";\nimport { SignalPage } from \"./tabs/Signal.js\";\n\n\n\nexport class RaceMode extends Mode {\n\n    constructor(name: string) {\n        super(name);\n\n        this.pages.push(new PlayersPage())\n        this.pages.push(new LapsPage())\n        this.pages.push(new RaceConfigPage())\n        this.pages.push(new SignalPage())\n    }\n}\n", "import { Mode } from \"../SimpleFpvTimer.js\";\nimport { RaceConfigPage } from \"../race/tabs/Config.js\";\nimport { SignalPage } from \"../race/tabs/Signal.js\";\n\n\n\nexport class CaptureTheFlagMode extends Mode {\n\n    constructor(name: string) {\n        super(name);\n\n        this.pages.push(new RaceConfigPage())\n        this.pages.push(new SignalPage())\n    }\n}\n", "import { Mode } from \"../SimpleFpvTimer.js\";\nimport { RaceConfigPage } from \"../race/tabs/Config.js\";\nimport { SignalPage } from \"../race/tabs/Signal.js\";\n\nexport class SpectrumMode extends Mode {\n\n    constructor(name: string) {\n        super(name);\n\n        this.pages.push(new RaceConfigPage());\n        this.pages.push(new SignalPage());\n    }\n}\n"],
  "mappings": "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",
  "names": ["require_bootstrap_bundle", "__commonJSMin", "exports", "module", "global", "factory", "elementMap", "Data", "element", "key", "instance", "instanceMap", "MAX_UID", "MILLISECONDS_MULTIPLIER", "TRANSITION_END", "parseSelector", "selector", "match", "id", "toType", "object", "getUID", "prefix", "getTransitionDurationFromElement", "transitionDuration", "transitionDelay", "floatTransitionDuration", "floatTransitionDelay", "triggerTransitionEnd", "isElement$1", "getElement", "isVisible", "elementIsVisible", "closedDetails", "summary", "isDisabled", "findShadowRoot", "root", "noop", "reflow", "getjQuery", "DOMContentLoadedCallbacks", "onDOMContentLoaded", "callback", "isRTL", "defineJQueryPlugin", "plugin", "$", "name", "JQUERY_NO_CONFLICT", "execute", "possibleCallback", "args", "defaultValue", "executeAfterTransition", "transitionElement", "waitForTransition", "emulatedDuration", "called", "handler", "target", "getNextActiveElement", "list", "activeElement", "shouldGetNext", "isCycleAllowed", "listLength", "index", "namespaceRegex", "stripNameRegex", "stripUidRegex", "eventRegistry", "uidEvent", "customEvents", "nativeEvents", "makeEventUid", "uid", "getElementEvents", "bootstrapHandler", "fn", "event", "hydrateObj", "EventHandler", "bootstrapDelegationHandler", "domElements", "domElement", "findHandler", "events", "callable", "delegationSelector", "normalizeParameters", "originalTypeEvent", "delegationFunction", "isDelegated", "typeEvent", "getTypeEvent", "addHandler", "oneOff", "handlers", "previousFunction", "removeHandler", "removeNamespacedHandlers", "namespace", "storeElementEvent", "handlerKey", "inNamespace", "isNamespace", "elementEvent", "keyHandlers", "jQueryEvent", "bubbles", "nativeDispatch", "defaultPrevented", "evt", "obj", "meta", "value", "normalizeData", "normalizeDataKey", "chr", "Manipulator", "attributes", "bsKeys", "pureKey", "Config", "config", "jsonConfig", "configTypes", "property", "expectedTypes", "valueType", "VERSION", "BaseComponent", "propertyName", "isAnimated", "getSelector", "hrefAttribute", "sel", "SelectorEngine", "child", "parents", "ancestor", "previous", "next", "focusables", "el", "enableDismissTrigger", "component", "method", "clickEvent", "NAME$f", "EVENT_KEY$b", "EVENT_CLOSE", "EVENT_CLOSED", "CLASS_NAME_FADE$5", "CLASS_NAME_SHOW$8", "Alert", "data", "NAME$e", "EVENT_KEY$a", "DATA_API_KEY$6", "CLASS_NAME_ACTIVE$3", "SELECTOR_DATA_TOGGLE$5", "EVENT_CLICK_DATA_API$6", "Button", "button", "NAME$d", "EVENT_KEY$9", "EVENT_TOUCHSTART", "EVENT_TOUCHMOVE", "EVENT_TOUCHEND", "EVENT_POINTERDOWN", "EVENT_POINTERUP", "POINTER_TYPE_TOUCH", "POINTER_TYPE_PEN", "CLASS_NAME_POINTER_EVENT", "SWIPE_THRESHOLD", "Default$c", "DefaultType$c", "Swipe", "absDeltaX", "direction", "NAME$c", "EVENT_KEY$8", "DATA_API_KEY$5", "ARROW_LEFT_KEY$1", "ARROW_RIGHT_KEY$1", "TOUCHEVENT_COMPAT_WAIT", "ORDER_NEXT", "ORDER_PREV", "DIRECTION_LEFT", "DIRECTION_RIGHT", "EVENT_SLIDE", "EVENT_SLID", "EVENT_KEYDOWN$1", "EVENT_MOUSEENTER$1", "EVENT_MOUSELEAVE$1", "EVENT_DRAG_START", "EVENT_LOAD_DATA_API$3", "EVENT_CLICK_DATA_API$5", "CLASS_NAME_CAROUSEL", "CLASS_NAME_ACTIVE$2", "CLASS_NAME_SLIDE", "CLASS_NAME_END", "CLASS_NAME_START", "CLASS_NAME_NEXT", "CLASS_NAME_PREV", "SELECTOR_ACTIVE", "SELECTOR_ITEM", "SELECTOR_ACTIVE_ITEM", "SELECTOR_ITEM_IMG", "SELECTOR_INDICATORS", "SELECTOR_DATA_SLIDE", "SELECTOR_DATA_RIDE", "KEY_TO_DIRECTION", "Default$b", "DefaultType$b", "Carousel", "items", "activeIndex", "order", "img", "swipeConfig", "activeIndicator", "newActiveIndicator", "elementInterval", "isNext", "nextElement", "nextElementIndex", "triggerEvent", "eventName", "isCycling", "directionalClassName", "orderClassName", "completeCallBack", "carousel", "slideIndex", "carousels", "NAME$b", "EVENT_KEY$7", "DATA_API_KEY$4", "EVENT_SHOW$6", "EVENT_SHOWN$6", "EVENT_HIDE$6", "EVENT_HIDDEN$6", "EVENT_CLICK_DATA_API$4", "CLASS_NAME_SHOW$7", "CLASS_NAME_COLLAPSE", "CLASS_NAME_COLLAPSING", "CLASS_NAME_COLLAPSED", "CLASS_NAME_DEEPER_CHILDREN", "CLASS_NAME_HORIZONTAL", "WIDTH", "HEIGHT", "SELECTOR_ACTIVES", "SELECTOR_DATA_TOGGLE$4", "Default$a", "DefaultType$a", "Collapse", "toggleList", "elem", "filterElement", "foundElement", "activeChildren", "activeInstance", "dimension", "complete", "scrollSize", "trigger", "children", "selected", "triggerArray", "isOpen", "_config", "top", "bottom", "right", "left", "auto", "basePlacements", "start", "end", "clippingParents", "viewport", "popper", "reference", "variationPlacements", "acc", "placement", "placements", "beforeRead", "read", "afterRead", "beforeMain", "main", "afterMain", "beforeWrite", "write", "afterWrite", "modifierPhases", "getNodeName", "getWindow", "node", "ownerDocument", "isElement", "OwnElement", "isHTMLElement", "isShadowRoot", "applyStyles", "_ref", "state", "style", "effect$2", "_ref2", "initialStyles", "styleProperties", "attribute", "applyStyles$1", "getBasePlacement", "max", "min", "round", "getUAString", "uaData", "item", "isLayoutViewport", "getBoundingClientRect", "includeScale", "isFixedStrategy", "clientRect", "scaleX", "scaleY", "visualViewport", "addVisualOffsets", "x", "y", "width", "height", "getLayoutRect", "contains", "parent", "rootNode", "getComputedStyle$1", "isTableElement", "getDocumentElement", "getParentNode", "getTrueOffsetParent", "getContainingBlock", "isFirefox", "isIE", "elementCss", "currentNode", "css", "getOffsetParent", "window", "offsetParent", "getMainAxisFromPlacement", "within", "min$1", "max$1", "withinMaxClamp", "v", "getFreshSideObject", "mergePaddingObject", "paddingObject", "expandToHashMap", "keys", "hashMap", "toPaddingObject", "padding", "arrow", "_state$modifiersData$", "options", "arrowElement", "popperOffsets", "basePlacement", "axis", "isVertical", "len", "arrowRect", "minProp", "maxProp", "endDiff", "startDiff", "arrowOffsetParent", "clientSize", "centerToReference", "center", "offset", "axisProp", "effect$1", "_options$element", "arrow$1", "getVariation", "unsetSides", "roundOffsetsByDPR", "win", "dpr", "mapToStyles", "_Object$assign2", "popperRect", "variation", "offsets", "position", "gpuAcceleration", "adaptive", "roundOffsets", "isFixed", "_offsets$x", "_offsets$y", "_ref3", "hasX", "hasY", "sideX", "sideY", "heightProp", "widthProp", "offsetY", "offsetX", "commonStyles", "_ref4", "_Object$assign", "computeStyles", "_ref5", "_options$gpuAccelerat", "_options$adaptive", "_options$roundOffsets", "computeStyles$1", "passive", "effect", "_options$scroll", "scroll", "_options$resize", "resize", "scrollParents", "scrollParent", "eventListeners", "hash$1", "getOppositePlacement", "matched", "hash", "getOppositeVariationPlacement", "getWindowScroll", "scrollLeft", "scrollTop", "getWindowScrollBarX", "getViewportRect", "strategy", "html", "layoutViewport", "getDocumentRect", "_element$ownerDocumen", "winScroll", "body", "isScrollParent", "_getComputedStyle", "overflow", "overflowX", "overflowY", "getScrollParent", "listScrollParents", "isBody", "updatedList", "rectToClientRect", "rect", "getInnerBoundingClientRect", "getClientRectFromMixedType", "clippingParent", "getClippingParents", "canEscapeClipping", "clipperElement", "getClippingRect", "boundary", "rootBoundary", "mainClippingParents", "firstClippingParent", "clippingRect", "accRect", "computeOffsets", "commonX", "commonY", "mainAxis", "detectOverflow", "_options", "_options$placement", "_options$strategy", "_options$boundary", "_options$rootBoundary", "_options$elementConte", "elementContext", "_options$altBoundary", "altBoundary", "_options$padding", "altContext", "clippingClientRect", "referenceClientRect", "popperClientRect", "elementClientRect", "overflowOffsets", "offsetData", "multiply", "computeAutoPlacement", "flipVariations", "_options$allowedAutoP", "allowedAutoPlacements", "placements$1", "allowedPlacements", "overflows", "a", "b", "getExpandedFallbackPlacements", "oppositePlacement", "flip", "_options$mainAxis", "checkMainAxis", "_options$altAxis", "checkAltAxis", "specifiedFallbackPlacements", "_options$flipVariatio", "preferredPlacement", "isBasePlacement", "fallbackPlacements", "referenceRect", "checksMap", "makeFallbackChecks", "firstFittingPlacement", "i", "_basePlacement", "isStartVariation", "mainVariationSide", "altVariationSide", "checks", "check", "numberOfChecks", "_loop", "_i", "fittingPlacement", "_ret", "flip$1", "getSideOffsets", "preventedOffsets", "isAnySideFullyClipped", "side", "hide", "referenceOverflow", "popperAltOverflow", "referenceClippingOffsets", "popperEscapeOffsets", "isReferenceHidden", "hasPopperEscaped", "hide$1", "distanceAndSkiddingToXY", "rects", "invertDistance", "skidding", "distance", "_options$offset", "_data$state$placement", "offset$1", "popperOffsets$1", "getAltAxis", "preventOverflow", "_options$tether", "tether", "_options$tetherOffset", "tetherOffset", "altAxis", "tetherOffsetValue", "normalizedTetherOffsetValue", "offsetModifierState", "_offsetModifierState$", "mainSide", "altSide", "additive", "minLen", "maxLen", "arrowPaddingObject", "arrowPaddingMin", "arrowPaddingMax", "arrowLen", "minOffset", "maxOffset", "clientOffset", "offsetModifierValue", "tetherMin", "tetherMax", "preventedOffset", "_offsetModifierState$2", "_mainSide", "_altSide", "_offset", "_len", "_min", "_max", "isOriginSide", "_offsetModifierValue", "_tetherMin", "_tetherMax", "_preventedOffset", "preventOverflow$1", "getHTMLElementScroll", "getNodeScroll", "isElementScaled", "getCompositeRect", "elementOrVirtualElement", "isOffsetParentAnElement", "offsetParentIsScaled", "documentElement", "modifiers", "map", "visited", "result", "modifier", "sort", "requires", "dep", "depModifier", "orderModifiers", "orderedModifiers", "phase", "debounce", "pending", "resolve", "mergeByName", "merged", "current", "existing", "DEFAULT_OPTIONS", "areValidElements", "_key", "popperGenerator", "generatorOptions", "_generatorOptions", "_generatorOptions$def", "defaultModifiers", "_generatorOptions$def2", "defaultOptions", "effectCleanupFns", "isDestroyed", "setOptionsAction", "cleanupModifierEffects", "m", "runModifierEffects", "_state$elements", "_state$orderedModifie", "_state$orderedModifie2", "_ref$options", "cleanupFn", "noopFn", "createPopper$2", "defaultModifiers$1", "createPopper$1", "createPopper", "Popper", "NAME$a", "EVENT_KEY$6", "DATA_API_KEY$3", "ESCAPE_KEY$2", "TAB_KEY$1", "ARROW_UP_KEY$1", "ARROW_DOWN_KEY$1", "RIGHT_MOUSE_BUTTON", "EVENT_HIDE$5", "EVENT_HIDDEN$5", "EVENT_SHOW$5", "EVENT_SHOWN$5", "EVENT_CLICK_DATA_API$3", "EVENT_KEYDOWN_DATA_API", "EVENT_KEYUP_DATA_API", "CLASS_NAME_SHOW$6", "CLASS_NAME_DROPUP", "CLASS_NAME_DROPEND", "CLASS_NAME_DROPSTART", "CLASS_NAME_DROPUP_CENTER", "CLASS_NAME_DROPDOWN_CENTER", "SELECTOR_DATA_TOGGLE$3", "SELECTOR_DATA_TOGGLE_SHOWN", "SELECTOR_MENU", "SELECTOR_NAVBAR", "SELECTOR_NAVBAR_NAV", "SELECTOR_VISIBLE_ITEMS", "PLACEMENT_TOP", "PLACEMENT_TOPEND", "PLACEMENT_BOTTOM", "PLACEMENT_BOTTOMEND", "PLACEMENT_RIGHT", "PLACEMENT_LEFT", "PLACEMENT_TOPCENTER", "PLACEMENT_BOTTOMCENTER", "Default$9", "DefaultType$9", "Dropdown", "relatedTarget", "referenceElement", "popperConfig", "parentDropdown", "isEnd", "popperData", "defaultBsPopperConfig", "openToggles", "toggle", "context", "composedPath", "isMenuTarget", "isInput", "isEscapeEvent", "isUpOrDownEvent", "getToggleButton", "NAME$9", "CLASS_NAME_FADE$4", "CLASS_NAME_SHOW$5", "EVENT_MOUSEDOWN", "Default$8", "DefaultType$8", "Backdrop", "backdrop", "NAME$8", "EVENT_KEY$5", "EVENT_FOCUSIN$2", "EVENT_KEYDOWN_TAB", "TAB_KEY", "TAB_NAV_FORWARD", "TAB_NAV_BACKWARD", "Default$7", "DefaultType$7", "FocusTrap", "trapElement", "elements", "SELECTOR_FIXED_CONTENT", "SELECTOR_STICKY_CONTENT", "PROPERTY_PADDING", "PROPERTY_MARGIN", "ScrollBarHelper", "documentWidth", "calculatedValue", "styleProperty", "scrollbarWidth", "manipulationCallBack", "actualValue", "callBack", "NAME$7", "EVENT_KEY$4", "DATA_API_KEY$2", "ESCAPE_KEY$1", "EVENT_HIDE$4", "EVENT_HIDE_PREVENTED$1", "EVENT_HIDDEN$4", "EVENT_SHOW$4", "EVENT_SHOWN$4", "EVENT_RESIZE$1", "EVENT_CLICK_DISMISS", "EVENT_MOUSEDOWN_DISMISS", "EVENT_KEYDOWN_DISMISS$1", "EVENT_CLICK_DATA_API$2", "CLASS_NAME_OPEN", "CLASS_NAME_FADE$3", "CLASS_NAME_SHOW$4", "CLASS_NAME_STATIC", "OPEN_SELECTOR$1", "SELECTOR_DIALOG", "SELECTOR_MODAL_BODY", "SELECTOR_DATA_TOGGLE$2", "Default$6", "DefaultType$6", "Modal", "modalBody", "transitionComplete", "event2", "isModalOverflowing", "initialOverflowY", "isBodyOverflowing", "showEvent", "alreadyOpen", "NAME$6", "EVENT_KEY$3", "DATA_API_KEY$1", "EVENT_LOAD_DATA_API$2", "ESCAPE_KEY", "CLASS_NAME_SHOW$3", "CLASS_NAME_SHOWING$1", "CLASS_NAME_HIDING", "CLASS_NAME_BACKDROP", "OPEN_SELECTOR", "EVENT_SHOW$3", "EVENT_SHOWN$3", "EVENT_HIDE$3", "EVENT_HIDE_PREVENTED", "EVENT_HIDDEN$3", "EVENT_RESIZE", "EVENT_CLICK_DATA_API$1", "EVENT_KEYDOWN_DISMISS", "SELECTOR_DATA_TOGGLE$1", "Default$5", "DefaultType$5", "Offcanvas", "completeCallback", "clickCallback", "DefaultAllowlist", "uriAttributes", "SAFE_URL_PATTERN", "allowedAttribute", "allowedAttributeList", "attributeName", "attributeRegex", "regex", "sanitizeHtml", "unsafeHtml", "allowList", "sanitizeFunction", "createdDocument", "elementName", "attributeList", "allowedAttributes", "NAME$5", "Default$4", "DefaultType$4", "DefaultContentType", "TemplateFactory", "content", "templateWrapper", "text", "template", "extraClass", "arg", "templateElement", "NAME$4", "DISALLOWED_ATTRIBUTES", "CLASS_NAME_FADE$2", "CLASS_NAME_MODAL", "CLASS_NAME_SHOW$2", "SELECTOR_TOOLTIP_INNER", "SELECTOR_MODAL", "EVENT_MODAL_HIDE", "TRIGGER_HOVER", "TRIGGER_FOCUS", "TRIGGER_CLICK", "TRIGGER_MANUAL", "EVENT_HIDE$2", "EVENT_HIDDEN$2", "EVENT_SHOW$2", "EVENT_SHOWN$2", "EVENT_INSERTED", "EVENT_CLICK$1", "EVENT_FOCUSIN$1", "EVENT_FOCUSOUT$1", "EVENT_MOUSEENTER", "EVENT_MOUSELEAVE", "AttachmentMap", "Default$3", "DefaultType$3", "Tooltip", "isInTheDom", "tip", "container", "tipId", "attachment", "triggers", "eventIn", "eventOut", "title", "timeout", "dataAttributes", "dataAttribute", "NAME$3", "SELECTOR_TITLE", "SELECTOR_CONTENT", "Default$2", "DefaultType$2", "Popover", "NAME$2", "EVENT_KEY$2", "DATA_API_KEY", "EVENT_ACTIVATE", "EVENT_CLICK", "EVENT_LOAD_DATA_API$1", "CLASS_NAME_DROPDOWN_ITEM", "CLASS_NAME_ACTIVE$1", "SELECTOR_DATA_SPY", "SELECTOR_TARGET_LINKS", "SELECTOR_NAV_LIST_GROUP", "SELECTOR_NAV_LINKS", "SELECTOR_LINK_ITEMS", "SELECTOR_DROPDOWN", "SELECTOR_DROPDOWN_TOGGLE$1", "Default$1", "DefaultType$1", "ScrollSpy", "section", "observableSection", "entries", "targetElement", "entry", "activate", "parentScrollTop", "userScrollsDown", "entryIsLowerThanPrevious", "targetLinks", "anchor", "listGroup", "activeNodes", "spy", "NAME$1", "EVENT_KEY$1", "EVENT_HIDE$1", "EVENT_HIDDEN$1", "EVENT_SHOW$1", "EVENT_SHOWN$1", "EVENT_CLICK_DATA_API", "EVENT_KEYDOWN", "EVENT_LOAD_DATA_API", "ARROW_LEFT_KEY", "ARROW_RIGHT_KEY", "ARROW_UP_KEY", "ARROW_DOWN_KEY", "HOME_KEY", "END_KEY", "CLASS_NAME_ACTIVE", "CLASS_NAME_FADE$1", "CLASS_NAME_SHOW$1", "CLASS_DROPDOWN", "SELECTOR_DROPDOWN_TOGGLE", "SELECTOR_DROPDOWN_MENU", "NOT_SELECTOR_DROPDOWN_TOGGLE", "SELECTOR_TAB_PANEL", "SELECTOR_OUTER", "SELECTOR_INNER", "SELECTOR_DATA_TOGGLE", "SELECTOR_INNER_ELEM", "SELECTOR_DATA_TOGGLE_ACTIVE", "Tab", "innerElem", "active", "hideEvent", "relatedElem", "nextActiveElement", "isActive", "outerElem", "open", "className", "NAME", "EVENT_KEY", "EVENT_MOUSEOVER", "EVENT_MOUSEOUT", "EVENT_FOCUSIN", "EVENT_FOCUSOUT", "EVENT_HIDE", "EVENT_HIDDEN", "EVENT_SHOW", "EVENT_SHOWN", "CLASS_NAME_FADE", "CLASS_NAME_HIDE", "CLASS_NAME_SHOW", "CLASS_NAME_SHOWING", "DefaultType", "Default", "Toast", "isInteracting", "protoOf", "changedStates", "derivedStates", "curDeps", "curNewDerives", "alwaysConnectedDom", "gcCycleInMs", "statesToGc", "propSetterCache", "objProto", "funcProto", "_undefined", "addAndScheduleOnFirst", "set", "s", "f", "waitMs", "runAndCaptureDeps", "deps", "arg", "prevDeps", "e", "keepConnected", "l", "b", "addStatesToGc", "d", "stateProto", "v", "updateDoms", "state", "initVal", "bind", "dom", "binding", "prevNewDerives", "newDom", "derive", "listener", "add", "children", "c", "protoOfC", "child", "tag", "ns", "name", "args", "props", "k", "getPropDescriptor", "proto", "cacheKey", "propSetter", "setter", "oldV", "event", "protoOfV", "handler", "_", "update", "iter", "derivedStatesArray", "changedStatesArray", "van_1_5_2_default", "import_bootstrap_bundle", "h5", "div", "van_1_5_2_default", "Notifications", "_Notifications", "n", "content_class", "div_content", "div", "van_1_5_2_default", "h5", "d", "modal", "TimeSync", "_TimeSync", "#instance", "data", "c0", "c1", "c2", "c3", "s0", "s1", "s2", "s3", "rtt1", "offset1", "rtt2", "offset2", "offset", "response", "Notifications", "json", "format_ms", "arg", "sec_num", "hours", "minutes", "seconds", "ms", "t", "p", "ret", "i", "$", "element", "hide", "show", "enumToMap", "obj", "m", "key", "suffix", "v", "Images", "nullOrUndef", "variable", "default_val", "button", "div", "pre", "ul", "li", "a", "van_1_5_2_default", "Page", "name", "Mode", "page", "root", "e", "RSSIConfig", "ConfigWIFIMode", "ConfigNodeMode", "ConfigGameMode", "Config", "matches", "idx", "nullOrUndef", "obj", "k", "v", "i", "element", "kk", "vv", "func", "url", "response", "json", "error", "Notifications", "Player", "name", "p", "a", "b", "offset", "l", "SimpleFpvTimer", "Config", "ws_uri", "ws", "ev", "json", "wsEv", "cfg", "expected_mode", "m", "configMode", "mode", "tabList", "ul", "tabContent", "div", "page", "index", "tabLink", "li", "tabPane", "players", "p2", "new_p", "TimeSync", "rssidata", "url", "response", "error", "import_bootstrap_bundle", "h3", "label", "form", "select", "input", "img", "fieldset", "option", "button", "div", "h5", "pre", "ul", "li", "span", "a", "table", "thead", "tbody", "th", "tr", "td", "van_1_5_2_default", "VisibleElements", "fieldname", "group", "arr", "needle", "v", "hidden", "hidden_groups", "rssi_min", "rssi_max", "ElementsRace", "cfg", "ElementsCTF", "ElrsConfigGroup", "TabedRssiConfigGroup", "ElementsSpectrum", "_", "ConfigElement", "visible", "help", "Images", "$", "e", "i", "obj_r", "obj", "ConfigColorElement", "value", "r", "g", "b", "m", "ConfigSelectElement", "options", "s", "key", "ConfigGroup", "elem", "id", "RSSIConfigElement", "idx", "GeneralConfigGroup", "game_mode", "enumToMap", "ConfigGameMode", "node_name", "node_mode", "ConfigNodeMode", "ctrl_ipv4", "freq_map", "RSSITap", "other", "fields", "other_e", "my", "my_suffix", "suffix", "other_suffix", "l", "hide", "show", "index", "new_tab", "freq", "tab", "rssi", "WifiConfigGroup", "ConfigWIFIMode", "ConfigForm", "btn", "Config", "RaceConfigPage", "Page", "button", "div", "pre", "ul", "li", "a", "table", "thead", "tbody", "th", "tr", "td", "van_1_5_2_default", "LapsRow", "style", "format_ms", "player", "lap", "LapsTable", "row", "b", "first", "second", "third", "r", "e", "head", "body", "l", "LapsPage", "Page", "ev", "h3", "label", "select", "option", "button", "div", "h5", "pre", "ul", "li", "span", "a", "table", "thead", "tbody", "th", "tr", "td", "van_1_5_2_default", "RaceMode", "PlayerRanking", "player", "ranking", "other", "id", "time", "style", "div", "span", "laps", "sum_div", "sum_duration", "l", "format_ms", "lap", "sortPlayerRanking", "a", "b", "PlayerRankingByFastesLap", "counted_laps", "duration_sum", "i", "PlayerRankingByLap", "PlayerRankingByContinousLaps", "num", "continuous_duration", "sum", "j", "PlayersPage", "Page", "select", "$", "p", "enumToMap", "RaceMode", "key", "value", "option", "button", "medal", "card", "h5", "players", "sum_a", "sum_b", "mode", "rank", "r", "container", "pre", "UPLOT", "ORI_HZ", "ORI_VT", "TITLE", "WRAP", "UNDER", "OVER", "AXIS", "OFF", "SELECT", "CURSOR_X", "CURSOR_Y", "CURSOR_PT", "LEGEND", "LEGEND_LIVE", "LEGEND_INLINE", "LEGEND_SERIES", "LEGEND_MARKER", "LEGEND_LABEL", "LEGEND_VALUE", "WIDTH", "HEIGHT", "TOP", "BOTTOM", "LEFT", "RIGHT", "hexBlack", "transparent", "mousemove", "mousedown", "mouseup", "mouseenter", "mouseleave", "dblclick", "resize", "scroll", "change", "dppxchange", "LEGEND_DISP", "domEnv", "doc", "win", "nav", "pxRatio", "query", "setPxRatio", "_pxRatio", "off", "on", "addClass", "el", "c", "cl", "remClass", "setStylePx", "name", "value", "placeTag", "tag", "cls", "targ", "refEl", "placeDiv", "xformCache", "elTrans", "xPos", "yPos", "xMax", "yMax", "xform", "xformOld", "colorCache", "elColor", "background", "borderColor", "newColor", "oldColor", "sizeCache", "elSize", "newWid", "newHgt", "centered", "newSize", "oldSize", "evOpts", "evOpts2", "ev", "cb", "capt", "closestIdx", "num", "arr", "lo", "hi", "mid", "bitwise", "floor", "makeIndexOfs", "predicate", "data", "_i0", "_i1", "i0", "i1", "i", "notNullish", "v", "isPositive", "nonNullIdxs", "positiveIdxs", "getMinMax", "sorted", "log", "getEdgeIdxs", "_min", "_max", "inf", "rangeLog", "min", "max", "base", "fullMags", "minSign", "sign", "maxSign", "logFn", "log10", "log2", "growMinAbs", "ceil", "growMaxAbs", "minExp", "abs", "maxExp", "minIncr", "pow", "maxIncr", "roundDec", "incrRoundDn", "incrRoundUp", "rangeAsinh", "minMax", "rangePad", "autoRangePart", "_eqRangePart", "_eqRange", "rangeNum", "mult", "extra", "isObj", "_rangeNum", "ifNull", "lh", "rh", "hasData", "idx0", "idx1", "cfg", "cmin", "cmax", "padMin", "padMax", "hardMin", "hardMax", "softMin", "softMax", "softMinMode", "softMaxMode", "delta", "deltaMag", "scalarMax", "scalarMag", "scalarMagDelta", "nonZeroDelta", "mag", "_padMin", "_newMin", "_softMin", "minLim", "_padMax", "_newMax", "_softMax", "maxLim", "numFormatter", "fmtNum", "val", "M", "PI", "round", "sinh", "linthresh", "asinh", "numIntDigits", "x", "clamp", "fnOrSelf", "noop", "retArg0", "_0", "retArg1", "_1", "retTrue", "_", "retEq", "a", "b", "regex6", "fixFloat", "isInt", "fixedDec", "str", "match", "len", "exp", "incrRound", "incr", "dec", "p", "n", "guessDec", "genIncrs", "mults", "incrs", "multDec", "expa", "_incr", "EMPTY_OBJ", "EMPTY_ARR", "nullNullTuple", "isArr", "isUndef", "isStr", "is", "fastIsObj", "TypedArray", "__proto__", "copy", "o", "_isObj", "out", "k", "assign", "args", "src", "key", "NULL_REMOVE", "NULL_RETAIN", "NULL_EXPAND", "nullExpand", "yVals", "nullIdxs", "alignedLen", "xi", "lastNullIdx", "nullIdx", "join", "tables", "nullModes", "allHeadersSame", "table", "isAsc", "sortCols", "xVals", "ti", "xs", "xIdxs", "t", "si", "ys", "nullMode", "yVal", "alignedIdx", "microTask", "fn", "head", "rlen", "idxs", "table2", "row", "row2", "j", "vals0", "len0", "vals1", "vals", "samples", "firstIdx", "lastIdx", "stride", "prevVal", "months", "days", "slice3", "days3", "months3", "engNames", "zeroPad2", "int", "zeroPad3", "subs", "d", "names", "h", "fmtDate", "tpl", "parts", "R", "m", "localTz", "tzDate", "date", "tz", "date2", "onlyWhole", "allMults", "decIncrs", "oneIncrs", "wholeIncrs", "numIncrs", "NL", "yyyy", "NLyyyy", "md", "NLmd", "NLmdyy", "aa", "hmm", "hmmaa", "NLhmmaa", "ss", "genTimeStuffs", "ms", "s", "mo", "y", "timeIncrs", "_timeAxisStamps", "timeAxisSplits", "self", "axisIdx", "scaleMin", "scaleMax", "foundIncr", "foundSpace", "splits", "isYr", "isMo", "minDate", "minDateTs", "minMin", "mkDate", "minMinTs", "moIncr", "yrIncr", "split", "splitDate", "baseYear", "baseMonth", "next", "offs", "incr0", "tzOffset", "date0", "prevHour", "incrHours", "minSpace", "pctSpace", "expectedHour", "dstShift", "prevSplit", "timeIncrsMs", "_timeAxisStampsMs", "timeAxisSplitsMs", "timeIncrsS", "_timeAxisStampsS", "timeAxisSplitsS", "timeAxisStamps", "stampCfg", "timeAxisVals", "stamps", "prevYear", "prevMnth", "prevDate", "prevMins", "prevSecs", "newYear", "newMnth", "newDate", "newHour", "newMins", "newSecs", "stamp", "timeAxisVal", "dateTpl", "timeSeriesStamp", "_timeSeriesStamp", "timeSeriesVal", "seriesIdx", "dataIdx", "legendStroke", "legendFill", "legendOpts", "cursorPointShow", "pt", "size", "mar", "width", "cursorPointFill", "sp", "cursorPointStroke", "cursorPointSize", "moveTuple", "cursorMove", "mouseLeft1", "mouseTop1", "filtBtn0", "handle", "onlyTarg", "e", "filtTarg", "cursorOpts", "valPos", "curPos", "axisLines", "grid", "ticks", "border", "font", "labelFont", "lineGap", "xAxisOpts", "numSeriesLabel", "timeSeriesLabel", "xSeriesOpts", "numAxisVals", "numAxisSplits", "forceMin", "numDec", "logAxisSplits", "logBase", "nextMagIncr", "asinhAxisSplits", "posSplits", "zero", "RE_ALL", "RE_12357", "RE_125", "RE_1", "_filt", "distr", "re", "keepMod", "log10AxisValsFilt", "axis", "scaleKey", "sc", "valToPos", "_10", "magSpace", "log2AxisValsFilt", "numSeriesVal", "yAxisOpts", "ptDia", "dia", "seriesPointsShow", "scale", "xData", "p0", "p1", "dim", "maxPts", "facet", "gaps", "nullGaps", "xySeriesOpts", "ySeriesOpts", "clampScale", "xScaleOpts", "yScaleOpts", "syncs", "_sync", "opts", "plot", "type", "w", "BAND_CLIP_FILL", "BAND_CLIP_STROKE", "orient", "u", "mode", "series", "scales", "bbox", "dx", "dy", "sx", "sy", "l", "H", "V", "moveToH", "lineToH", "rectH", "arcH", "bezierCurveToH", "moveToV", "lineToV", "rectV", "arcV", "bezierCurveToV", "bandFillClipDirs", "fillDir", "clipDirs", "bands", "seriesFillTo", "dataMin", "dataMax", "bandFillDir", "clipBandLine", "strokePath", "clipDir", "dataX", "dataY", "scaleX", "scaleY", "valToPosX", "valToPosY", "xOff", "yOff", "xDim", "yDim", "pxRound", "dir", "lineTo", "frIdx", "toIdx", "x0", "y0", "x1", "yLimit", "clip", "clipGaps", "ori", "plotLft", "plotTop", "plotWid", "plotHgt", "rect", "prevGapEnd", "g", "maxStrokeWidth", "addGap", "fromX", "toX", "prevGap", "findGaps", "pixelForX", "align", "fr", "to", "frPx", "toPx", "fri2", "toi2", "pxRoundGen", "pxAlign", "moveTo", "arcTo", "y1", "x2", "y2", "r", "endRad", "baseRad", "startAngle", "endAngle", "bp1x", "bp1y", "bp2x", "bp2y", "p2x", "p2y", "points", "filtIdxs", "arc", "rad", "fill", "lft", "top", "wid", "hgt", "drawPoint", "pi", "_drawAcc", "stroke", "accX", "minY", "maxY", "inY", "outY", "drawAccH", "drawAccV", "linear", "alignGaps", "pixelForY", "drawAcc", "_paths", "hasGap", "xForPixel", "pos", "drawnAtX", "idx0px", "idx1px", "nextAccXVal", "xVal", "bandClipDir", "fillToVal", "fillToY", "frX", "stepped", "ascDesc", "extend", "left", "prevYPos", "firstXPos", "prevXPos", "firstXPosExt", "yVal1", "prevXPosExt", "fillTo", "halfStroke", "startsOffset", "endsOffset", "findColWidth", "colWid", "prevIdx", "minDelta", "bars", "_extraGap", "ro", "radiusFn", "gapFactor", "_maxWidth", "_minWidth", "disp", "_each", "dispFills", "dispStrokes", "_align", "extraGap", "maxWidth", "minWidth", "valRadius", "baseRadius", "_dirX", "each", "band", "xShift", "barWid", "fullGap", "strokeWidth", "multiPath", "fillColors", "fillPaths", "strokeColors", "strokePaths", "color", "pct", "sizes", "insetStroke", "rawBarWid", "dataY0", "radVal", "radBase", "yVal0", "btm", "barHgt", "rv", "rb", "splineInterp", "interp", "bezierCurveTo", "xCoords", "yCoords", "monotoneCubic", "_monotoneCubic", "path", "ds", "dys", "dxs", "cursorPlots", "invalidateRects", "uPlot", "linearPath", "pointsPath", "setDefaults", "xo", "yo", "initY", "setDefault", "setDefaults2", "xyo", "snapNumX", "snapTimeX", "snapNumY", "snapLogY", "snapLogX", "snapAsinhY", "snapAsinhX", "findIncr", "minVal", "maxVal", "intDigits", "incrIdx", "pxRatioFont", "fontSize", "fontSizeCss", "syncFontSize", "f", "then", "getHPos", "getVPos", "getPos", "ready", "root", "title", "can", "ctx", "wrap", "over", "mouseLeft0", "mouseTop0", "drag", "under", "axes", "xScaleKey", "drawOrderMap", "drawAxesGrid", "drawSeries", "drawOrder", "initScale", "scaleOpts", "isTime", "rn", "rangeIsArr", "getVal", "_val", "xScaleDistr", "pendScales", "_tzDate", "ts", "_fmtDate", "_timeAxisSplits", "_timeAxisVals", "_timeSeriesVal", "activeIdxs", "legend", "cursor", "showLegend", "showCursor", "markers", "legendTable", "legendHead", "legendBody", "legendRows", "legendCells", "legendCols", "multiValLegend", "NULL_LEGEND_VALUES", "getMultiVals", "son", "soff", "initLegendRow", "cells", "label", "indic", "text", "onMouse", "setCursorEvent", "isolate", "setSeries", "syncOpts", "cursorFocus", "FOCUS_TRUE", "mouseListeners", "targListeners", "listener", "offMouse", "fullWidCss", "fullHgtCss", "plotWidCss", "plotHgtCss", "plotLftCss", "plotTopCss", "_plotLftCss", "_plotTopCss", "_plotWidCss", "_plotHgtCss", "shouldSetScales", "shouldSetSize", "shouldConvergeSize", "shouldSetCursor", "shouldSetSelect", "shouldSetLegend", "_setSize", "height", "force", "calcSize", "resetYSeries", "commit", "calcPlotRect", "calcAxesRects", "bb", "CYCLE_LIMIT", "convergeSize", "converged", "cycleNum", "axesConverged", "axesCalc", "paddingConverged", "paddingCalc", "setSize", "hasTopAxis", "hasBtmAxis", "hasRgtAxis", "hasLftAxis", "side", "_size", "isVt", "labelSize", "fullSize", "sidesWithAxes", "_padding", "off1", "off2", "off3", "off0", "incrOffset", "hov", "skip", "prox", "bias", "cursorIdx", "valAtPosX", "idx2", "_prox", "withProx", "cursorLft", "xValues", "yValues", "nonNullLft", "nonNullRgt", "lftPos", "rgtPos", "lftDelta", "rgtDelta", "focus", "cursorOnePt", "cursorPts", "cursorPtsLft", "cursorPtsTop", "initCursorPt", "initSeries", "sv", "_ptDia", "rowCells", "fire", "addSeries", "delSeries", "tr", "initAxis", "av", "autoPadSide", "padding", "dataLen", "data0", "viaAutoScaleX", "setData", "_data", "_resetScales", "scaleData", "_data0", "xsc", "autoScaleX", "_setScale", "ctxStroke", "ctxFill", "ctxWidth", "ctxDash", "ctxJoin", "ctxCap", "ctxFont", "ctxAlign", "ctxBaseline", "ctxAlpha", "setCtxStyle", "dash", "cap", "setFontStyle", "baseline", "accScale", "wsc", "psc", "AUTOSCALE", "setScales", "wipScales", "xFacet", "yFacet", "yScaleKey", "yData", "wscx", "wscy", "changed", "anyChanged", "getOuterIdxs", "ydata", "cacheStrokeFill", "_idxs", "drawPath", "_gaps", "show", "_points", "gapsClip", "flags", "strokeStyle", "fillStyle", "boundsClip", "offset", "_pxAlign", "strokeFill", "fillStroke", "lineWidth", "lineDash", "lineCap", "fillPath", "didStrokeFill", "bi", "lowerEdge", "lowerData", "bandClip", "gapsClip2", "_fillStyle", "CLIP_FILL_STROKE", "doFill", "doStroke", "getIncrSpace", "fullDim", "incrSpace", "drawOrthoLines", "filts", "pos0", "pos1", "_space", "_splits", "values", "_p", "shiftDir", "shiftAmt", "baseLpos", "plotDim", "plotOff", "axisGap", "tickSize", "angle", "basePos", "finalPos", "textAlign", "textBaseline", "lineHeight", "canOffs", "_values", "_parts", "queuedCommit", "deferHooks", "hooksQueue", "flushHooks", "_commit", "batch", "_deferHooks", "_el", "_show", "_pos", "posOffset", "syncRect", "pctWid", "pctHgt", "vCursor", "hCursor", "select", "prop", "_hideProps", "selectDiv", "setSelect", "updateCursor", "setLegend", "rebuildPaths", "recalcAxes", "setScale", "xCursor", "yCursor", "rawMouseLeft0", "rawMouseTop0", "rawMouseLeft1", "rawMouseTop1", "dragging", "dragX", "dragY", "_fire", "toggleDOM", "_pub", "setFocus", "pubSync", "setBand", "addBand", "delBand", "setAlpha", "closestDist", "closestSeries", "focusedSeries", "allFocused", "_setAlpha", "i2", "isFocused", "posToVal", "closestIdxFromXpos", "setSelH", "setSelV", "setSelX", "setSelY", "syncLegend", "didx", "sidx", "setLegendValues", "idx", "noDataInRange", "mouseXPos", "_ptLft", "_ptTop", "_ptWid", "_ptHgt", "_centered", "_ptFill", "_ptStroke", "yVal2", "xPos2", "mouseYPos", "dist", "mouseYVal", "seriesYValSign", "mouseYValSign", "hPos", "vPos", "ptWid", "ptHgt", "ptLft", "ptTop", "ptStroke", "ptFill", "getBBox", "focusChanged", "xKey", "yKey", "matchXKeys", "matchYKeys", "xKeySrc", "yKeySrc", "sdrag", "sori", "sPosToVal", "sOff", "sDim", "matchingX", "matchingY", "hideSelect", "rawDX", "rawDY", "_rawDX", "uni", "syncKey", "xSyncKey", "ySyncKey", "shouldPub", "defer", "mouseMove", "_l", "_t", "_w", "_h", "_i", "cacheMouse", "initial", "snap", "syncOptsSrc", "xValSrc", "yValSrc", "rotSrc", "_xDim", "_yDim", "_xPos", "_yPos", "__l", "downSelectLeft", "downSelectTop", "downSelectWidth", "downSelectHeight", "mouseDown", "mouseUp", "hasSelect", "chgSelect", "mouseLeave", "_dragging", "snapH", "snapV", "snapProx", "dragH", "dragV", "dblClick", "syncPxRatio", "events", "seriesIdxMatcher", "hooks", "evName", "a1", "a2", "srcSeriesIdx", "sync", "pub", "destroy", "_init", "paths", "button", "div", "pre", "select", "option", "van_1_5_2_default", "RssiQ", "_RssiQ", "freq", "data", "json", "rssiQ", "i", "time", "seconds", "svg", "svg_path", "path", "svg_pause", "svg_play", "SignalPage", "Page", "opts", "uPlot", "$", "start_sec", "end_sec", "peak", "enter", "leave", "max_time", "min_time", "q", "rssi", "d", "t", "now", "ev", "r", "e", "str", "players", "RaceMode", "Mode", "name", "PlayersPage", "LapsPage", "RaceConfigPage", "SignalPage", "CaptureTheFlagMode", "Mode", "name", "RaceConfigPage", "SignalPage", "SpectrumMode", "Mode", "name", "RaceConfigPage", "SignalPage", "button", "div", "pre", "van_1_5_2_default", "DebugPage", "Page", "div", "ev", "raceMode", "RaceMode", "ctfMode", "CaptureTheFlagMode", "spectrumMode", "SpectrumMode", "app", "SimpleFpvTimer", "van_1_5_2_default", "notifications", "Notifications", "TimeSync"]
}
